"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4874],{69418:function(e,o,a){a.d(o,{Z:function(){return g}});var t=a(85893),l=a(44642),n=a(79072),i=a(61953),s=a(49837),r=a(91359),d=a(29630),c=a(67294),u=a(40039),x=a(82747),m=a(60664),p=a(29308),h=a(84220);let v=e=>{var o,a,l,n,s,r,x,v;let{fields:f,setFields:j,handleCnpj:g,validCnpj:b,getValues:y,control:D,errors:I,setValue:C,register:Z,reset:W}=e,{loggedUnity:w}=(0,c.useContext)(u.V),[S,A]=(0,c.useState)([]),[F,G]=(0,c.useState)([]),[E,T]=(0,c.useState)([]),P=async()=>{let e=await m.h.post("/formularios/fornecedor/getModels",{unidadeID:w.unidadeID});A(e.data)},N=async()=>{let e=await m.h.post("/formularios/fornecedor/getProducts",{unidadeID:w.unidadeID});G(e.data)},V=async()=>{let e=await m.h.post("/formularios/fornecedor/getGruposAnexo",{unidadeID:w.unidadeID});T(e.data)},O=()=>{j(null),C("fields.cnpj",""),C("fields.razaoSocial",""),C("fields.email",""),C("fields.modelo",null),C("fields.gruposAnexo",[]),C("fields.produtos",[])};return(0,c.useEffect)(()=>{W(),P(),N(),V()},[]),S&&F&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(p.Z,{xs:12,md:12,title:"CNPJ",name:"fields.cnpj",value:null==f?void 0:f.cnpj,onChange:g,clearField:y("fields.cnpj")?O:null,mask:"cnpj",required:!0,control:D,errors:null==I?void 0:null===(o=I.fields)||void 0===o?void 0:o.cnpj}),!1==b&&(0,t.jsx)(d.Z,{variant:"body2",color:"error",children:"CNPJ inv\xe1lido!"})]}),(0,t.jsx)(p.Z,{xs:12,md:12,title:"Raz\xe3o Social",name:"fields.razaoSocial",value:null==f?void 0:f.razaoSocial,disabled:!b,required:!0,control:D,errors:null==I?void 0:null===(a=I.fields)||void 0===a?void 0:a.razaoSocial}),(0,t.jsx)(p.Z,{xs:12,md:12,type:"email",title:"E-mail",name:"fields.email",value:null==f?void 0:f.email,disabled:!b,required:!0,control:D,errors:null==I?void 0:null===(l=I.fields)||void 0===l?void 0:l.email}),(0,t.jsx)(h.Z,{xs:12,md:12,title:"Modelo de Formul\xe1rio",name:"fields.modelo",options:S,required:!0,value:null==f?void 0:f.modelo,disabled:!b,register:Z,setValue:C,control:D,errors:null==I?void 0:null===(n=I.fields)||void 0===n?void 0:n.modelo}),(0,t.jsx)(h.Z,{xs:12,md:12,title:"Grupos de Anexo",multiple:!0,name:"fields.gruposAnexo",value:null!==(x=null==f?void 0:f.gruposAnexo)&&void 0!==x?x:[],disabled:!b,options:null!=E?E:[],register:Z,setValue:C,control:D,errors:null==I?void 0:null===(s=I.fields)||void 0===s?void 0:s.gruposAnexo}),(0,t.jsx)(h.Z,{xs:12,md:12,title:"Produtos",name:"fields.produtos",value:null!==(v=null==f?void 0:f.produtos)&&void 0!==v?v:[],disabled:!b,multiple:!0,required:!0,options:null!=F?F:[],register:Z,setValue:C,control:D,errors:null==I?void 0:null===(r=I.fields)||void 0===r?void 0:r.produtos})]})};a(86501);var f=a(34175);let j=e=>{var o,a,p,h,j,g;let{cnpj:b,control:y,setValue:D,register:I,errors:C,reset:Z,getValues:W}=e,[w,S]=(0,c.useState)(!1),{loggedUnity:A}=(0,c.useContext)(u.V),[F,G]=(0,c.useState)(null),[E,T]=(0,c.useState)(null),P=e=>{console.log("\uD83D\uDE80 ~ handleCnpj:",e),18==e.length?(0,x.zk)(e)?(T(!0),N(e)):T(!1):(T(null),G(null))},N=async e=>{try{let o=await m.h.post("/formularios/fornecedor/cnpj",{unidadeID:A.unidadeID,cnpj:e}),a={new:o.data.new,fornecedorID:o.data.fornecedorID,data:o.data.dataAvaliacao,modelo:o.data.modelo.nome,produtos:o.data.produtos,gruposAnexo:o.data.gruposAnexo},t=await V(e);G({...F,cnpj:(0,f.PK)(t.data.CNPJ),status:t.data.STATUS,dataAbertura:t.data["DATA ABERTURA"],telefone:t.data.DDD+" "+t.data.TELEFONE,razaoSocial:t.data["RAZAO SOCIAL"],nomeFantasia:t.data["NOME FANTASIA"],email:t.data.EMAIL,cidade:t.data.MUNICIPIO+"/"+t.data.UF,preenchimento:a}),D("fields.cnpj",e),D("fields.razaoSocial",t.data["RAZAO SOCIAL"]),D("fields.nome",t.data["NOME FANTASIA"]),D("fields.email",t.data.EMAIL),D("fields.modelo",o.data.modelo.id>0?o.data.modelo:null),D("fields.gruposAnexo",o.data.gruposAnexo),D("fields.produtos",o.data.produtos)}catch(l){console.error(l)}},V=async e=>{let o=e.replace(/\D/g,""),a=await m.h.get("https://api-publica.speedio.com.br/buscarcnpj?cnpj=".concat(o));return a};return(0,c.useEffect)(()=>{S(!w),b&&b.length>0&&P(b)},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(l.Z,{children:(0,t.jsxs)(n.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(n.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(i.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:(0,t.jsx)(v,{setFields:G,fields:null!=F?F:null,control:y,errors:C,reset:Z,setValue:D,getValues:W,register:I,handleCnpj:P,validCnpj:E},w)})}),(0,t.jsxs)(n.ZP,{item:!0,xs:12,md:6,children:[(0,t.jsx)(s.Z,{children:(0,t.jsx)(r.Z,{children:(0,t.jsxs)(i.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[(0,t.jsx)(d.Z,{variant:"body2",children:(0,t.jsx)("strong",{children:"Dados consultados da Receita Federal"})}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Raz\xe3o Social:"})," ",null==F?void 0:F.razaoSocial]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Nome Fantasia:"})," ",null==F?void 0:F.razaoSocial]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"CNPJ:"})," ",null==F?void 0:F.cnpj]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Status:"})," ",null==F?void 0:F.status]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Data Abertura:"})," ",null==F?void 0:F.dataAbertura]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Telefone:"})," ",null==F?void 0:F.telefone]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"E-mail:"})," ",null==F?void 0:F.email]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Cidade:"})," ",null==F?void 0:F.cidade]})]})})}),(0,t.jsx)(s.Z,{sx:{mt:4},children:(0,t.jsx)(r.Z,{children:(0,t.jsxs)(i.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[(0,t.jsx)(d.Z,{variant:"body2",children:(0,t.jsx)("strong",{children:"Dados do \xfaltimo formul\xe1rio deste fornecedor"})}),(null==F?void 0:null===(o=F.preenchimento)||void 0===o?void 0:o.new)?(0,t.jsx)(d.Z,{variant:"body2",color:"primary",children:(0,t.jsx)("strong",{children:"Novo fornecedor"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"ID: "})," ",null==F?void 0:null===(a=F.preenchimento)||void 0===a?void 0:a.fornecedorID]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Data de preenchimento:"})," ",null==F?void 0:null===(p=F.preenchimento)||void 0===p?void 0:p.data]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Modelo:"})," ",null==F?void 0:null===(h=F.preenchimento)||void 0===h?void 0:h.modelo]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Grupos de anexo: "}),null==F?void 0:null===(j=F.preenchimento)||void 0===j?void 0:j.gruposAnexo.map((e,o)=>{var a;return"".concat(e.nome).concat(o<(null==F?void 0:null===(a=F.preenchimento)||void 0===a?void 0:a.gruposAnexo.length)-1?", ":"")})]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Produtos: "}),null==F?void 0:null===(g=F.preenchimento)||void 0===g?void 0:g.produtos.map((e,o)=>{var a;return"".concat(e.nome).concat(o<(null==F?void 0:null===(a=F.preenchimento)||void 0===a?void 0:a.produtos.length)-1?", ":"")})]})]})]})})})]})]})})})};var g=j},34874:function(e,o,a){a.d(o,{Z:function(){return z}});var t=a(85893),l=a(67294),n=a(87536),i=a(56531),s=a(79139),r=a(34282);a(96351);var d=a(29308),c=a(19604),u=a(49837),x=a(91359),m=a(79072),p=a(55343),h=a(29630),v=a(11163),f=a.n(v),j=a(46749),g=a(60664),b=a(36188);a(60565);var y=a(83830),D=a(40039),I=a(39976),C=a(47842),Z=a(86501),W=a(66136),w=a(80377),S=a(22416),A=a(61953),F=a(22841),G=a(16056);let E=e=>{let{xs:o,md:a,title:l,index:n,name:i,typePage:s,value:r,disabled:d,register:c,...u}=e;return(0,t.jsx)(m.ZP,{item:!0,xs:o,md:a,children:(0,t.jsx)(A.Z,{display:"flex",flexDirection:"column",alignItems:"start",children:(0,t.jsx)(F.Z,{control:(0,t.jsx)(G.Z,{...u,name:i,...c(i),defaultChecked:r,disabled:d,onChange(e){u.onChange&&u.onChange(e.target.checked,n,i,s)}}),label:l,size:"small",sx:{"&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}})})})},T=e=>{let{data:o,control:a,setValue:n,register:i,errors:s}=e,[r,c]=(0,l.useState)(!0);return n("emailDestinatario",o.email),(0,t.jsxs)("div",{className:"flex flex-col gap-2 pt-2",children:[r&&(0,t.jsx)(d.Z,{name:"emailDestinatario",type:"email",title:"E-mail do destinat\xe1rio",required:!0,control:a,errors:s.emailDestinatario}),(0,t.jsx)(d.Z,{name:"assunto",title:"Assunto",required:!0,register:i,control:a,defaultValue:"",errors:s.assunto}),(0,t.jsx)(d.Z,{name:"descricao",title:"Descri\xe7\xe3o",multiline:!0,rows:4,required:!0,control:a,defaultValue:"",errors:s.descricao}),(0,t.jsxs)(S.Z,{row:!0,children:[(0,t.jsx)(E,{name:"email",title:"E-mail",value:!0,register:i,onChange:()=>c(!r)}),(0,t.jsx)(E,{name:"alerta",title:"Alerta",value:!0,register:i})]})]})};var P=a(99070),N=a(40874);let V=e=>{let[o,a]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let o=async()=>{await g.h.post("relatorio/fornecedor/dadosFornecedor",{data:e}).then(e=>a(e.data))};o()},[e]),o},O=e=>{var o,a,n,i,s,r,d,c,u;let{params:x}=e,m=V(x);return(0,t.jsx)(t.Fragment,{children:m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.G7,{style:N.W.containerFields,children:null===(o=m.fields)||void 0===o?void 0:o.map((e,o)=>(0,t.jsxs)(l.Fragment,{children:[(0,t.jsxs)(P.G7,{style:[N.W.fields,{width:"33%"}],children:[(0,t.jsx)(P.xv,{style:N.W.fieldTitle,children:null!==(n=e.title)&&void 0!==n?n:"NI"}),(0,t.jsx)(P.xv,{style:N.W.fieldValue,children:null!==(i=e.value)&&void 0!==i?i:"NI"})]}),(o+1)%3==0&&(0,t.jsx)(P.G7,{style:N.W.separator})]},o))}),(0,t.jsx)(P.G7,{style:N.W.separator}),(0,t.jsxs)(P.G7,{style:{display:"flex",flexDirection:"column",gap:7,paddingVertical:10,paddingBottom:10},children:[(0,t.jsxs)(P.xv,{style:N.W.fieldTitle,children:["Atividades: ",(0,t.jsx)(P.xv,{style:N.W.fieldValue,children:null!==(s=m.atividades)&&void 0!==s?s:"NI"})]}),(0,t.jsxs)(P.xv,{style:N.W.fieldTitle,children:["Sistema de qualidade:"," ",(0,t.jsx)(P.xv,{style:N.W.fieldValue,children:null!==(r=m.sistemaQualidade)&&void 0!==r?r:"NI"})]}),(0,t.jsxs)(P.xv,{style:N.W.fieldTitle,children:["Categoria: ",(0,t.jsx)(P.xv,{style:N.W.fieldValue,children:null!==(d=m.categoria)&&void 0!==d?d:"NI"})]})]}),(0,t.jsx)(P.G7,{style:N.W.separator}),null===(a=m.blocos)||void 0===a?void 0:a.map((e,o)=>(0,t.jsxs)(P.G7,{style:e,children:[(0,t.jsx)(P.xv,{style:[N.W.blockTitle,{paddingTop:20}],children:e.nome}),(0,t.jsxs)(P.G7,{style:N.W.table,children:[(0,t.jsxs)(P.G7,{style:N.W.tableTitle,children:[(0,t.jsx)(P.xv,{style:[N.W.tableTitlecolumn,{width:"60%"}],children:"Item"}),(0,t.jsx)(P.xv,{style:[N.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Resposta"}),(0,t.jsx)(P.xv,{style:[N.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Observa\xe7\xe3o"})]}),e.itens.map((e,o)=>(0,t.jsxs)(P.G7,{style:N.W.tableContainer,children:[(0,t.jsx)(P.G7,{style:[N.W.tableContent,{width:"60%"}],children:(0,t.jsx)(P.xv,{style:N.W.tableContentcolumn,children:e.nome})}),(0,t.jsx)(P.G7,{style:[N.W.tableContent,{width:"20%"}],children:(0,t.jsx)(P.xv,{style:N.W.tableContentcolumn,children:null!==(c=e.resposta)&&void 0!==c?c:"--"})}),(0,t.jsx)(P.G7,{style:[N.W.tableContent,{width:"20%"}],children:(0,t.jsx)(P.xv,{style:N.W.tableContentcolumn,children:null!==(u=e.obsResposta)&&void 0!==u?u:"--"})})]}))]})]},o))]})})};var k=a(69418);let R=e=>{var o,a;let{id:v,makeFornecedor:S}=e,{user:A,loggedUnity:F}=(0,l.useContext)(D.V),[G,E]=(0,l.useState)(!1),[P,N]=(0,l.useState)(!1),[V,R]=(0,l.useState)(!1),[z,L]=(0,l.useState)(!0),[M,q]=(0,l.useState)(null),[_,U]=(0,l.useState)(null),{createNewNotification:B}=(0,l.useContext)(I.u),[J,K]=(0,l.useState)(!1),[H,Q]=(0,l.useState)([]),[X,Y]=(0,l.useState)(null),[$,ee]=(0,l.useState)([]),[eo,ea]=(0,l.useState)(""),[et,el]=(0,l.useState)(!1),[en,ei]=(0,l.useState)(!1),[es,er]=(0,l.useState)({status:!1,errors:[]}),{settings:ed}=(0,l.useContext)(W.J6),{setId:ec}=(0,l.useContext)(y.X),[eu,ex]=(0,l.useState)({status:!1,message:"Voc\xea n\xe3o tem permiss\xf5es",messageType:"info"}),em=f(),ep=v&&v>0?"edit":"new",eh=em.pathname,{reset:ev,register:ef,getValues:ej,setValue:eg,control:eb,watch:ey,handleSubmit:eD,clearErrors:eI,setError:eC,formState:{errors:eZ}}=(0,n.cI)(),eW=async(e,o)=>{let a={status:e,observacao:o,auth:{usuarioID:A.usuarioID,papelID:A.papelID,unidadeID:F.unidadeID}};try{N(!0),await g.h.post("".concat(eh,"/changeFormStatus/").concat(v),a).then(o=>{Z.ZP.success(j.OD.successUpdate),N(!1),eO(e,null,null)})}catch(t){console.log(t)}},ew=async e=>{try{if(!e.email&&!e.alerta)return Z.ZP.error("Selecione ao menos um tipo de notifica\xe7\xe3o!");let o={titulo:e.assunto,descricao:e.descricao,url:"/formularios/fornecedor/",urlID:v,tipoNotificacaoID:3,usuarioGeradorID:A.usuarioID,usuarioID:0,unidadeID:M.fornecedor.unidadeID,papelID:2,email:e.email,alerta:e.alerta};if(console.log("\uD83D\uDE80 ~ data dat notifica\xe7\xe3o:",o),B(o),e.email){let a={values:e,auth:{id:v,usuarioID:A.usuarioID,papelID:A.papelID,unidadeID:F.unidadeID}};await g.h.post("".concat(eh,"/sendNotification"),a)}let t=e.alerta&&e.email?"E-mail e alerta enviados com sucesso!":e.alerta&&!e.email?"Alerta criado com sucesso!":!e.alerta&&e.email?"E-mail enviado com sucesso!":null;Z.ZP.success(t)}catch(l){console.log(l)}},eS=()=>{navigator.clipboard.writeText(X),Z.ZP.success("Link copiado com sucesso!")},eA=[{id:1,name:"Gerar novo formul\xe1rio",description:"Gerar um novo formul\xe1rio de preenchimento para este fornecedor.",component:(0,t.jsx)(k.Z,{cnpj:null==M?void 0:null===(o=M.fornecedor)||void 0===o?void 0:o.cnpj}),route:null,type:null,modal:!0,action:S,size:"lg",icon:"fluent:form-new-20-regular",identification:null},{id:2,name:"Gerar notifica\xe7\xe3o",description:"Gerar uma nova notifica\xe7\xe3o para o fornecedor, podendo ser um e-mail e/ou alerta do sistema.",component:(0,t.jsx)(T,{data:{email:null===(a=H.find(e=>"email"==e.nomeColuna))||void 0===a?void 0:a.email}}),route:null,type:null,modal:!0,action:ew,icon:"cil:bell",identification:null},{id:3,name:"Copiar link do formul\xe1rio",description:"Copiar o link deste formul\xe1rio.",component:(0,t.jsx)(k.Z,{}),route:null,type:null,action:eS,modal:!1,icon:"solar:copy-outline",identification:null},{id:4,name:"Formul\xe1rio do fornecedor",component:(0,t.jsx)(O,{params:{id:v}}),route:"/relatorio/fornecedor/dadosFornecedor",papelID:A.papelID,modal:!1,type:"report",icon:"fluent:print-24-regular",identification:null,params:{fornecedorID:v}}],eF=async()=>{try{await g.h.post("".concat(eh,"/verifyFormPending/").concat(v),{parFormularioID:1}).then(e=>{L(e.data) //! true/false
})}catch(e){console.log(e)}},eG=()=>{try{E(!0),g.h.post("".concat((0,j.g_)(eh),"/new/getData"),{unidadeID:F.unidadeID}).then(e=>{console.log("getNewData: ",e.data),Q(e.data.fields),ee(e.data.blocos),ea(e.data.info),ev(e.data),ex({status:!0,message:'Esse formul\xe1rio j\xe1 foi conclu\xeddo! Para alter\xe1-lo \xe9 necess\xe1rio atualizar seu Status para "Em preenchimento" atrav\xe9s do bot\xe3o "Status"!',messageType:"info"}),E(!1)})}catch(e){console.log("\uD83D\uDE80 ~ error:",e)}},eE=()=>{E(!0),v&&g.h.post("".concat(eh,"/getData/").concat(v),{type:ep,unidadeID:F.unidadeID}).then(e=>{var o,a;console.log("getData: ",e.data),Q(e.data.fields),ee(e.data.blocos),ea(e.data.info),q(e.data.unidade),Y(e.data.link),ev(e.data),U(j.WR[null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(a=o.info)||void 0===a?void 0:a.status]),ex({status:2==A.papelID&&e.data.info.status<40,message:2==A.papelID?"Esse formul\xe1rio j\xe1 foi conclu\xeddo e enviado pra f\xe1brica, n\xe3o \xe9 mais poss\xedvel alterar as informa\xe7\xf5es!":"Somente o fornecedor pode alterar as informa\xe7\xf5es deste formul\xe1rio!",messageType:2==A.papelID?"warning":"info"}),eF(),E(!1)})},eT=()=>{eI();let e=!1,o=[];null==H||H.forEach((a,t)=>{let l=a.tabela?"fields[".concat(t,"].").concat(a.tabela):"fields[".concat(t,"].").concat(a.nomeColuna),n=ej(l);1!==a.obrigatorio||n||(eC(l,{type:"manual",message:"Campo obrigat\xf3rio"}),o.push(null==a?void 0:a.nomeCampo),e=!0)}),$.forEach((a,t)=>{a.itens.forEach((a,l)=>{let n=ej("blocos[".concat(t,"].itens[").concat(l,"].resposta"));(null==a?void 0:a.obrigatorio)!==1||n||(eC("blocos[".concat(t,"].itens[").concat(l,"].resposta"),{type:"manual",message:"Campo obrigat\xe1rio"}),o.push(null==a?void 0:a.nome),e=!0)})}),er({status:e,errors:o})},eP=async e=>{if(9===e.length){let o=e.replace(/[^0-9]/g,"");try{let a=await g.h.get("https://viacep.com.br/ws/".concat(o,"/json/"));a.data.localidade?(H.forEach(async(e,o)=>{("logradouro"===e.nomeColuna||"bairro"===e.nomeColuna||"cidade"===e.nomeColuna||"estado"===e.nomeColuna)&&(await eg("fields[".concat(o,"].logradouro"),a.data.logradouro),await eg("fields[".concat(o,"].bairro"),a.data.bairro),await eg("fields[".concat(o,"].cidade"),a.data.localidade),await eg("fields[".concat(o,"].estado"),a.data.uf))}),Z.ZP.success("Endere\xe7o encontrado!")):Z.ZP.error("Endere\xe7o n\xe3o encontrado!")}catch(t){console.error(t)}}},eN=()=>{eT(),el(!0),R(!0)},eV=async e=>{e.conclusion=!0,await eD(ek)(e)},eO=(e,o,a)=>{let t=30==e?"Em preenchimento":40==e?"Conclu\xeddo":50==e?"Reprovado":60==e?"Aprovado parcialmente":70==e?"Aprovado":"Pendente",l={titulo:"Formul\xe1rio de Fornecedor ".concat(t),descricao:"O formul\xe1rio de Fornecedor #".concat(v," est\xe1 ").concat(t,"."),url:"/formularios/fornecedor/",urlID:v,tipoNotificacaoID:6,usuarioGeradorID:A.usuarioID,usuarioID:0,unidadeID:F.unidadeID,papelID:1};if(l&&(B(l),o)){let n={titulo:"Fornecedor gerado",descricao:"O formul\xe1rio de Fornecedor #".concat(v," est\xe1 ").concat(t," e gerou uma n\xe3o conformidade."),url:"/formularios/fornecedor/nao-conformidade/",urlID:a,tipoNotificacaoID:5,usuarioGeradorID:A.usuarioID,usuarioID:0,unidadeID:F.unidadeID,papelID:1};B(n)}},ek=async function(e){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!0===o.conclusion&&(e.status=A&&1==A.papelID?o.status:40,e.obsConclusao=o.obsConclusao);let a={form:e,auth:{usuarioID:A.usuarioID,papelID:A.papelID,unidadeID:F.unidadeID}};console.log("\uD83D\uDE80 ~ onSubmit: ",a);try{"edit"==ep?(N(!0),await g.h.post("".concat(eh,"/updateData/").concat(v),a).then(o=>{Z.ZP.success(j.OD.successUpdate),N(!1);let a=null;o.data&&o.data.naoConformidade&&o.data.id>0&&(em.push("/formularios/fornecedor/nao-conformidade/"),ec(o.data.id),a=o.data.id),eO(e.status,e.naoConformidade,a)})):"new"==ep?await g.h.post("".concat((0,j.g_)(eh),"/insertData"),a).then(e=>{em.push("".concat((0,j.g_)(eh))),ec(e.data),Z.ZP.success(j.OD.successNew)}):Z.ZP.error(j.OD.error)}catch(t){console.log(t)}};return(0,l.useEffect)(()=>{"new"==ep?eG():eE()},[v,P]),(0,l.useEffect)(()=>{eT()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.Z,{show:G}),(0,t.jsxs)("form",{onSubmit:eD(ek),children:[!eu.status&&(0,t.jsx)(c.Z,{severity:eu.messageType,sx:{mb:2},children:eu.message}),(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(b.Z,{btnCancel:!0,btnSave:(null==eo?void 0:eo.status)<40||"new"==ep,btnSend:"edit"==ep&&(null==eo?void 0:eo.status)<50,btnPrint:"edit"==ep,generateReport:j.OE,actionsData:eA,actions:!0,handleSubmit:()=>eD(ek),handleSend:eN,iconConclusion:"mdi:check-bold",titleConclusion:"Concluir Fornecedor",title:"Fornecedor",btnStatus:"edit"==ep,handleBtnStatus:()=>K(!0),type:ep,status:_}),(0,t.jsx)(x.Z,{children:(0,t.jsx)(i.Z,{register:ef,errors:eZ,setValue:eg,control:eb,fields:H,values:H,getAddressByCep:eP,disabled:!eu.status})})]}),$&&$.map((e,o)=>(0,t.jsx)(s.Z,{index:o,blockKey:"parFornecedorModeloBlocoID",values:e,control:eb,register:ef,setValue:eg,errors:eZ,disabled:!eu.status},o)),eo&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(u.Z,{sx:{mt:4},children:(0,t.jsx)(x.Z,{children:(0,t.jsx)(m.ZP,{container:!0,spacing:4,children:(0,t.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,t.jsxs)(p.Z,{fullWidth:!0,children:[(0,t.jsx)(h.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Observa\xe7\xf5es (campo de uso exclusivo da validadora)"}),(0,t.jsx)(d.Z,{title:"Observa\xe7\xe3o (opcional)",name:"info.obs",multiline:!0,rows:4,value:eo.obs,disabled:!eu.status,control:eb})]})})})})})}),J&&(0,t.jsx)(r.Z,{title:"Hist\xf3rico do Formul\xe1rio",text:"Listagem do hist\xf3rico das movimenta\xe7\xf5es do formul\xe1rio ".concat(v," do Fornecedor."),id:v,parFormularioID:1,formStatus:eo.status,hasFormPending:z,canChangeStatus:1==A.papelID&&!z&&eo.status>30,openModal:J,handleClose:()=>K(!1),btnCancel:!0,btnConfirm:!0,handleSubmit:eW}),(0,t.jsx)(w.Z,{openModal:et,handleClose(){el(!1),R(!1)},title:"Concluir Formul\xe1rio",text:"Deseja realmente concluir este formul\xe1rio?",info:eo,canChange:!z,register:ef,setValue:eg,getValues:ej,btnCancel:!0,btnConfirm:!0,btnConfirmColor:"primary",conclusionForm:eV,listErrors:es})]})]})};var z=R},96351:function(e,o,a){a.d(o,{Z:function(){return c}});var t=a(85893),l=a(67294),n=a(99070),i=a(40874),s=a(60664);let r=e=>{let[o,a]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let o=async()=>{await s.h.post("relatorio/recebimentoMp/dadosRecebimentoMp",{data:e}).then(e=>a(e.data))};o()},[e]),o},d=e=>{var o,a,s,d,c,u,x,m,p;let{params:h}=e,v=r(h);return console.log(" data recebimento",v),(0,t.jsx)(t.Fragment,{children:v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.G7,{style:i.W.containerFields,children:null===(o=v.fields)||void 0===o?void 0:o.map((e,o)=>(0,t.jsxs)(l.Fragment,{children:[(0,t.jsxs)(n.G7,{style:[i.W.fields,{width:"33%"}],children:[(0,t.jsx)(n.xv,{style:i.W.fieldTitle,children:null!==(d=e.title)&&void 0!==d?d:"NI"}),(0,t.jsx)(n.xv,{style:i.W.fieldValue,children:null!==(c=e.value)&&void 0!==c?c:"NI"})]}),(o+1)%3==0&&(0,t.jsx)(n.G7,{style:i.W.separator})]},o))}),(0,t.jsx)(n.G7,{style:i.W.separator}),(0,t.jsx)(n.xv,{style:[i.W.blockTitle,{paddingTop:20}],children:"Produtos"}),(0,t.jsxs)(n.G7,{style:i.W.table,children:[(0,t.jsxs)(n.G7,{style:i.W.tableTitle,children:[(0,t.jsx)(n.xv,{style:[i.W.tableTitlecolumn,{width:"60%"}],children:"Produto"}),(0,t.jsx)(n.xv,{style:[i.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Apresenta\xe7\xe3o"}),(0,t.jsx)(n.xv,{style:[i.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Atividade"})]}),null===(a=v.produtos)||void 0===a?void 0:a.map((e,o)=>(0,t.jsx)(n.G7,{children:(0,t.jsxs)(n.G7,{style:i.W.tableContainer,children:[(0,t.jsx)(n.G7,{style:[i.W.tableContent,{width:"60%"}],children:(0,t.jsx)(n.xv,{style:i.W.tableContentcolumn,children:e.produto})}),(0,t.jsx)(n.G7,{style:[i.W.tableContent,{width:"20%"}],children:(0,t.jsx)(n.xv,{style:i.W.tableContentcolumn,children:null!==(u=e.apresentacao)&&void 0!==u?u:"--"})}),(0,t.jsx)(n.G7,{style:[i.W.tableContent,{width:"20%"}],children:(0,t.jsx)(n.xv,{style:i.W.tableContentcolumn,children:null!==(x=e.atividade)&&void 0!==x?x:"--"})})]})},o))]}),(0,t.jsx)(n.G7,{style:i.W.separator}),null===(s=v.blocos)||void 0===s?void 0:s.map((e,o)=>(0,t.jsxs)(n.G7,{style:e,children:[(0,t.jsx)(n.xv,{style:[i.W.blockTitle,{paddingTop:20}],children:e.nome}),(0,t.jsxs)(n.G7,{style:i.W.table,children:[(0,t.jsxs)(n.G7,{style:i.W.tableTitle,children:[(0,t.jsx)(n.xv,{style:[i.W.tableTitlecolumn,{width:"60%"}],children:"Item"}),(0,t.jsx)(n.xv,{style:[i.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Resposta"}),(0,t.jsx)(n.xv,{style:[i.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Observa\xe7\xe3o"})]}),e.itens.map((e,o)=>(0,t.jsxs)(n.G7,{style:i.W.tableContainer,children:[(0,t.jsx)(n.G7,{style:[i.W.tableContent,{width:"60%"}],children:(0,t.jsx)(n.xv,{style:i.W.tableContentcolumn,children:e.nome})}),(0,t.jsx)(n.G7,{style:[i.W.tableContent,{width:"20%"}],children:(0,t.jsx)(n.xv,{style:i.W.tableContentcolumn,children:null!==(m=e.resposta)&&void 0!==m?m:"--"})}),(0,t.jsx)(n.G7,{style:[i.W.tableContent,{width:"20%"}],children:(0,t.jsx)(n.xv,{style:i.W.tableContentcolumn,children:null!==(p=e.obsResposta)&&void 0!==p?p:"--"})})]}))]})]},o))]})})};var c=d}}]);