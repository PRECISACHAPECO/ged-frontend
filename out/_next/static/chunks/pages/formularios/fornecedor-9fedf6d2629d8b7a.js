(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7463],{85390:function(e,a,t){"use strict";t.d(a,{Z:function(){return Z}});var o=t(63366),r=t(87462),i=t(67294);t(59864);var n=t(86010),l=t(94780),s=t(67074),d=t(78884),c=t(36622),u=t(1588),p=t(34867);function m(e){return(0,p.Z)("MuiToggleButtonGroup",e)}let h=(0,u.Z)("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]);var f=t(85893);let x=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],v=e=>{let{classes:a,orientation:t,fullWidth:o,disabled:r}=e,i={root:["root","vertical"===t&&"vertical",o&&"fullWidth"],grouped:["grouped",`grouped${(0,c.Z)(t)}`,r&&"disabled"]};return(0,l.Z)(i,m,a)},g=(0,s.ZP)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver(e,a){let{ownerState:t}=e;return[{[`& .${h.grouped}`]:a.grouped},{[`& .${h.grouped}`]:a[`grouped${(0,c.Z)(t.orientation)}`]},a.root,"vertical"===t.orientation&&a.vertical,t.fullWidth&&a.fullWidth]}})(({ownerState:e,theme:a})=>(0,r.Z)({display:"inline-flex",borderRadius:(a.vars||a).shape.borderRadius},"vertical"===e.orientation&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${h.grouped}`]:(0,r.Z)({},"horizontal"===e.orientation?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${h.selected} + .${h.grouped}.${h.selected}`]:{borderTop:0,marginTop:0}})})),b=i.forwardRef(function(e,a){let t=(0,d.Z)({props:e,name:"MuiToggleButtonGroup"}),{children:l,className:s,color:c="standard",disabled:u=!1,exclusive:p=!1,fullWidth:m=!1,onChange:h,orientation:b="horizontal",size:Z="medium",value:j}=t,y=(0,o.Z)(t,x),C=(0,r.Z)({},t,{disabled:u,fullWidth:m,orientation:b,size:Z}),z=v(C),N=(e,a)=>{let t;if(!h)return;let o=j&&j.indexOf(a);j&&o>=0?(t=j.slice()).splice(o,1):t=j?j.concat(a):[a],h(e,t)},k=(e,a)=>{h&&h(e,j===a?null:a)};return(0,f.jsx)(g,(0,r.Z)({role:"group",className:(0,n.Z)(z.root,s),ref:a,ownerState:C},y,{children:i.Children.map(l,e=>{var a;return i.isValidElement(e)?i.cloneElement(e,{className:(0,n.Z)(z.grouped,e.props.className),onChange:p?k:N,selected:void 0===e.props.selected?(a=e.props.value,void 0!==j&&void 0!==a&&(Array.isArray(j)?j.indexOf(a)>=0:a===j)):e.props.selected,size:e.props.size||Z,fullWidth:m,color:e.props.color||c,disabled:e.props.disabled||u}):null})}))});var Z=b},87054:function(e,a,t){"use strict";t.d(a,{Z:function(){return y}});var o=t(63366),r=t(87462),i=t(67294),n=t(86010),l=t(94780),s=t(41796),d=t(50522),c=t(36622),u=t(78884),p=t(67074),m=t(1588),h=t(34867);function f(e){return(0,h.Z)("MuiToggleButton",e)}let x=(0,m.Z)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]);var v=t(85893);let g=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],b=e=>{let{classes:a,fullWidth:t,selected:o,disabled:r,size:i,color:n}=e,s={root:["root",o&&"selected",r&&"disabled",t&&"fullWidth",`size${(0,c.Z)(i)}`,n]};return(0,l.Z)(s,f,a)},Z=(0,p.ZP)(d.Z,{name:"MuiToggleButton",slot:"Root",overridesResolver(e,a){let{ownerState:t}=e;return[a.root,a[`size${(0,c.Z)(t.size)}`]]}})(({theme:e,ownerState:a})=>{let t,o="standard"===a.color?e.palette.text.primary:e.palette[a.color].main;return e.vars&&(o="standard"===a.color?e.vars.palette.text.primary:e.vars.palette[a.color].main,t="standard"===a.color?e.vars.palette.text.primaryChannel:e.vars.palette[a.color].mainChannel),(0,r.Z)({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},a.fullWidth&&{width:"100%"},{[`&.${x.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x.selected}`]:{color:o,backgroundColor:e.vars?`rgba(${t} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(o,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${t} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,s.Fq)(o,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${t} / ${e.vars.palette.action.selectedOpacity})`:(0,s.Fq)(o,e.palette.action.selectedOpacity)}}}},"small"===a.size&&{padding:7,fontSize:e.typography.pxToRem(13)},"large"===a.size&&{padding:15,fontSize:e.typography.pxToRem(15)})}),j=i.forwardRef(function(e,a){let t=(0,u.Z)({props:e,name:"MuiToggleButton"}),{children:i,className:l,color:s="standard",disabled:d=!1,disableFocusRipple:c=!1,fullWidth:p=!1,onChange:m,onClick:h,selected:f,size:x="medium",value:j}=t,y=(0,o.Z)(t,g),C=(0,r.Z)({},t,{color:s,disabled:d,disableFocusRipple:c,fullWidth:p,size:x}),z=b(C),N=e=>{h&&(h(e,j),e.defaultPrevented)||!m||m(e,j)};return(0,v.jsx)(Z,(0,r.Z)({className:(0,n.Z)(z.root,l),disabled:d,focusRipple:!c,ref:a,onClick:N,onChange:m,value:j,ownerState:C,"aria-pressed":f},y,{children:i}))});var y=j},59424:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/formularios/fornecedor",function(){return t(11645)}])},93250:function(e,a,t){"use strict";var o=t(85893),r=t(49837),i=t(91359),n=t(95722);let l=e=>{let{result:a,columns:t,btnNew:l=!0,btnPrint:s=!0,btnBack:d,openModal:c}=e;return(0,o.jsx)(r.Z,{children:(0,o.jsx)(i.Z,{sx:{pt:"0"},children:(0,o.jsx)(n.Z,{rows:a,columns:t,buttonsHeader:{btnNew:l,btnPrint:s,btnBack:d,openModal:c}})})})};a.Z=l},11645:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return y}});var o=t(85893),r=t(67294),i=t(60664),n=t(93250),l=t(47180),s=t(60565),d=t(83830),c=t(40039),u=t(72819),p=t(86501),m=t(47842),h=t(82747),f=t(11163),x=t(46749),v=t(69418),g=t(61953),b=t(29630);let Z=e=>{let{values:a}=e;return(0,o.jsxs)(g.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[(0,o.jsxs)(b.Z,{variant:"body2",children:[(0,o.jsx)("strong",{children:"E-mail enviado para: "})," ",null==a?void 0:a.email]}),(0,o.jsxs)(b.Z,{variant:"body2",children:[(0,o.jsx)("strong",{children:"Link do formul\xe1rio: "})," ",null==a?void 0:a.link]})]})},j=()=>{let{user:e,loggedUnity:a}=(0,r.useContext)(c.V),[t,g]=(0,r.useState)(null),b=(0,f.useRouter)(),j=b.pathname,{setTitle:y}=(0,r.useContext)(s.f),{id:C,setId:z}=(0,r.useContext)(d.X),[N,k]=(0,r.useState)(!1),[w,D]=(0,r.useState)(!1),[R,$]=(0,r.useState)(null),I=()=>{k(!0)},T=async()=>{console.log("\uD83D\uDE80 ~ user.cnpj:",e.cnpj),await i.h.post("".concat(j,"/getList/"),{unidadeID:a.unidadeID,papelID:e.papelID,cnpj:e.cnpj?e.cnpj:null}).then(e=>{g(e.data),y({title:"Fornecedor",subtitle:{id:C,count:e.data.length,new:!1}})})},S=async t=>{console.log("\uD83D\uDE80 ~ makeFornecedor : ",t);try{let o=await i.h.post("/formularios/fornecedor/makeFornecedor",{usuarioID:e.usuarioID,papelID:e.papelID,unidadeID:a.unidadeID,values:t.fields});200==o.status&&(t.fields.email&&M(t.fields.email,t.fields.cnpj,t.fields.razaoSocial),$(o.data),z(o.data.fornecedorID),D(!0))}catch(r){console.error(r)}},M=(e,t,o)=>{if(e&&(0,h.dI)(e)){let r={unidadeID:a.unidadeID,cnpj:t,nomeFornecedor:o,destinatario:e};i.h.post("".concat(j,"/sendMail"),{data:r}).then(e=>{p.ZP.success("E-mail enviado com sucesso")}).catch(e=>{console.error("Erro ao enviar email",e)})}},B=()=>{let e=null==R?void 0:R.link;e&&(navigator.clipboard.writeText(e),p.ZP.success("Link copiado com sucesso!"))};(0,r.useEffect)(()=>{T()},[C]);let O=1==e.papelID?[{headerName:"ID",field:"id",size:1},{headerName:"Fornecedor",field:"fornecedor",size:1},{headerName:"CNPJ",field:"cnpj",size:1},{headerName:"Data da Avalia\xe7\xe3o",field:"data",size:1},{headerName:"Cidade",field:"cidade",size:1},{headerName:"Respons\xe1vel",field:"responsavel",size:1},{headerName:"Status",field:{name:"status",cor:"cor"},size:1}]:2==e.papelID?[{headerName:"ID",field:"id",size:1},{headerName:"F\xe1brica",field:"fabrica",size:1},{headerName:"CNPJ",field:"cnpj",size:1},{headerName:"Data da Avalia\xe7\xe3o",field:"data",size:1},{headerName:"Cidade",field:"cidade",size:1},{headerName:"Respons\xe1vel",field:"responsavel",size:1},{headerName:"Status",field:{name:"status",cor:"cor"},size:1}]:[],P=(0,x.OL)(j,O);return(0,o.jsxs)(o.Fragment,{children:[t?C&&C>0?(0,o.jsx)(l.Z,{id:C,makeFornecedor:S}):(0,o.jsx)(n.Z,{result:t,columns:P,openModal:1==e.papelID?I:null,btnNew:1==e.papelID}):(0,o.jsx)(m.Z,{show:!0}),(0,o.jsx)(u.Z,{title:"Habilitar Fornecedor",description:"Habilitar novo preenchimento de formul\xe1rio pro fornecedor",handleConclusion:S,setOpenModal:k,openModal:N,size:"lg",children:(0,o.jsx)(v.Z,{})}),(0,o.jsx)(u.Z,{title:"Formul\xe1rio enviado ao fornecedor",description:"Um novo formul\xe1rio de qualifica\xe7\xe3o de fornecedor foi enviado",handleCopyLink:B,setOpenModal:D,openModal:w,children:(0,o.jsx)(Z,{values:R})})]})};var y=j},84242:function(e,a,t){"use strict";t.d(a,{Z:function(){return j}});var o=t(85893),r=t(61953),i=t(67836),n=t(80562),l=t(50853),s=t(11163),d=t.n(s),c=t(75084),u=t(41664),p=t.n(u),m=t(40039),h=t(67294),f=t(83830),x=t(46749),v=t(21609);let g=e=>{let{btnNew:a,btnPrint:t,btnSave:r,btnBack:i,handleSave:n,hasListChange:l,openModal:s}=e,u=d(),{setId:g}=(0,h.useContext)(f.X),{routes:b}=(0,h.useContext)(m.V);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"flex items-center justify-between my-2 w-full",children:[(0,o.jsx)("div",{}),(0,o.jsxs)("div",{className:"flex items-center gap-4 ",children:[(0,o.jsx)("div",{children:i&&(0,o.jsx)(c.Z,{onClick(){u.push((0,x.g_)(u.pathname)),g(null)},type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,o.jsx)(v.Z,{icon:"material-symbols:arrow-back-rounded"})})}),(0,o.jsx)("div",{children:t&&(0,o.jsxs)(c.Z,{onClick:()=>window.print(),type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,o.jsx)(v.Z,{icon:"mdi:printer"}),(0,o.jsx)("span",{className:"hidden sm:block",children:"Imprimir"})]})}),(0,o.jsx)("div",{className:"",children:a&&b.find(e=>(e.rota===u.pathname||e.rota===(0,x.g_)(u.pathname))&&e.inserir)&&(0,o.jsx)(p(),{href:s?"":"".concat(u.pathname,"/novo"),children:(0,o.jsxs)(c.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",onClick:s||null,sx:{display:"flex",gap:2},children:[(0,o.jsx)(v.Z,{icon:"ic:outline-plus"}),(0,o.jsx)("span",{className:"hidden sm:block",children:"Novo"})]})})}),(0,o.jsx)("div",{children:r&&(0,o.jsxs)(c.Z,{onClick:n,disabled:!l,type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,o.jsx)(v.Z,{icon:"mdi:check-bold"}),(0,o.jsx)("span",{className:"hidden sm:block",children:"Salvar"})]})})]})]})})};var b=t(61225);let Z=e=>((0,b.Z)("(min-width:640px)"),(0,o.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"row",gap:2,alignItems:"baseline",justifyContent:"space-between",p:e=>e.spacing(8,0,0,0)},children:[(0,o.jsxs)(r.Z,{sx:{display:"flex",gap:"8px",textAlig:"end"},children:[(0,o.jsx)(i.Z,{size:"medium",value:e.value,onChange:e.onChange,placeholder:"Buscar…",variant:"standard",InputProps:{startAdornment:(0,o.jsx)(r.Z,{sx:{mr:2,display:"flex"},children:(0,o.jsx)(v.Z,{icon:"mdi:magnify",fontSize:20})}),endAdornment:(0,o.jsx)(n.Z,{size:"medium",title:"Clear","aria-label":"Clear",onClick:e.clearSearch,children:(0,o.jsx)(v.Z,{icon:"mdi:close",fontSize:20})})},sx:{width:{xs:1,sm:"auto"},"& .MuiInputBase-root > svg":{mr:2}}}),(0,o.jsx)("div",{className:"hidden sm:block",children:(0,o.jsx)(l.M,{})})]}),(0,o.jsx)(g,{btnNew:e.buttonsHeader.btnNew,btnPrint:e.buttonsHeader.btnPrint,btnBack:e.buttonsHeader.btnBack,btnSave:e.buttonsHeader.btnSave,handleSave:e.buttonsHeader.handleSave,hasListChange:e.hasChange,openModal:e.buttonsHeader.openModal})]}));var j=Z},95722:function(e,a,t){"use strict";var o=t(85893),r=t(67294),i=t(87630),n=t(75680),l=t(84242),s=t(60565),d=t(83830);let c=e=>{let{rows:a,columns:t,buttonsHeader:c}=e,{handleSearch:u,pageSize:p,setPageSize:m,searchText:h,filteredData:f,setData:x,data:v}=(0,r.useContext)(s.f),{setId:g}=(0,r.useContext)(d.X);return x(a),(0,o.jsx)(i._,{localeText:n.F.components.MuiDataGrid.defaultProps.localeText,autoHeight:!0,columns:t,pageSize:p,rowsPerPageOptions:[10,20,30,40,50,100],components:{Toolbar:l.Z},rows:h?f:v,onCellClick(e,a){g(e.row.id)},onPageSizeChange:e=>m(e),sx:{"& .MuiDataGrid-cell":{cursor:"pointer",overflow:"scroll"}},componentsProps:{toolbar:{value:h,clearSearch:()=>u(""),onChange:e=>u(e.target.value),buttonsHeader:c}}})};a.Z=c}},function(e){e.O(0,[4186,1445,1111,5999,7536,2389,2187,9349,1515,5876,7921,7180,9774,2888,179],function(){return e(e.s=59424)}),_N_E=e.O()}]);