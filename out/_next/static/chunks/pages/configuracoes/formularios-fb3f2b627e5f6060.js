(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6364],{92689:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes/formularios",function(){return o(55615)}])},93250:function(e,t,o){"use strict";var n=o(85893),i=o(49837),s=o(91359),a=o(40372);let l=e=>{let{result:t,columns:o,btnNew:l=!0,btnPrint:r=!0,openModal:d}=e;return(0,n.jsx)(i.Z,{children:(0,n.jsx)(s.Z,{sx:{pt:"0"},children:(0,n.jsx)(a.Z,{rows:t,columns:o,buttonsHeader:{btnNew:l,btnPrint:r,openModal:d}})})})};t.Z=l},47842:function(e,t,o){"use strict";var n=o(85893),i=o(70754),s=o(61953);let a=e=>{let{title:t}=e;return(0,n.jsxs)(s.Z,{sx:{position:"absolute",top:"50%",left:"50%",textAlign:"center"},children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)("p",{children:null!=t?t:"Carregando..."})]})};t.Z=a},55615:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return T}});var n=o(85893),i=o(67294),s=o(60664),a=o(93250),l=o(60565),r=o(83830),d=o(87536),c=o(49837),u=o(91359),m=o(85214),x=o(79072),v=o(29630),p=o(61953),h=o(75084),b=o(11163),j=o.n(b),Z=o(46749),g=o(14155),f=o(40039),I=o(86501),k=o(47842),D=o(21609),P=o(29620),C=o(77745),S=o(95398),y=o(76779),B=o(44642),F=o(22416),w=o(22841),R=o(16056),q=o(55343),E=o(67836);let O=e=>{let{openModal:t,setOpenModalConfirmScore:o,itemScore:i,setItemScore:a}=e,l=()=>{o(!1)},{handleSubmit:r,register:c}=(0,d.cI)({}),u=e=>{let t={alternativaID:null==i?void 0:i.alternativaID,pontuacao:(null==e?void 0:e.pontuacao)?1:0,parFornecedorBlocoItemID:null==i?void 0:i.parFornecedorBlocoItemID,alternatives:null==i?void 0:i.alternatives.map((t,o)=>({alternativaItemID:null==t?void 0:t.alternativaItemID,score:e[null==t?void 0:t.nome]}))};s.h.post("/formularios/fornecedor/saveItemScore",{data:t}).then(e=>{o(!1),I.Am.success("Pontua\xe7\xe3o salva com sucesso!")})};return(0,n.jsx)(n.Fragment,{children:(null==i?void 0:i.alternatives)&&(0,n.jsx)(P.Z,{open:t,onClose:l,"aria-labelledby":"form-dialog-title",children:(0,n.jsxs)("form",{onSubmit:r(u),children:[(0,n.jsx)(C.Z,{id:"form-dialog-title",children:"Pontua\xe7\xe3o das respostas"}),(0,n.jsxs)(S.Z,{children:[(0,n.jsx)(B.Z,{sx:{mb:3},children:"Defina a pontua\xe7\xe3o para cada alternativa"}),(0,n.jsx)(p.Z,{sx:{mb:4},children:(0,n.jsx)(F.Z,{row:!0,children:(0,n.jsx)(w.Z,{label:"Habilitar pontua\xe7\xe3o",control:(0,n.jsx)(R.Z,{name:"pontuacao",...c("pontuacao"),checked:(null==i?void 0:i.pontuacao)==1,onChange(e){a({...i,pontuacao:e.target.checked?1:0})}})})})}),i&&(null==i?void 0:i.alternatives.map((e,t)=>(0,n.jsx)(x.ZP,{md:12,sx:{mb:4},children:(0,n.jsx)("grid",{item:!0,md:12,children:(0,n.jsx)(q.Z,{fullWidth:!0,children:(0,n.jsx)(E.Z,{disabled:1!=i.pontuacao,id:"outlined-basic",label:null==e?void 0:e.nome,...c("".concat(null==e?void 0:e.nome)),name:"".concat(null==e?void 0:e.nome),defaultValue:null==e?void 0:e.score,variant:"outlined",size:"small",type:"number",title:0!=i.pontuacao||"Habilite a pontua\xe7\xe3o para preencher"})})})},t)))]}),(0,n.jsxs)(y.Z,{className:"dialog-actions-dense",children:[(0,n.jsx)(h.Z,{variant:"outlined",color:"primary",onClick:l,children:"Cancelar"}),(0,n.jsx)(h.Z,{variant:"contained",color:"primary",onClick:r(u),children:"Confirmar"})]})]})})})};var M=o(84220),V=o(29308),N=o(67569),W=o(3893),_=o(88475);let A=e=>{var t,o;let{id:a}=e,{user:l,loggedUnity:r}=(0,i.useContext)(f.V),[b,P]=(0,i.useState)(),[C,S]=(0,i.useState)(null),[y,B]=(0,i.useState)(),[F,w]=(0,i.useState)(),[R,q]=(0,i.useState)(!1),[E,A]=(0,i.useState)(),[z,H]=(0,i.useState)(!1),[T,X]=(0,i.useState)([]),[G,U]=(0,i.useState)([]),L=j(),J=L.pathname,{setValue:K,register:Q,handleSubmit:Y,reset:$,control:ee,formState:{errors:et}}=(0,d.cI)(),eo=async e=>{let t={unidadeID:r.unidadeID,header:e.header,blocks:e.blocks,arrRemovedBlocks:G,arrRemovedItems:T,orientacoes:e.orientations};P(null),console.log("\uD83D\uDE80 ~ onSubmit:",t);try{await s.h.put("".concat(J,"/fornecedor/updateData"),t).then(e=>{I.ZP.success(Z.OD.successUpdate),H(!z)})}catch(o){console.log(o)}},en=(e,t,o,n)=>{let i=n.itens;i=i.filter(t=>{let o=e.itens.some(e=>e.item&&t.id===e.item.id);return!o});let s=[...o];s[t].optionsBlock.itens=i,B(s)},ei=e=>{var t;let o=[...y];o[e].itens.push({ordem:(null===(t=o[e].itens)||void 0===t?void 0:t.length)+1,obs:1,status:1,obrigatorio:1}),B(o),K("blocks.[".concat(e,"].itens.[").concat(o[e].itens.length-1,"].new"),!0),en(o[e],e,y,C)},es=(e,t,o)=>{if(console.log("\uD83D\uDE80 ~ length:",y[t].itens.length),1===y[t].itens.length){I.ZP.error("Voc\xea deve ter ao menos um item!");return}let n=[...T];n.push(e),X(n);let i=[...y],s=[...y[t].itens];s.splice(o,1),i[t].itens=s,B(i),K("blocks.[".concat(t,"].itens"),s),en(y[t],t,y,C)},ea=(e,t)=>{let o=!0;if(e&&e.itens.map(e=>{1==e.hasPending&&(o=!1)}),!o){I.ZP.error("Este bloco n\xe3o pode ser removido pois possui itens respondidos em um formul\xe1rio");return}let n=[...G];n.push(e.dados.parFornecedorBlocoID),U(n);let i=[...y];i.splice(t,1),B(i),K("blocks",i),I.ZP.success("Bloco pr\xe9-removido. Salve para concluir!")},el=e=>{A(null),s.h.post("/formularios/fornecedor/getItemScore",{data:e}).then(e=>{A(e.data)}),A&&q(!0)},er=()=>{let e=[...y];e.push({dados:{ordem:e.length+1,nome:"",status:1},categorias:[],atividades:[],optionsBlock:{itens:[...C.itens],alternativas:[...C.alternativas]},itens:[{parFormularioID:1,new:!0,ordem:"1",nome:"",status:1,item:null,alternativa:null}]}),B(e)},ed=()=>{try{s.h.post("".concat(J,"/fornecedor/getData"),{unidadeID:r.unidadeID}).then(e=>{console.log("getdata",e.data),P(e.data.header),B(e.data.blocks),S({categorias:e.data.options.categorias,atividades:e.data.options.atividades,itens:e.data.options.itens,alternativas:e.data.options.alternativas}),w(e.data.orientations),$(e.data),setTimeout(()=>{e.data.blocks.map((t,o)=>{en(t,o,e.data.blocks,e.data.options)})},3e3)})}catch(e){console.log(e)}};return(0,i.useEffect)(()=>{ed()},[a,z]),(0,n.jsx)(n.Fragment,{children:b?(0,n.jsxs)("form",{onSubmit:Y(eo),children:[b&&(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(g.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>Y(eo),type:"edit"}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(m.Z,{component:"nav","aria-label":"main mailbox",children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,md:4,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,n.jsx)(x.ZP,{item:!0,md:3,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,n.jsx)(x.ZP,{item:!0,md:3,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})}),b.map((e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"hidden",name:"header.[".concat(t,"].parFornecedorID"),defaultValue:e.parFornecedorID,...Q("header.[".concat(t,"].parFornecedorID"))}),(0,n.jsx)(x.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,n.jsx)(W.Z,{xs:12,md:3,title:"",name:"header.[".concat(t,"].mostra"),value:e.mostra,register:Q,disabled:"cnpj"==e.nomeColuna}),(0,n.jsx)(W.Z,{xs:12,md:3,title:"",name:"header.[".concat(t,"].obrigatorio"),value:e.obrigatorio,register:Q,disabled:"cnpj"==e.nomeColuna})]}))]})})})]}),!y&&(0,n.jsx)(k.Z,{}),y&&y.map((e,i)=>{var s,a,l,r,d,m,b,j,Z,g;return(0,n.jsx)(c.Z,{md:12,sx:{mt:4},children:(0,n.jsxs)(u.Z,{children:[(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(i,"].dados.parFornecedorBlocoID"),value:e.dados.parFornecedorBlocoID,...Q("blocks.[".concat(i,"].dados.parFornecedorBlocoID"))}),(0,n.jsxs)(x.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(V.Z,{xs:12,md:1,title:"Sequ\xeancia",name:"blocks.[".concat(i,"].dados.ordem"),value:e.dados.ordem,required:!0,control:ee,errors:null==et?void 0:null===(s=et.blocks)||void 0===s?void 0:null===(a=s[i])||void 0===a?void 0:null===(l=a.dados)||void 0===l?void 0:l.ordem}),(0,n.jsx)(V.Z,{xs:12,md:9,title:"Nome do Bloco",name:"blocks.[".concat(i,"].dados.nome"),value:e.dados.nome,required:!0,control:ee,errors:null==et?void 0:null===(r=et.blocks)||void 0===r?void 0:null===(d=r[i])||void 0===d?void 0:null===(m=d.dados)||void 0===m?void 0:m.nome}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Ativo",name:"blocks.[".concat(i,"].dados.status"),value:y[i].dados.status,register:Q}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Observa\xe7\xe3o",name:"blocks.[".concat(i,"].dados.obs"),value:y[i].dados.obs,register:Q}),(0,n.jsx)(M.Z,{xs:12,md:5,multiple:!0,title:"Mostrar esse bloco quando \xe9",name:"blocks.[".concat(i,"].categorias"),value:e.categorias,required:!0,options:C.categorias,register:Q,setValue:K,errors:null==et?void 0:null===(b=et.blocks)||void 0===b?void 0:null===(j=b[i])||void 0===j?void 0:j.categorias}),(0,n.jsx)(M.Z,{xs:12,md:7,multiple:!0,title:"Atividade(s)",name:"blocks.[".concat(i,"].atividades"),value:e.atividades,required:!1,options:C.atividades,register:Q,setValue:K,errors:null==et?void 0:null===(Z=et.blocks)||void 0===Z?void 0:null===(g=Z[i])||void 0===g?void 0:g.atividades})]}),(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600,mt:4},children:"Itens"}),e.itens&&e.itens.map((e,s)=>{var a,l,r,d,c,u,m,b,j,Z,g,f,I;return(0,n.jsxs)(x.ZP,{id:"item-".concat(i,"-").concat(s),container:!0,spacing:2,sx:{my:1},children:[(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(i,"].itens.[").concat(s,"].parFornecedorBlocoItemID"),value:e.parFornecedorBlocoItemID,...Q("blocks.[".concat(i,"].itens.[").concat(s,"].parFornecedorBlocoItemID"))}),(0,n.jsx)(V.Z,{xs:12,md:1,title:"Sequ\xeancia",name:"blocks.[".concat(i,"].itens.[").concat(s,"].ordem"),value:e.ordem,required:!0,control:ee,errors:null==et?void 0:null===(a=et.blocks)||void 0===a?void 0:null===(l=a[i])||void 0===l?void 0:null===(r=l.itens)||void 0===r?void 0:null===(d=r[s])||void 0===d?void 0:d.ordem}),(0,n.jsx)(M.Z,{xs:12,md:4,title:y[i].itens[s].itemID?"Item [".concat(y[i].itens[s].itemID,"]"):"Item",name:"blocks.[".concat(i,"].itens.[").concat(s,"].item"),value:null!==(t=y[i].itens[s].item)&&void 0!==t?t:null,required:!0,options:null===(c=y[i].optionsBlock)||void 0===c?void 0:c.itens,register:Q,setValue:K,errors:null==et?void 0:null===(u=et.blocks)||void 0===u?void 0:null===(m=u[i])||void 0===m?void 0:null===(b=m.itens)||void 0===b?void 0:null===(j=b[s])||void 0===j?void 0:j.item}),(0,n.jsx)(M.Z,{xs:12,md:2,title:"Alternativa",name:"blocks.[".concat(i,"].itens.[").concat(s,"].alternativa"),value:null!==(o=y[i].itens[s].alternativa)&&void 0!==o?o:null,required:!0,options:C.alternativas,register:Q,setValue:K,errors:null==et?void 0:null===(Z=et.blocks)||void 0===Z?void 0:null===(g=Z[i])||void 0===g?void 0:null===(f=g.itens)||void 0===f?void 0:null===(I=f[s])||void 0===I?void 0:I.alternativa}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Ativo",index:s,name:"blocks.[".concat(i,"].itens.[").concat(s,"].status"),value:y[i].itens[s].status,register:Q}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Obs",index:s,name:"blocks.[".concat(i,"].itens.[").concat(s,"].obs"),value:y[i].itens[s].obs,register:Q}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Obrigat\xf3rio",index:s,name:"blocks.[".concat(i,"].itens.[").concat(s,"].obrigatorio"),value:y[i].itens[s].obrigatorio,register:Q}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:1,children:(0,n.jsxs)(p.Z,{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,n.jsx)(v.Z,{variant:"caption",children:0==s?"Pontua\xe7\xe3o":""}),(0,n.jsx)(h.Z,{style:0===e.pontuacao?{opacity:.3}:{},title:e.parFornecedorBlocoID?"Definir pontua\xe7\xe3o para as respostas":"Salve o bloco para definir a pontua\xe7\xe3o",disabled:!e.parFornecedorBlocoID,onClick:()=>el(e),children:(0,n.jsx)(D.Z,{icon:"ic:baseline-assessment"})})]})}),(0,n.jsx)(_.Z,{xs:12,md:1,title:0==s?"Remover":"",index:i,removeItem:es,item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois j\xe1 foi respondido em um formul\xe1rio"})]},s)}),R&&E&&(0,n.jsx)(O,{openModal:R,setOpenModalConfirmScore:q,itemScore:E,setItemScore:A}),(0,n.jsx)(x.ZP,{container:!0,spacing:4,sx:{mt:4},children:(0,n.jsxs)(x.ZP,{item:!0,xs:12,md:12,children:[(0,n.jsx)(h.Z,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(D.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){ei(i)},children:"Inserir Item"}),(0,n.jsx)(h.Z,{variant:"outlined",color:"error",startIcon:(0,n.jsx)(D.Z,{icon:"tabler:trash-filled"}),onClick(){ea(e,i)},sx:{ml:2},children:"Remover Bloco"})]})})]})},i)}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:12,sx:{mt:4},children:(0,n.jsx)(h.Z,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(D.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){er()},children:"Inserir Bloco"})}),F&&(0,n.jsx)(c.Z,{md:12,sx:{mt:4},children:(0,n.jsx)(u.Z,{children:(0,n.jsx)(x.ZP,{container:!0,spacing:4,children:(0,n.jsx)(V.Z,{xs:12,md:12,title:"Orienta\xe7\xf5es",name:"orientations.obs",required:!1,value:null==F?void 0:F.obs,multiline:!0,rows:4,control:ee})})})})]}):(0,n.jsx)(k.Z,{})})},z=e=>{var t,o;let{id:a}=e,{user:l,loggedUnity:p}=(0,i.useContext)(f.V),[b,P]=(0,i.useState)(),[C,S]=(0,i.useState)(),[y,B]=(0,i.useState)(null),[F,w]=(0,i.useState)([]),[R,q]=(0,i.useState)(null),[E,O]=(0,i.useState)(!1),[A,z]=(0,i.useState)([]),H=j(),T=H.pathname,{setId:X}=(0,i.useContext)(r.X),{setValue:G,register:U,reset:L,control:J,handleSubmit:K,formState:{errors:Q}}=(0,d.cI)(),Y=async e=>{let t={unidadeID:p.unidadeID,header:e.header,products:e.products,blocks:e.blocks,arrRemovedItems:A,orientacoes:e.orientacoes};P(null),console.log("onSubmit: ",t);try{await s.h.put("".concat(T,"/recebimentoMp/updateData"),t).then(e=>{I.ZP.success(Z.OD.successUpdate),O(!E)})}catch(o){console.log(o)}},$=e=>{let t=[...F];t[e].itens.push({ordem:t[e].itens.length+1,obs:1,status:1,obrigatorio:1}),w(t),en(t[e],e,F,y)},ee=()=>{let e=[...F];e.push({dados:{ordem:e.length+1,nome:"",status:1},itens:[{ordem:1,obs:1,status:1,obrigatorio:1}]}),w(e)},et=()=>{try{s.h.post("".concat(T,"/recebimentoMp/getData"),{unidadeID:p.unidadeID}).then(e=>{console.log("getData: ",e.data),P(e.data.header),S(e.data.products),w(e.data.blocks),q(e.data.orientacoes.obs),B(e.data.options),L(e.data),setTimeout(()=>{e.data.blocks.map((t,o)=>{en(t,o,e.data.blocks,e.data.options)})},3e3)})}catch(e){console.log(e)}},eo=(e,t,o)=>{if(console.log("\uD83D\uDE80 ~ length:",F[t].itens.length),1===F[t].itens.length){I.ZP.error("Voc\xea deve ter ao menos um item!");return}let n=[...A];n.push(e),z(n);let i=[...F],s=[...F[t].itens];s.splice(o,1),i[t].itens=s,w(i),console.log("\uD83D\uDE80 ~ newBlock:",s),G("blocks.[".concat(t,"].itens"),s),en(F[t],t,F,y)},en=(e,t,o,n)=>{let i=n.itens;i=i.filter(t=>{let o=e.itens.some(e=>e.item&&t.id===e.item.id);return!o});let s=[...o];s[t].optionsBlock.itens=i,w(s)};return(0,i.useEffect)(()=>{et()},[a,E]),console.log("errors: ",Q),(0,n.jsx)(n.Fragment,{children:b?(0,n.jsxs)("form",{onSubmit:K(Y),children:[b&&(0,n.jsxs)(c.Z,{children:[(0,n.jsx)(g.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>K(Y),type:"edit"}),(0,n.jsx)(u.Z,{children:(0,n.jsx)(m.Z,{component:"nav","aria-label":"main mailbox",children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,md:4,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,n.jsx)(x.ZP,{item:!0,md:3,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,n.jsx)(x.ZP,{item:!0,md:3,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})}),b.map((e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"hidden",name:"header.[".concat(t,"].parRecebimentompID"),defaultValue:e.parRecebimentompID,...U("headers.[".concat(t,"].parRecebimentompID"))}),(0,n.jsx)(x.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,n.jsx)(W.Z,{xs:12,md:3,title:"",name:"header.[".concat(t,"].mostra"),value:e.mostra,register:U}),(0,n.jsx)(W.Z,{xs:12,md:3,title:"",name:"header.[".concat(t,"].obrigatorio"),value:e.obrigatorio,register:U})]}))]})})})]}),C&&(0,n.jsx)(c.Z,{sx:{mt:4},children:(0,n.jsx)(u.Z,{children:(0,n.jsx)(m.Z,{component:"nav","aria-label":"main mailbox",children:(0,n.jsxs)(x.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(x.ZP,{item:!0,md:4,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,n.jsx)(x.ZP,{item:!0,md:3,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,n.jsx)(x.ZP,{item:!0,md:3,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})}),C.map((e,t)=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"hidden",name:"products.[".concat(t,"].parRecebimentoMpProdutoID"),defaultValue:e.parRecebimentompProdutoID,...U("products.[".concat(t,"].parRecebimentoMpProdutoID"))}),(0,n.jsx)(x.ZP,{item:!0,md:4,children:e.nomeCampo}),(0,n.jsx)(W.Z,{xs:12,md:3,title:"",name:"products.[".concat(t,"].mostra"),value:e.mostra,register:U}),(0,n.jsx)(W.Z,{xs:12,md:3,title:"",name:"products.[".concat(t,"].obrigatorio"),value:e.obrigatorio,register:U})]}))]})})})}),F&&F.map((e,i)=>{var s,a,l,r,d,m;return(0,n.jsx)(c.Z,{md:12,sx:{mt:4},children:(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:4},children:"Bloco ".concat(i+1)}),(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(i,"].parRecebimentompBlocoID"),defaultValue:e.dados.parRecebimentompBlocoID,...U("blocks.[".concat(i,"].parRecebimentompBlocoID"))}),(0,n.jsxs)(x.ZP,{container:!0,spacing:4,children:[(0,n.jsx)(V.Z,{xs:12,md:1,title:"Sequ\xeancia",name:"blocks.[".concat(i,"].dados.ordem"),value:e.dados.ordem,required:!0,control:J,errors:null==Q?void 0:null===(s=Q.blocks)||void 0===s?void 0:null===(a=s[i])||void 0===a?void 0:null===(l=a.dados)||void 0===l?void 0:l.ordem}),(0,n.jsx)(V.Z,{xs:12,md:9,title:"Nome do Bloco",name:"blocks.[".concat(i,"].dados.nome"),value:e.dados.nome,required:!0,control:J,errors:null==Q?void 0:null===(r=Q.blocks)||void 0===r?void 0:null===(d=r[i])||void 0===d?void 0:null===(m=d.dados)||void 0===m?void 0:m.nome}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Ativo",name:"blocks.[".concat(i,"].dados.status"),value:F[i].dados.status,register:U}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Observa\xe7\xe3o",name:"blocks.[".concat(i,"].dados.obs"),value:F[i].dados.obs,register:U})]}),(0,n.jsxs)(x.ZP,{container:!0,spacing:4,sx:{mt:0},children:[(0,n.jsx)(x.ZP,{item:!0,xs:12,md:12,children:(0,n.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Itens"})}),e.itens&&e.itens.map((e,s)=>{var a,l,r,d,c,u,m,x,v,p,h,b;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"hidden",name:"blocks.[".concat(i,"].itens.[").concat(s,"].parRecebimentompBlocoItemID"),defaultValue:e.parRecebimentompBlocoItemID,...U("blocks.[".concat(i,"].itens.[").concat(s,"].parRecebimentompBlocoItemID"))}),(0,n.jsx)(V.Z,{xs:12,md:1,title:"Sequ\xeancia",name:"blocks.[".concat(i,"].itens.[").concat(s,"].ordem"),value:e.ordem,required:!0,control:J,errors:null==Q?void 0:null===(a=Q.blocks)||void 0===a?void 0:null===(l=a[i])||void 0===l?void 0:null===(r=l.itens)||void 0===r?void 0:null===(d=r[s])||void 0===d?void 0:d.ordem}),(0,n.jsx)(M.Z,{xs:12,md:5,title:F[i].itens[s].itemID?"Item [".concat(F[i].itens[s].itemID,"]"):"Item",name:"blocks.[".concat(i,"].itens.[").concat(s,"].item"),value:null!==(t=F[i].itens[s].item)&&void 0!==t?t:null,required:!0,options:y.itens,register:U,setValue:G,errors:null==Q?void 0:null===(c=Q.blocks)||void 0===c?void 0:null===(u=c[i])||void 0===u?void 0:null===(m=u.itens)||void 0===m?void 0:null===(x=m[s])||void 0===x?void 0:x.item}),(0,n.jsx)(M.Z,{xs:12,md:2,title:"Alternativa",name:"blocks.[".concat(i,"].itens.[").concat(s,"].alternativa"),value:null!==(o=F[i].itens[s].alternativa)&&void 0!==o?o:null,required:!0,options:y.alternativas,register:U,setValue:G,errors:null==Q?void 0:null===(v=Q.blocks)||void 0===v?void 0:null===(p=v[i])||void 0===p?void 0:null===(h=p.itens)||void 0===h?void 0:null===(b=h[s])||void 0===b?void 0:b.alternativa}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Ativo",index:s,name:"blocks.[".concat(i,"].itens.[").concat(s,"].status"),value:F[i].itens[s].status,register:U}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Obs",index:s,name:"blocks.[".concat(i,"].itens.[").concat(s,"].obs"),value:F[i].itens[s].obs,register:U}),(0,n.jsx)(N.Z,{xs:12,md:1,title:"Obrigat\xf3rio",index:s,name:"blocks.[".concat(i,"].itens.[").concat(s,"].obrigatorio"),value:F[i].itens[s].obrigatorio,register:U}),(0,n.jsx)(_.Z,{xs:12,md:1,title:0==s?"Remover":"",index:i,removeItem:eo,item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois j\xe1 foi respondido em um formul\xe1rio"})]})}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:12,children:(0,n.jsx)(h.Z,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(D.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){$(i)},children:"Inserir Item"})})]})]})},i)}),(0,n.jsx)(x.ZP,{item:!0,xs:12,md:12,sx:{mt:4},children:(0,n.jsx)(h.Z,{variant:"outlined",color:"primary",startIcon:(0,n.jsx)(D.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){ee()},children:"Inserir Bloco"})}),b&&(0,n.jsx)(c.Z,{md:12,sx:{mt:4},children:(0,n.jsx)(u.Z,{children:(0,n.jsx)(x.ZP,{container:!0,spacing:4,children:(0,n.jsx)(x.ZP,{item:!0,xs:12,md:12,children:(0,n.jsx)(V.Z,{xs:12,md:12,title:"Orienta\xe7\xf5es",name:"orientacoes.obs",required:!1,value:null==R?void 0:R.obs,multiline:!0,rows:4,control:J})})})})})]}):(0,n.jsx)(k.Z,{})})},H=()=>{let[e,t]=(0,i.useState)(null),o=(0,b.useRouter)(),d=o.pathname,{setTitle:c}=(0,i.useContext)(l.f),{id:u}=(0,i.useContext)(r.X);(0,i.useEffect)(()=>{let e=async()=>{await s.h.get(d).then(e=>{t(e.data),c({title:"Formul\xe1rios",subtitle:{id:u,count:e.data.length,new:!1}})})};e()},[u]);let m=(0,Z.OL)(d,[{title:"ID",field:"id",size:.2},{title:"Nome",field:"nome",size:.8}]);return(0,n.jsx)(n.Fragment,{children:e?u&&u>0?1==u?(0,n.jsx)(A,{id:u}):2==u?(0,n.jsx)(z,{id:u}):(0,n.jsx)("h3",{children:"Em desenvolvimento..."}):(0,n.jsx)(a.Z,{result:e,columns:m}):(0,n.jsx)(k.Z,{})})};var T=H},40372:function(e,t,o){"use strict";o.d(t,{Z:function(){return D}});var n=o(85893),i=o(67294),s=o(87630),a=o(75680),l=o(61953),r=o(67836),d=o(80562),c=o(50853),u=o(11163),m=o.n(u),x=o(91359),v=o(75084),p=o(41664),h=o.n(p),b=o(40039),j=o(21609);let Z=e=>{let{btnNew:t,btnPrint:o,openModal:s}=e,a=m(),{routes:r}=(0,i.useContext)(b.V);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(x.Z,{sx:{display:"flex",justifyContent:"end",alignItems:"center",p:"0",m:"0"},children:(0,n.jsxs)(l.Z,{sx:{display:"flex",gap:"8px"},children:[o&&(0,n.jsx)(v.Z,{onClick:()=>window.print(),type:"button",variant:"outlined",color:"primary",size:"medium",startIcon:(0,n.jsx)(j.Z,{icon:"mdi:printer"}),children:"Imprimir"}),t&&r.find(e=>e.rota===a.pathname&&e.inserir)&&(0,n.jsx)(h(),{href:s?"":"".concat(a.pathname,"/novo"),children:(0,n.jsx)(v.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",startIcon:(0,n.jsx)(j.Z,{icon:"ic:outline-plus"}),onClick:s||null,children:"Novo"})})]})})})},g=e=>(0,n.jsxs)(l.Z,{sx:{display:"flex",flexWrap:"wrap",alignItems:"baseline",justifyContent:"space-between",p:e=>e.spacing(8,0,0,0)},children:[(0,n.jsxs)(l.Z,{sx:{display:"flex",gap:"8px",textAlig:"end"},children:[(0,n.jsx)(r.Z,{size:"medium",value:e.value,onChange:e.onChange,placeholder:"Buscar…",variant:"standard",InputProps:{startAdornment:(0,n.jsx)(l.Z,{sx:{mr:2,display:"flex"},children:(0,n.jsx)(j.Z,{icon:"mdi:magnify",fontSize:20})}),endAdornment:(0,n.jsx)(d.Z,{size:"medium",title:"Clear","aria-label":"Clear",onClick:e.clearSearch,children:(0,n.jsx)(j.Z,{icon:"mdi:close",fontSize:20})})},sx:{width:{xs:1,sm:"auto"},"& .MuiInputBase-root > svg":{mr:2}}}),(0,n.jsx)(c.M,{})]}),(0,n.jsx)(l.Z,{children:(0,n.jsx)(Z,{btnNew:e.buttonsHeader.btnNew,btnPrint:e.buttonsHeader.btnPrint,openModal:e.buttonsHeader.openModal})})]});var f=o(60565),I=o(83830);let k=e=>{let{rows:t,columns:o,buttonsHeader:l}=e,{handleSearch:r,pageSize:d,setPageSize:c,searchText:u,filteredData:m,setData:x,data:v}=(0,i.useContext)(f.f),{setId:p}=(0,i.useContext)(I.X);return x(t),(0,n.jsx)(s._,{localeText:a.F.components.MuiDataGrid.defaultProps.localeText,autoHeight:!0,columns:o,pageSize:d,rowsPerPageOptions:[10,20,30,40,50,100],components:{Toolbar:g},rows:u?m:v,onCellClick(e,t){p(e.row.id)},onPageSizeChange:e=>c(e),sx:{"& .MuiDataGrid-cell":{cursor:"pointer"}},componentsProps:{toolbar:{value:u,clearSearch:()=>r(""),onChange:e=>r(e.target.value),buttonsHeader:l}}})};var D=k}},function(e){e.O(0,[4186,1445,1111,5999,7536,2064,2187,1082,8213,9774,2888,179],function(){return e(e.s=92689)}),_N_E=e.O()}]);