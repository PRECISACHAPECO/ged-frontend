(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9845],{83102:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/relatorio",function(){return l(52285)}])},47842:function(e,t,l){"use strict";var o=l(85893),i=l(70754);let n=e=>{let{show:t,title:l,customTextProps:n,...s}=e;return t&&(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg z-50",children:(0,o.jsxs)("div",{className:"flex flex-col justify-center items-center gap-2 ",children:[(0,o.jsx)(i.Z,{color:"primary",...s}),(0,o.jsx)("p",{className:"opacity-80 text-sm ".concat(n),children:null!=l?l:"Carregando..."})]})})};t.Z=n},52189:function(e,t,l){"use strict";var o=l(85893),i=l(64004);l(67294);var n=l(42404),s=l(17844);let r=()=>{var e,t,l,r,d,a,c,x,u;let h=(0,s.Z)(),p=null==h?void 0:null===(e=h.header)||void 0===e?void 0:e.filter(e=>"Nome Fantasia"===e.name)[0].value;return h&&(0,o.jsxs)(i.G7,{style:{width:"100%"},children:[(0,o.jsx)(i.G7,{style:{padding:3,backgroundColor:"#eee",marginTop:20,border:"1px solid #ddd"},children:(0,o.jsx)(i.xv,{style:{width:"100%",textAlign:"center",fontSize:12},children:"QUALIFICA\xc7\xc3O DE FORNECEDORES"})}),(0,o.jsx)(i.G7,{style:{marginTop:20},children:(0,o.jsxs)(i.xv,{style:{fontSize:10},children:["A empresa ",(0,o.jsx)(i.xv,{children:null==h?void 0:h.unidade})," possui como norma de BPF a avalia\xe7\xe3o de seus fornecedores quanto as mat\xe9rias primas e ingredientes por estes fornecidos."]})}),"Fornecedor",(0,o.jsx)(i.G7,{style:{marginTop:20},children:(0,o.jsxs)(i.xv,{style:{fontSize:10},children:["Fornecedor: ",(0,o.jsx)(i.xv,{style:{fontWeight:"bold",fontSize:10},children:p})]})}),(0,o.jsx)(i.G7,{style:{marginTop:20},children:(0,o.jsxs)(i.xv,{style:{fontSize:10},children:[(null==h?void 0:null===(t=h.produtos)||void 0===t?void 0:t.length)>1?"Produtos fornecidos: ":"Produto fornecido: ",null==h?void 0:null===(l=h.produtos)||void 0===l?void 0:l.map((e,t)=>(0,o.jsxs)(i.xv,{children:[(0,o.jsx)(i.xv,{style:{fontWeight:"bold",fontSize:10},children:e.produtos}),t!==h.produtos.length-1&&", "]},t))]})}),(0,o.jsx)(i.G7,{style:{marginTop:20},children:(0,o.jsx)(i.G7,{style:n.W.containerFields,children:null===(r=h.header)||void 0===r?void 0:r.map((e,t)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.G7,{style:[n.W.fields,{width:"33%"}],children:[(0,o.jsx)(i.xv,{style:n.W.fieldTitle,children:null!==(a=e.name)&&void 0!==a?a:"NI"}),(0,o.jsx)(i.xv,{style:n.W.fieldValue,children:null!==(c=e.value)&&void 0!==c?c:"NI"})]}),(t+1)%3==0&&(0,o.jsx)(i.G7,{style:n.W.separator})]}))})}),null===(d=h.blocks)||void 0===d?void 0:d.map((e,t)=>(0,o.jsx)(i.G7,{style:[e,{marginTop:30}],children:(0,o.jsxs)(i.G7,{style:n.W.table,children:[(0,o.jsxs)(i.G7,{style:n.W.tableTitle,children:[(0,o.jsx)(i.xv,{style:[n.W.tableTitlecolumn,{width:"60%"}],children:e.nome}),(0,o.jsx)(i.xv,{style:[n.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Resposta"}),(0,o.jsx)(i.xv,{style:[n.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Observa\xe7\xe3o"})]}),e.itens.map((e,t)=>(0,o.jsxs)(i.G7,{style:n.W.tableContainer,children:[(0,o.jsx)(i.G7,{style:[n.W.tableContent,{width:"60%"}],children:(0,o.jsx)(i.xv,{style:n.W.tableContentcolumn,children:e.nome})}),(0,o.jsx)(i.G7,{style:[n.W.tableContent,{width:"20%"}],children:(0,o.jsx)(i.xv,{style:n.W.tableContentcolumn,children:null!==(x=e.resposta)&&void 0!==x?x:""})}),(0,o.jsx)(i.G7,{style:[n.W.tableContent,{width:"20%"}],children:(0,o.jsx)(i.xv,{style:n.W.tableContentcolumn,children:null!==(u=e.obsResposta)&&void 0!==u?u:""})})]}))]})},t))]})};t.Z=r},17844:function(e,t,l){"use strict";var o=l(60664),i=l(67294);l(1503);let n=()=>{let[e,t]=(0,i.useState)([]),l=localStorage.getItem("report"),n=JSON.parse(l),s=async()=>{try{let e=await o.h.post("relatorio/".concat(n.route),n);t(e.data)}catch(l){console.log(l)}};return(0,i.useEffect)(()=>{n&&s()},[]),e};t.Z=n},42404:function(e,t,l){"use strict";l.d(t,{W:function(){return i}});var o=l(64004);let i=o.mM.create({page:{flexDirection:"column",backgroundColor:"#FFF",justifyContent:"start",paddingTop:15,paddingBottom:30},title:{},header:{position:"fixed",top:-10,left:0,right:0,margin:"0 auto",fontSize:12,height:50,width:"92%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},content:{marginHorizontal:10,fontSize:11,padding:15,flex:1},footer:{position:"absolute",bottom:20,color:"grey",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:25,fontSize:10},blockTitle:{paddingVertical:5},containerFields:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",paddingTop:2},fields:{display:"flex",flexDirection:"column",gap:"2px",paddingBottom:5,paddingTop:5},fieldTitle:{fontSize:8,opacity:"0.8"},fieldValue:{fontSize:10},separator:{height:"1px",width:"100%",borderBottom:"1px solid #ddd"},table:{width:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid #ddd",borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd",borderTopLeftRadius:3,borderTopRightRadius:3,borderBottomLeftRadius:3,borderBottomRightRadius:3},tableTitle:{display:"flex",flexDirection:"row",width:"100%",fontSize:8,backgroundColor:"#EEE",borderTopLeftRadius:2,borderTopRightRadius:2,borderLeft:"1px solid #ddd"},tableTitlecolumn:{padding:8},tableContainer:{display:"flex",flexDirection:"row",width:"100%"},tableContent:{padding:8,borderLeft:"1px solid #ddd",borderTop:"1px solid #ddd"},tableContentcolumn:{fontSize:9}})},52285:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return I}});var o=l(85893),i=l(67294),n=l(88942),s=l(97108),r=l(10160),d=l(21609),a=l(64004),c=l(15758),x=l(30140),u=l(52189),h=l(42404),p=l(17844);let m=()=>{var e,t,l,i,n,s,r,d,c;let x=(0,p.Z)(),u=null==x?void 0:null===(e=x.header)||void 0===e?void 0:e.filter(e=>"Nome Fantasia"===e.name)[0].value;return x&&(0,o.jsxs)(a.G7,{style:{width:"100%"},children:[(0,o.jsx)(a.G7,{style:{padding:3,backgroundColor:"#eee",marginTop:20,border:"1px solid #ddd"},children:(0,o.jsx)(a.xv,{style:{width:"100%",textAlign:"center",fontSize:12},children:"RECEBIMENTO MP"})}),(0,o.jsx)(a.G7,{style:{marginTop:20},children:(0,o.jsxs)(a.xv,{style:{fontSize:10},children:["A empresa ",(0,o.jsx)(a.xv,{children:null==x?void 0:x.unidade})," possui como norma de BPF a avalia\xe7\xe3o de seus fornecedores quanto as mat\xe9rias primas e ingredientes por estes fornecidos."]})}),"Fornecedor",(0,o.jsx)(a.G7,{style:{marginTop:20},children:(0,o.jsxs)(a.xv,{style:{fontSize:10},children:["Fornecedor: ",(0,o.jsx)(a.xv,{style:{fontWeight:"bold",fontSize:10},children:u})]})}),(0,o.jsx)(a.G7,{style:{marginTop:20},children:(0,o.jsxs)(a.xv,{style:{fontSize:10},children:[(null==x?void 0:null===(t=x.produtos)||void 0===t?void 0:t.length)>1?"Produtos fornecidos: ":"Produto fornecido: ",null==x?void 0:null===(l=x.produtos)||void 0===l?void 0:l.map((e,t)=>(0,o.jsxs)(a.xv,{children:[(0,o.jsx)(a.xv,{style:{fontWeight:"bold",fontSize:10},children:e.produtos}),t!==x.produtos.length-1&&", "]},t))]})}),(0,o.jsx)(a.G7,{style:{marginTop:20},children:(0,o.jsx)(a.G7,{style:h.W.containerFields,children:null===(i=x.header)||void 0===i?void 0:i.map((e,t)=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(a.G7,{style:[h.W.fields,{width:"33%"}],children:[(0,o.jsx)(a.xv,{style:h.W.fieldTitle,children:null!==(s=e.name)&&void 0!==s?s:"NI"}),(0,o.jsx)(a.xv,{style:h.W.fieldValue,children:null!==(r=e.value)&&void 0!==r?r:"NI"})]}),(t+1)%3==0&&(0,o.jsx)(a.G7,{style:h.W.separator})]}))})}),null===(n=x.blocks)||void 0===n?void 0:n.map((e,t)=>(0,o.jsx)(a.G7,{style:[e,{marginTop:30}],children:(0,o.jsxs)(a.G7,{style:h.W.table,children:[(0,o.jsxs)(a.G7,{style:h.W.tableTitle,children:[(0,o.jsx)(a.xv,{style:[h.W.tableTitlecolumn,{width:"60%"}],children:e.nome}),(0,o.jsx)(a.xv,{style:[h.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Resposta"}),(0,o.jsx)(a.xv,{style:[h.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Observa\xe7\xe3o"})]}),e.itens.map((e,t)=>(0,o.jsxs)(a.G7,{style:h.W.tableContainer,children:[(0,o.jsx)(a.G7,{style:[h.W.tableContent,{width:"60%"}],children:(0,o.jsx)(a.xv,{style:h.W.tableContentcolumn,children:e.nome})}),(0,o.jsx)(a.G7,{style:[h.W.tableContent,{width:"20%"}],children:(0,o.jsx)(a.xv,{style:h.W.tableContentcolumn,children:null!==(d=e.resposta)&&void 0!==d?d:""})}),(0,o.jsx)(a.G7,{style:[h.W.tableContent,{width:"20%"}],children:(0,o.jsx)(a.xv,{style:h.W.tableContentcolumn,children:null!==(c=e.obsResposta)&&void 0!==c?c:""})})]}))]})},t))]})},f=()=>{let e={DadosFornecedor:u.Z,DadosRecebimentoMp:m};return e};var j=l(54225),v=l(1890),g=l(77745),y=l(95398),b=l(76779),w=l(29630),S=l(60664),W=l(80562),C=l(47842),T=l(86501);let z=e=>{let{title:t,description:l,open:n,handleClose:s}=e,[r,a]=(0,i.useState)(!1),[c,x]=(0,i.useState)(null),u=localStorage.getItem("report"),h=JSON.parse(u),p=async()=>{a(!r),r?(a(!1),x(null),s()):await m()},m=async()=>{try{let e=await S.h.post("/formularios/fornecedor/createDocumentAutentique/".concat(h.id,"/").concat(h.usuarioID,"/").concat(h.unidadeID));x(e.data),localStorage.setItem("hashSignedDocument",JSON.stringify(e.data))}catch(t){console.log(t)}},f=async()=>{let e=localStorage.getItem("hashSignedDocument"),t=JSON.parse(e);if(t)try{let l=await S.h.post("/formularios/fornecedor/saveSignedDocument",{id:h.id,usuarioID:h.usuarioID,unidadeID:h.unidadeID,hashSignedDocument:t});console.log("\uD83D\uDE80 ~ response:",l),T.ZP.success(l.data.message)}catch(o){console.log(o)}},z=()=>{s(),a(!1),x(null),localStorage.removeItem("hashSignedDocument")};return(0,i.useEffect)(()=>{n||(f(),z())},[s]),(0,o.jsxs)(v.Z,{open:n,maxWidth:"xl",fullWidth:!0,scroll:c?"paper":"body",children:[(0,o.jsxs)(g.Z,{id:"form-dialog-title",children:[t,(0,o.jsx)(W.Z,{onClick(){s(),a(!1)},className:"!absolute !right-2 !top-2",children:(0,o.jsx)(d.Z,{icon:"mdi:close"})})]}),(0,o.jsx)(y.Z,{children:r?(0,o.jsx)("div",{className:"h-[80vh]",children:c?(0,o.jsxs)("div",{className:"h-[80vh]",children:[(0,o.jsx)(w.Z,{variant:"body1",children:l}),(0,o.jsx)("iframe",{src:"https://painel.autentique.com.br/documentos/".concat(c),frameborder:"0",width:"100%",height:"100%"})]}):(0,o.jsx)(C.Z,{title:"Preparando documento para assinatura...",show:!0,customTextProps:"text-xl font-bold",size:60,thickness:4})}):(0,o.jsxs)("div",{className:"h-[80vh]",children:[(0,o.jsx)(w.Z,{variant:"body1",children:l}),(0,o.jsx)("iframe",{src:"https://painel.autentique.com.br/entrar",frameBorder:"0",width:"100%",height:"100%"})]})}),(0,o.jsxs)(b.Z,{className:"dialog-actions-dense",children:[r&&(0,o.jsxs)(j.Z,{variant:"outlined",color:"primary",onClick(){a(!1),x(null)},className:"flex gap-1",children:[(0,o.jsx)(d.Z,{icon:"fe:login"}),"Fazer login"]}),(0,o.jsxs)(j.Z,{variant:r?"outlined":"contained",color:"primary",onClick:p,className:"flex gap-1",children:[(0,o.jsx)(d.Z,{icon:r?"":"fluent:signature-24-filled"}),r?"Fechar":"Confirmar e assinar"]})]})]})},G=e=>{let{nameComponent:t}=e,l=f(),i=l[t];return(0,o.jsx)(a.BB,{children:(0,o.jsxs)(a.T3,{size:"A4",style:{paddingHorizontal:25},children:[(0,o.jsx)(x.Z,{}),i&&(0,o.jsx)(i,{}),(0,o.jsx)(c.Z,{})]})})},N=e=>{let{nameComponent:t}=e,[l,n]=(0,i.useState)(!1),s=localStorage.getItem("report"),c=JSON.parse(s),x=()=>{n(!0)},u=()=>{window.close()},h=[{id:1,title:"Fechar",color:"primary",size:"large",variant:"outlined",disable:!1,icon:"ooui:close",function:u},{id:2,title:"Assinar digitalmente",color:"primary",size:"large",variant:"outlined",disable:c.status<40,icon:"fluent:signature-24-filled",function:x}];return(0,o.jsxs)("div",{className:"fixed bottom-10 right-8 flex flex-col gap-2",children:[h&&h.map(e=>(0,o.jsx)("div",{onClick:e.disable?null:e.function,children:(0,o.jsx)(r.Z,{color:e.color,size:e.size,variant:e.variant,className:e.disable?"hover:opacity-20 opacity-20":"",children:(0,o.jsx)(d.Z,{icon:e.icon,className:e.disable?"cursor-default":""})})},e.id)),(0,o.jsx)("div",{children:(0,o.jsx)(a.WD,{document:(0,o.jsx)(G,{nameComponent:t}),fileName:t,targetDirectory:"C:/Users/Jonatan/Desktop/teste",children(e){let{blob:t,url:l,loading:i,error:n}=e;return(0,o.jsx)("div",{style:{textAlign:"center"},children:(0,o.jsx)(r.Z,{color:"primary",size:"large",variant:"outlined",children:(0,o.jsx)(d.Z,{icon:"basil:download-solid"})})})}})}),(0,o.jsx)(z,{open:l,handleClose:()=>n(!1),title:"Assinatura do relat\xf3rio"})]})},Z=()=>(0,o.jsx)(a.T3,{size:"A4",children:(0,o.jsx)(a.G7,{children:(0,o.jsx)(a.xv,{style:{color:"red",fontSize:20,padding:10},children:"Erro ao carregar o relat\xf3rio. Entre em contato com o suporte."})})});var D=l(11163),F=l(62097);let E=()=>{let e=localStorage.getItem("report"),t=JSON.parse(e),l=null==t?void 0:t.nameComponent,r=f(),d=r[l],[a,c]=i.useState({}),x=(0,D.useRouter)();return(0,i.useEffect)(()=>{c(x.query)},[x.query]),(0,o.jsx)(n.Z,{children:d?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(N,{nameComponent:l}),(0,o.jsx)(s.Z,{params:null==x?void 0:x.query,children:(0,o.jsx)(d,{params:null==x?void 0:x.query})})]}):(0,o.jsx)(Z,{})})};E.getLayout=e=>(0,o.jsx)(n.Z,{children:e}),E.setConfig=()=>{let{palette:e}=(0,F.Z)();return{mode:e.mode}};var I=E}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=83102)}),_N_E=e.O()}]);