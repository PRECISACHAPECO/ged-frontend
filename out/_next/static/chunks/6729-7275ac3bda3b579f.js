"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6729],{91359:function(e,o,a){a.d(o,{Z:function(){return g}});var t=a(87462),r=a(63366),n=a(67294),s=a(86010),i=a(94780),l=a(67074),d=a(78884),c=a(1588),u=a(34867);function p(e){return(0,u.Z)("MuiCardContent",e)}(0,c.Z)("MuiCardContent",["root"]);var m=a(85893);let x=["className","component"],f=e=>{let{classes:o}=e;return(0,i.Z)({root:["root"]},p,o)},v=(0,l.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,o)=>o.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),h=n.forwardRef(function(e,o){let a=(0,d.Z)({props:e,name:"MuiCardContent"}),{className:n,component:i="div"}=a,l=(0,r.Z)(a,x),c=(0,t.Z)({},a,{component:i}),u=f(c);return(0,m.jsx)(v,(0,t.Z)({as:i,className:(0,s.Z)(u.root,n),ownerState:c,ref:o},l))});var g=h},49837:function(e,o,a){a.d(o,{Z:function(){return D}});var t=a(87462),r=a(63366),n=a(67294),s=a(86010),i=a(94780),l=a(67074),d=a(78884),c=a(70918),u=a(1588),p=a(34867);function m(e){return(0,p.Z)("MuiCard",e)}(0,u.Z)("MuiCard",["root"]);var x=a(85893);let f=["className","raised"],v=e=>{let{classes:o}=e;return(0,i.Z)({root:["root"]},m,o)},h=(0,l.ZP)(c.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,o)=>o.root})(()=>({overflow:"hidden"})),g=n.forwardRef(function(e,o){let a=(0,d.Z)({props:e,name:"MuiCard"}),{className:n,raised:i=!1}=a,l=(0,r.Z)(a,f),c=(0,t.Z)({},a,{raised:i}),u=v(c);return(0,x.jsx)(h,(0,t.Z)({className:(0,s.Z)(u.root,n),elevation:i?8:void 0,ref:o,ownerState:c},l))});var D=g},47842:function(e,o,a){var t=a(85893),r=a(70754);let n=e=>{let{show:o,title:a}=e;return o&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg z-50",children:(0,t.jsxs)("div",{className:"flex flex-col justify-center items-center gap-2 ",children:[(0,t.jsx)(r.Z,{color:"primary"}),(0,t.jsx)("p",{className:"text-sm opacity-80",children:null!=a?a:"Carregando..."})]})})};o.Z=n},96729:function(e,o,a){a.d(o,{Z:function(){return _}});var t=a(85893),r=a(67294),n=a(87536),s=a(56531),i=a(99734),l=a(34282),d=a(29308),c=a(23895),u=a(61953),p=a(49837),m=a(91359),x=a(29630),f=a(79072),v=a(55343),h=a(19604),g=a(11163),D=a.n(g),b=a(46749),j=a(60664);a(86887);var Z=a(83830),I=a(40039),C=a(39976),y=a(47842),F=a(86501),S=a(66136),w=a(80377);a(27304);var E=a(50287),P=a(84220),M=a(21609);let A=e=>{var o,a,n,i,l,c,u,p;let{modeloID:m,values:x,fields:v,fornecedor:h,setFornecedor:g,disabled:C,register:y,errors:F,setValue:w,control:A,getAddressByCep:V}=e,{user:R,loggedUnity:H}=(0,r.useContext)(I.V),[N,k]=(0,r.useState)({}),[q,O]=(0,r.useState)([]),[B,z]=(0,r.useState)([]),{settings:_}=(0,r.useContext)(S.J6),G=_.mode,T=D(),{setId:W}=(0,r.useContext)(Z.X),L=(e,o,a,t)=>{let r=new Date(a),n=(0,b.HD)(e,r,t);k(e=>({...e,[o]:n}))},J=async()=>{let e=await j.h.post("/cadastros/profissional/getProfissionaisAssinatura",{formularioID:2,modeloID:m});O(e.data.preenche),K(e.data.preenche)},X=async()=>{let e=await j.h.post("/formularios/fornecedor/getFornecedoresAprovados",{unidadeID:H.unidadeID});z(e.data)},K=e=>{let o=R.profissionalID,a=e.find(e=>e.id===o);a&&a.id>0&&w("fieldsHeader.profissional",a)},Q=()=>{W(h.id),T.push("/formularios/fornecedor/")};return(0,r.useEffect)(()=>{J(),X()},[]),(0,t.jsxs)(f.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(E.Z,{xs:12,md:2,title:"Data da abertura",name:"fieldsHeader.abertoPor.dataInicio",type:"date",value:null==x?void 0:null===(o=x.abertoPor)||void 0===o?void 0:o.dataInicio,disabled:!0,control:A}),(0,t.jsx)(d.Z,{xs:12,md:2,title:"Hora da abertura",name:"fieldsHeader.abertoPor.horaInicio",type:"time",disabled:!0,register:y,control:A}),(0,t.jsx)(d.Z,{xs:12,md:8,title:"Profissional que abriu",name:"fieldsHeader.abertoPor.profissional.nome",value:null==x?void 0:null===(a=x.abertoPor)||void 0===a?void 0:null===(n=a.profissional)||void 0===n?void 0:n.nome,disabled:!0,register:y,control:A}),(0,t.jsx)(E.Z,{xs:12,md:2,title:"Data da avalia\xe7\xe3o",name:"fieldsHeader.data",type:"date",value:null!==(p=null==x?void 0:x.data)&&void 0!==p?p:new Date,disabled:C,register:y,control:A,setDateFormat:L,typeValidation:"dataPassado",daysValidation:365,dateStatus:N,errors:null==F?void 0:null===(i=F.fieldsHeader)||void 0===i?void 0:i.data}),(0,t.jsx)(d.Z,{xs:12,md:2,title:"Hora da avalia\xe7\xe3o",name:"fieldsHeader.hora",type:"time",disabled:C,register:y,control:A,errors:null==F?void 0:null===(l=F.fieldsHeader)||void 0===l?void 0:l.hora}),(0,t.jsx)(P.Z,{xs:12,md:4,title:"Profissional preenchimento",name:"fieldsHeader.profissional",type:"string",options:q,disabled:C,register:y,setValue:w,control:A,errors:null==F?void 0:null===(c=F.fieldsHeader)||void 0===c?void 0:c.profissional}),(0,t.jsx)(s.Z,{register:y,errors:F,setValue:w,control:A,fields:v,values:v,getAddressByCep:V,disabled:C}),(0,t.jsx)(P.Z,{xs:12,md:4,title:"Fornecedor",name:"fieldsHeader.fornecedor",type:"string",options:B,onChange:e=>g(e),value:null==x?void 0:x.fornecedor,disabled:C,register:y,setValue:w,control:A,errors:null==F?void 0:null===(u=F.fieldsHeader)||void 0===u?void 0:u.fornecedor}),(0,t.jsx)(f.ZP,{item:!0,xs:12,md:4,children:h&&h.id>0&&(0,t.jsxs)("div",{onClick:Q,className:"".concat("dark"==G?"bg-[#18181a]":"bg-[#EEEEF1]"," flex flex-col gap-2 p-4 rounded-xl cursor-pointer relative"),children:[(0,t.jsx)(M.Z,{icon:"uil:external-link-alt",className:"absolute top-4 right-4 text-xl"}),(0,t.jsx)("p",{className:"text-xs",children:"Dados do Fornecedor"}),(0,t.jsxs)("p",{children:["Nome: ",h.nome]}),(0,t.jsxs)("p",{children:["Telefone: ",h.telefone]}),(0,t.jsxs)("p",{children:["Cidade: ",h.cidade]})]})})]})},V=e=>{var o,a,n,s;let{modeloID:i,values:l,disabled:c,register:u,errors:x,setValue:v,control:h}=e,{user:g}=(0,r.useContext)(I.V),[D,Z]=(0,r.useState)({}),[C,y]=(0,r.useState)([]),F=(e,o,a,t)=>{let r=new Date(a),n=(0,b.HD)(e,r,t);Z(e=>({...e,[o]:n}))},S=async()=>{let e=await j.h.post("/cadastros/profissional/getProfissionaisAssinatura",{formularioID:2,modeloID:i});console.log("\uD83D\uDE80 ~ response.data:",e.data),y(e.data.aprova),w(e.data.aprova)},w=e=>{let o=g.profissionalID,a=e.find(e=>e.id===o);a&&a.id>0&&v("fieldsFooter.profissional",a)};return(0,r.useEffect)(()=>{S()},[]),(0,t.jsx)(p.Z,{children:(0,t.jsx)(m.Z,{children:(0,t.jsxs)(f.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(E.Z,{xs:12,md:2,title:"Data da conclus\xe3o",name:"fieldsFooter.dataConclusao",type:"date",value:null!==(s=null==l?void 0:l.dataConclusao)&&void 0!==s?s:new Date,disabled:c,register:u,control:h,setDateFormat:F,typeValidation:"dataPassado",daysValidation:365,dateStatus:D,errors:null==x?void 0:null===(o=x.fieldsFooter)||void 0===o?void 0:o.dataConclusao}),(0,t.jsx)(d.Z,{xs:12,md:2,title:"Hora da conclus\xe3o",name:"fieldsFooter.horaConclusao",type:"time",disabled:c,register:u,control:h,errors:null==x?void 0:null===(a=x.fieldsFooter)||void 0===a?void 0:a.horaConclusao}),(0,t.jsx)(P.Z,{xs:12,md:8,title:"Profissional que aprova",name:"fieldsFooter.profissional",type:"string",options:null!=C?C:[],disabled:c,register:u,setValue:v,control:h,errors:null==x?void 0:null===(n=x.fieldsFooter)||void 0===n?void 0:n.profissional})]})})})};var R=a(54225),H=a(44373),N=a(3893);let k=e=>{var o,a,r,n,s,i,l,c,u,p,m,x;let{value:f,index:v,apresentacoes:h,setValue:g,register:D,control:b,errors:j}=e;return console.log("\uD83D\uDE80 ~ value:",f),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{xs:12,md:2,title:"Quantidade",name:"produtos[".concat(v,"].quantidade"),register:D,control:b,required:!0,errors:null==j?void 0:null===(o=j.produtos)||void 0===o?void 0:null===(a=o[v])||void 0===a?void 0:a.quantidade}),(0,t.jsx)(E.Z,{xs:12,md:2,required:!0,title:"Data da fabrica\xe7\xe3o",value:f.dataFabricacao,name:"produtos[".concat(v,"].dataFabricacao"),control:b,errors:null==j?void 0:null===(r=j.produtos)||void 0===r?void 0:null===(n=r[v])||void 0===n?void 0:n.dataFabricacao}),(0,t.jsx)(d.Z,{xs:12,md:2,title:"N\xba Lote",name:"produtos[".concat(v,"].lote"),required:!0,register:D,control:b,errors:null==j?void 0:null===(s=j.produtos)||void 0===s?void 0:null===(i=s[v])||void 0===i?void 0:i.lote}),(0,t.jsx)(P.Z,{xs:12,md:2,title:"Apresenta\xe7\xe3o",name:"produtos[".concat(v,"].apresentacao"),type:"string",options:null!=h?h:[],required:!0,register:D,setValue:g,control:b,errors:null==j?void 0:null===(l=j.produtos)||void 0===l?void 0:null===(c=l[v])||void 0===c?void 0:c.apresentacao}),(0,t.jsx)(d.Z,{xs:12,md:2,title:"NF",name:"produtos[".concat(v,"].nf"),required:!0,register:D,control:b,errors:null==j?void 0:null===(u=j.produtos)||void 0===u?void 0:null===(p=u[v])||void 0===p?void 0:p.nf}),(0,t.jsx)(E.Z,{xs:12,md:2,required:!0,title:"Data de validade",value:f.dataValidade,name:"produtos[".concat(v,"].dataValidade"),control:b,errors:null==j?void 0:null===(m=j.produtos)||void 0===m?void 0:null===(x=m[v])||void 0===x?void 0:x.dataValidade})]})},q=e=>{let{recebimentoMpID:o,fornecedorID:a,getValues:n,setValue:s,register:i,control:l,errors:d}=e,[c,p]=(0,r.useState)([]),[m,v]=(0,r.useState)([]),[h,g]=(0,r.useState)(!1),D=async()=>{try{if(a&&a>0){let e=await j.h.post("/cadastros/produto/getProdutosFornecedor",{recebimentoMpID:o,fornecedorID:a});p(e.data),s("produtos",e.data)}else p([])}catch(t){console.log("\uD83D\uDE80 ~ error:",t)}},b=async()=>{try{let e=await j.h.get("/cadastros/apresentacao");v(e.data)}catch(o){console.log("\uD83D\uDE80 ~ error:",o)}},Z=e=>{g(!h),s("produtos[".concat(e,"].checked"),!n("produtos[".concat(e,"].checked")));let o=[...c];o[e].checked=!o[e].checked,p(o)};return(0,r.useEffect)(()=>{D(),b()},[a]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Z,{color:"primary",variant:"subtitle1",sx:{fontWeight:700,mb:2},children:"Produtos aprovados do fornecedor"}),!a&&(0,t.jsx)(x.Z,{color:"warning",variant:"subtitle1",className:"italic",children:(0,t.jsxs)(u.Z,{display:"flex",alignItems:"center",sx:{gap:1},children:[(0,t.jsx)(M.Z,{icon:"typcn:warning",color:"#FFC107"}),(0,t.jsx)("p",{children:"Nenhum fornecedor selecionado!"})]})}),a&&!c.length&&(0,t.jsx)(x.Z,{color:"warning",variant:"subtitle1",className:"italic",children:(0,t.jsxs)(u.Z,{display:"flex",alignItems:"center",sx:{gap:1},children:[(0,t.jsx)(M.Z,{icon:"typcn:warning",color:"#FFC107"}),(0,t.jsx)("p",{children:"Nenhum produto aprovado para o fornecedor selecionado!"})]})}),c&&c.length>0&&c.map((e,o)=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("input",{type:"hidden",value:e.produtoID,name:"produtos[".concat(o,"].produtoID"),...i("produtos[".concat(o,"].produtoID"))}),(0,t.jsxs)(f.ZP,{container:!0,spacing:4,sx:{pb:2},children:[(0,t.jsx)(f.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(N.Z,{title:e.nome,name:"produtos[".concat(o,"].checked"),value:c[o].checked,onClick:()=>Z(o),register:i})}),(0,t.jsx)(f.ZP,{item:!0,xs:12,md:8,children:(0,t.jsxs)(u.Z,{display:"flex",alignItems:"center",justifyContent:"end",sx:{gap:4,mt:3},children:[(0,t.jsxs)(x.Z,{variant:"body2",children:["\xdaltima avalia\xe7\xe3o: ",e.ultimaAvaliacao]}),(0,t.jsxs)(x.Z,{variant:"body2",children:["Pr\xf3xima avalia\xe7\xe3o: ",e.proximaAvialacao," (",1==e.diasRestantes?"".concat(e.diasRestantes," dia"):"".concat(e.diasRestantes," dias"),")"]}),(0,t.jsx)(R.Z,{variant:"outlined",size:"small",children:(0,t.jsxs)(u.Z,{display:"flex",alignItems:"center",sx:{gap:1},children:[(0,t.jsx)(M.Z,{icon:"fluent:form-new-20-regular",width:18,height:18}),"Nova avalia\xe7\xe3o"]})}),(0,t.jsx)(R.Z,{variant:"outlined",size:"small",children:(0,t.jsxs)(u.Z,{display:"flex",alignItems:"center",sx:{gap:1},children:[(0,t.jsx)(M.Z,{icon:"raphael:lab",width:18,height:18}),"Laborat\xf3rio (dev)"]})})]})}),c&&c[o].checked&&(0,t.jsx)(k,{value:e,apresentacoes:m,index:o,setValue:s,register:i,control:l,errors:d},o)]}),o<c.length-1&&(0,t.jsx)(H.Z,{})]}))]})};var O=a(41088),B=a(92629);let z=e=>{let o,{id:a}=e,{menu:s,user:g,loggedUnity:E}=(0,r.useContext)(I.V),[P,M]=(0,r.useState)(!1),[R,H]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[z,_]=(0,r.useState)(!1),[G,T]=(0,r.useState)(!1),[W,L]=(0,r.useState)(!1),[J,X]=(0,r.useState)(!1),[K,Q]=(0,r.useState)(!0),[U,Y]=(0,r.useState)(!0),[$,ee]=(0,r.useState)(null),[eo,ea]=(0,r.useState)(null),[et,er]=(0,r.useState)([]),[en,es]=(0,r.useState)([]),[ei,el]=(0,r.useState)(null),{createNewNotification:ed}=(0,r.useContext)(C.u),[ec,eu]=(0,r.useState)(!1),[ep,em]=(0,r.useState)([]),[ex,ef]=(0,r.useState)([]),[ev,eh]=(0,r.useState)([]),[eg,eD]=(0,r.useState)(null),[eb,ej]=(0,r.useState)([]),[eZ,eI]=(0,r.useState)(null),[eC,ey]=(0,r.useState)(""),[eF,eS]=(0,r.useState)(!1),[ew,eE]=(0,r.useState)(!1),[eP,eM]=(0,r.useState)({status:!1,errors:[]}),{settings:eA}=(0,r.useContext)(S.J6),{setId:eV}=(0,r.useContext)(Z.X),{startLoading:eR,stopLoading:eH}=(0,O.Z)(),[eN,ek]=(0,r.useState)(!1),[eq,eO]=(0,r.useState)({status:!1,message:"Voc\xea n\xe3o tem permiss\xf5es",messageType:"info"}),eB=D(),ez=a&&a>0?"edit":"new",e_=eB.pathname,{reset:eG,register:eT,getValues:eW,setValue:eL,control:eJ,watch:eX,handleSubmit:eK,clearErrors:eQ,setError:eU,formState:{errors:eY}}=(0,n.cI)();console.log("errors: ",eY);let e$=()=>{eV(eo.parRecebimentoMpModeloID),eB.push("/configuracoes/formularios/recebimento-mp/")},e0={id:4,name:"Formul\xe1rio do recebimentpMp",nameComponent:"DadosRecebimentoMp",type:"report",params:{data:{id:a,unidadeID:E.unidadeID,papelID:g.papelID},route:"recebimentoMp/dadosRecebimentoMp"},icon:"fluent:print-24-regular"},e1=[];e1.push(e0),1==g.papelID&&(o=!1,s.map(e=>{e.menu.map(e=>{e.submenu&&e.submenu.length>0&&e.submenu.map(e=>{"/configuracoes/formularios"==e.rota&&(o=!0)})})}),o)&&e1.push({id:5,name:"Configura\xe7\xf5es do formul\xe1rio",description:"Alterar as configura\xe7\xf5es do modelo de formul\xe1rio.",route:null,type:null,action:e$,modal:!1,icon:"bi:gear",identification:null});let e2=async()=>{},e8=()=>{M(!0);try{j.h.post("".concat(e_,"/getData/").concat(a),{type:ez,profissionalID:g.profissionalID,unidadeID:E.unidadeID}).then(e=>{var o,a;M(!1),em(e.data.fieldsHeader),ee(e.data.fieldsHeader.fornecedor),ef(e.data.fieldsFooter),eh(e.data.fields),er(e.data.produtos),ej(e.data.blocos),es(e.data.grupoAnexo),ey(e.data.info),ea(e.data.unidade),eD(e.data.link),eI(e.data.ultimaMovimentacao),e4(e.data.blocos),eG(e.data);let t=b.WR[null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(a=o.info)||void 0===a?void 0:a.status];el(t),eO({status:e.data.info.status<40,message:e.data.info.status>40?"Esse formul\xe1rio j\xe1 foi conclu\xeddo, n\xe3o \xe9 mais poss\xedvel alterar as informa\xe7\xf5es!":e.data.info.status<40?"Formul\xe1rio aberto para preenchimento!":40==e.data.info.status?"Este formul\xe1rio est\xe1 aguardando aprova\xe7\xe3o!":null,messageType:"info"}),e2()}).catch(e=>{console.log("\uD83D\uDE80 ~ error:",e),M(!1)})}catch(e){console.log("\uD83D\uDE80 ~ error:",e),M(!1)}},e3=()=>{eQ();let e=!1,o=[];null==ev||ev.forEach((a,t)=>{let r=a.tabela?"fields[".concat(t,"].").concat(a.tabela):"fields[".concat(t,"].").concat(a.nomeColuna),n=eW(r);1!==a.obrigatorio||n||(eU(r,{type:"manual",message:"Campo obrigat\xf3rio"}),o.push(null==a?void 0:a.nomeCampo),e=!0)}),et&&et.length>0&&et.forEach((a,t)=>{a.produtoAnexosDescricao.forEach((r,n)=>{1===r.obrigatorio&&0==r.anexos.length&&(eU("produtos[".concat(t,"].produtoAnexosDescricao[").concat(n,"].anexos"),{type:"manual",message:"Campo obrigat\xf3rio"}),o.push("Anexo: ".concat(null==a?void 0:a.nome," / ").concat(null==r?void 0:r.nome)),e=!0)})}),eb.forEach((a,t)=>{a.itens.forEach((a,r)=>{let n=eW("blocos[".concat(t,"].itens[").concat(r,"].resposta"));(null==a?void 0:a.obrigatorio)!==1||n||(eU("blocos[".concat(t,"].itens[").concat(r,"].resposta"),{type:"manual",message:"Campo obrigat\xe1rio"}),o.push(null==a?void 0:a.nome),e=!0),a.respostaConfig&&1==a.respostaConfig.anexo&&a.respostaConfig.anexosSolicitados.length>0&&a.respostaConfig.anexosSolicitados.forEach((n,s)=>{1==n.obrigatorio&&n.anexos&&0==n.anexos.length&&(eU("blocos[".concat(t,"].itens[").concat(r,"].respostaConfig.anexosSolicitados[").concat(s,"].anexos"),{type:"manual",message:"Campo obrigat\xe1rio"}),o.push("Anexo: ".concat(null==a?void 0:a.nome," / ").concat(null==n?void 0:n.nome)),e=!0)})})}),en&&en.length>0&&en.forEach((a,t)=>{a.itens.forEach((r,n)=>{1===r.obrigatorio&&0==r.anexos.length&&(eU("grupoAnexo[".concat(t,"].itens[").concat(n,"].anexos"),{type:"manual",message:"Campo obrigat\xe1rio"}),o.push("Anexo: ".concat(null==a?void 0:a.nome," / ").concat(null==r?void 0:r.nome)),e=!0)})}),eM({status:e,errors:o})},e7=async e=>{if(9===e.length){let o=e.replace(/[^0-9]/g,"");try{let a=await j.h.get("https://viacep.com.br/ws/".concat(o,"/json/"));a.data.localidade?(ev.forEach(async(e,o)=>{("logradouro"===e.nomeColuna||"bairro"===e.nomeColuna||"cidade"===e.nomeColuna||"estado"===e.nomeColuna)&&(await eL("fields[".concat(o,"].logradouro"),a.data.logradouro),await eL("fields[".concat(o,"].bairro"),a.data.bairro),await eL("fields[".concat(o,"].cidade"),a.data.localidade),await eL("fields[".concat(o,"].estado"),a.data.uf))}),F.ZP.success("Endere\xe7o encontrado!")):F.ZP.error("Endere\xe7o n\xe3o encontrado!")}catch(t){console.error(t)}}},e4=e=>{let o=!0;e.forEach(e=>{e.itens.forEach(e=>{e.respostaConfig&&1==e.respostaConfig.bloqueiaFormulario&&(o=!1)})}),Y(o)},e6=async e=>{e.conclusion=!0,await eK(e5)(e)},e9=(e,o,t)=>{let r=30==e?"Em preenchimento":40==e?"Conclu\xeddo":50==e?"Reprovado":60==e?"Aprovado parcialmente":70==e?"Aprovado":"Pendente",n={titulo:"Formul\xe1rio de Fornecedor ".concat(r),descricao:"O formul\xe1rio de Fornecedor #".concat(a," est\xe1 ").concat(r,"."),url:"/formularios/fornecedor/",urlID:a,tipoNotificacaoID:6,usuarioGeradorID:g.usuarioID,usuarioID:0,unidadeID:E.unidadeID,papelID:1};if(n&&(ed(n),o)){let s={titulo:"Fornecedor gerado",descricao:"O formul\xe1rio de Fornecedor #".concat(a," est\xe1 ").concat(r," e gerou uma n\xe3o conformidade."),url:"/formularios/fornecedor/nao-conformidade/",urlID:t,tipoNotificacaoID:5,usuarioGeradorID:g.usuarioID,usuarioID:0,unidadeID:E.unidadeID,papelID:1};ed(s)}},e5=async function(e){var o;let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];eR(),!0===t.conclusion&&(e.status=t.status,e.obsConclusao=t.obsConclusao);let r={form:e,auth:{usuarioID:g.usuarioID,profissionalID:null!==(o=g.profissionalID)&&void 0!==o?o:0,papelID:g.papelID,unidadeID:E.unidadeID}};try{"edit"==ez?(L(!0),await j.h.post("".concat(e_,"/updateData/").concat(a),r).then(o=>{F.ZP.success(b.OD.successUpdate),L(!1),e9(e.status,e.naoConformidade,null)})):"new"==ez?await j.h.post("".concat((0,b.g_)(e_),"/insertData"),r).then(e=>{eB.push("".concat((0,b.g_)(e_))),eV(e.data),F.ZP.success(b.OD.successNew)}):F.ZP.error(b.OD.error)}catch(n){console.log(n)}finally{eH()}},oe=async(e,o)=>{k(!0);let t=e.target.files;if(t&&t.length>0){var r;let n=new FormData;for(let s=0;s<t.length;s++)n.append("files[]",t[s]);n.append("usuarioID",g.usuarioID),n.append("unidadeID",E.unidadeID),n.append("grupoAnexoItemID",null!==(r=o.grupoAnexoItemID)&&void 0!==r?r:null),await j.h.post("".concat(e_,"/saveAnexo/").concat(a,"/grupo-anexo/").concat(g.usuarioID,"/").concat(eo.unidadeID),n).then(e=>{k(!1);let o=eW();e5(o)}).catch(e=>{var o,a,t;k(!1),F.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao atualizar anexo, tente novamente!")})}},oo=async(e,o)=>{T(!0);let t=e.target.files;if(t&&t.length>0){var r,n;let s=new FormData;for(let i=0;i<t.length;i++)s.append("files[]",t[i]);s.append("usuarioID",g.usuarioID),s.append("unidadeID",E.unidadeID),s.append("parRecebimentoMpModeloBlocoID",null!==(r=o.parRecebimentoMpModeloBlocoID)&&void 0!==r?r:null),s.append("itemOpcaoAnexoID",null!==(n=o.itemOpcaoAnexoID)&&void 0!==n?n:null),await j.h.post("".concat(e_,"/saveAnexo/").concat(a,"/item/").concat(g.usuarioID,"/").concat(eo.unidadeID),s).then(e=>{T(!1);let o=eW();e5(o)}).catch(e=>{var o,a,t;T(!1),F.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao atualizar anexo, tente novamente!!!!")})}},oa=async e=>{try{var o;let a=await j.h.post("/cadastros/item/getItemConfigs",{itemID:e.itemID,alternativaItemID:null!==(o=e.alternativa.id)&&void 0!==o?o:null}),t=eb.map(o=>({...o,itens:o.itens.map(o=>o.itemID==e.itemID?{...o,respostaConfig:{...a.data}}:o)}));ej(t)}catch(r){console.log("error",r)}},ot=async e=>{e&&await j.h.delete("".concat(e_,"/deleteAnexo/").concat(a,"/").concat(e.anexoID,"/").concat(eo.unidadeID,"/").concat(g.usuarioID,"/item")).then(e=>{let o=eW();e5(o)}).catch(e=>{var o,a,t;F.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao remover anexo, tente novamente!")})},or=e=>{let o=[...eb];o.map((o,a)=>{o.itens.map((o,t)=>{eL("blocos[".concat(a,"].itens[").concat(t,"].resposta"),o.alternativas[e])})}),ej(o=>o.map(o=>({...o,itens:o.itens.map(o=>({...o,resposta:o.alternativas[e]&&o.alternativas[e].id>0?o.alternativas[e]:null}))}))),console.log("id do fornecedorrr",eW("fieldsHeader.fornecedor.id")),H(!R);let a=eW();e5(a)};return(0,r.useEffect)(()=>{"edit"==ez&&e8()},[a,W]),(0,r.useEffect)(()=>{e3()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(y.Z,{show:P}),(0,t.jsx)("form",{onSubmit:eK(e5),children:(0,t.jsxs)(u.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[eC&&""!=eC.cabecalhoModelo&&(0,t.jsx)(p.Z,{children:(0,t.jsx)(m.Z,{children:(0,t.jsx)(x.Z,{variant:"subtitle1",sx:{mb:2},children:eC.cabecalhoModelo})})}),(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(B.Z,{title:"Excluir Formul\xe1rio",description:"Tem certeza que deseja exluir o formulario?",params:{route:"formularios/recebimento-mp/delete/".concat(a),messageSucceded:"Formul\xe1rio exclu\xeddo com sucesso!",MessageError:"Dado possui pend\xeancia!"},open:eN,handleClose:()=>ek(!1)}),(0,t.jsx)(m.Z,{children:eo&&(0,t.jsx)(u.Z,{display:"flex",flexDirection:"column",sx:{gap:1},children:(0,t.jsx)(A,{modeloID:eo.parRecebimentoMpModeloID,values:ep,fornecedor:$,setFornecedor:ee,fields:ev,getValues:eW,disabled:!eq.status,register:eT,errors:eY,setValue:eL,control:eJ,getAddressByCep:e7})})})]}),(0,t.jsx)(p.Z,{children:(0,t.jsx)(m.Z,{children:(0,t.jsx)(q,{recebimentoMpID:a,fornecedorID:eW("fieldsHeader.fornecedor.id"),getValues:eW,setValue:eL,register:eT,control:eJ,errors:eY},W)})}),eb&&eb.map((e,o)=>(0,t.jsx)(i.Z,{index:o,blockKey:"parRecebimentoMpModeloBlocoID",handleFileSelect:oo,setItemResposta:oa,handleRemoveAnexoItem:ot,setBlocos:ej,changeAllOptions:or,values:e,control:eJ,register:eT,setValue:eL,errors:null==eY?void 0:eY.blocos,disabled:!eq.status},R)),en&&en.map((e,o)=>(0,t.jsx)(c.Z,{values:{grupo:e,loadingFile:N,indexGrupo:o,handleFileSelect:oe,handleRemove:handleRemoveAnexoGroup,folder:"grupo-anexo",disabled:!eq.status,error:eY}},o)),eC&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(p.Z,{children:(0,t.jsx)(m.Z,{children:(0,t.jsx)(f.ZP,{container:!0,spacing:4,children:(0,t.jsx)(f.ZP,{item:!0,xs:12,md:12,children:(0,t.jsxs)(v.Z,{fullWidth:!0,children:[(0,t.jsx)(x.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Observa\xe7\xf5es (campo de uso exclusivo da validadora)"}),(0,t.jsx)(d.Z,{title:"Observa\xe7\xe3o (opcional)",name:"info.obs",multiline:!0,rows:4,value:eC.obs,disabled:!eq.status,control:eJ})]})})})})})}),eo&&ex&&!ex.concluded&&(0,t.jsx)(V,{modeloID:eo.parRecebimentoMpModeloID,values:ex,register:eT,disabled:!1,errors:eY,setValue:eL,control:eJ}),ex&&ex.concluded&&(0,t.jsx)(x.Z,{variant:"caption",children:"Conclu\xeddo por ".concat(ex.conclusion.profissional.nome," em ").concat(ex.conclusion.dataFim," ").concat(ex.conclusion.horaFim,".")}),eq.message&&(0,t.jsx)(h.Z,{severity:"warning",children:eq.message}),eZ&&(0,t.jsxs)(h.Z,{severity:"info",children:["\xdaltima movimenta\xe7\xe3o: Profissional ".concat(eZ.nome," do(a) ").concat(eZ.nomeFantasia," movimentou o formul\xe1rio de ").concat(eZ.statusAnterior," para ").concat(eZ.statusAtual," em ").concat(eZ.dataHora,"."),eZ.observacao&&(0,t.jsxs)("p",{children:[(0,t.jsx)("br",{}),'Mensagem: "',eZ.observacao,'"']})]}),ec&&(0,t.jsx)(l.Z,{title:"Hist\xf3rico do Formul\xe1rio",text:"Listagem do hist\xf3rico das movimenta\xe7\xf5es do formul\xe1rio ".concat(a," do Recebimento de MP."),id:a,parFormularioID:2,formStatus:eC.status,hasFormPending:K,canChangeStatus:!K&&eC.status>30,openModal:ec,handleClose:()=>eu(!1),btnCancel:!0,btnConfirm:!0,handleSubmit:changeFormStatus}),(0,t.jsx)(w.Z,{openModal:eF,handleClose(){eS(!1),X(!1)},title:"Concluir Formul\xe1rio",text:"Deseja realmente concluir este formul\xe1rio?",info:eC,canChange:!K,register:eT,setValue:eL,getValues:eW,btnCancel:!0,btnConfirm:!0,btnConfirmColor:"primary",conclusionForm:e6,listErrors:eP,canApprove:U})]})})]})};var _=z}}]);