"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5629],{45629:function(e,n,t){t.d(n,{Z:function(){return W}});var s=t(85893),a=t(11163),o=t.n(a),r=t(67294),i=t(83830),l=t(60664),c=t(21609),d=t(49837),u=t(91359),m=t(79072),x=t(59742),h=t(75084),p=t(87536),g=t(86501),v=t(86887),f=t(46749),j=t(40039),Z=t(50287),b=t(29308),w=t(88475);let C=e=>{let{data:n,getValues:t,control:a,name:o,errors:r,removeItem:i}=e;return t("cargosFuncoes").map((e,n)=>{var t,o,l,c,d,u,m,x;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Z.Z,{xs:12,md:2,required:!0,title:"Data",value:e.data,name:"cargosFuncoes[".concat(n,"].data"),control:a,errors:null==r?void 0:null===(t=r.cargosFuncoes)||void 0===t?void 0:null===(o=t[n])||void 0===o?void 0:o.data}),(0,s.jsx)(b.Z,{xs:12,md:4,required:!0,title:"Forma\xe7\xe3o / Cargo",name:"cargosFuncoes.[".concat(n,"].formacaoCargo"),control:a,errors:null==r?void 0:null===(l=r.cargosFuncoes)||void 0===l?void 0:null===(c=l[n])||void 0===c?void 0:c.formacaoCargo}),(0,s.jsx)(b.Z,{xs:12,md:3,title:"Conselho",name:"cargosFuncoes.[".concat(n,"].conselho"),control:a,errors:null==r?void 0:null===(d=r.cargosFuncoes)||void 0===d?void 0:null===(u=d[n])||void 0===u?void 0:u.conselho}),(0,s.jsx)(Z.Z,{xs:12,md:2,title:"Data Inativa\xe7\xe3o",value:e.dataInativacao,name:"cargosFuncoes[".concat(n,"].dataInativacao"),control:a,errors:null==r?void 0:null===(m=r.cargosFuncoes)||void 0===m?void 0:null===(x=m[n])||void 0===x?void 0:x.dataInativacao}),(0,s.jsx)(w.Z,{xs:4,md:1,title:"Remover",index:n,removeItem:i,item:e,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois possui anexo vinculado a ele"})]})})};var P=t(29630),y=t(9041),F=t(67836),I=t(80562),D=t(3893),S=t(82747),V=t(19604);let k=e=>{var n,t,a,o,i,d;let{control:u,setError:x,errors:h,data:p,register:g,watch:v,getValues:f,setValue:j,userNewVerifyCPF:w,setUserNewVerifyCPF:C,userExistVerifyCPF:k,setUserExistVerifyCPF:E,resetFields:A,routeVeryfyCNP:N}=e,[M,_]=(0,r.useState)(null),[U,q]=(0,r.useState)({showPassword:!1,showConfirmPassword:!1}),z=()=>{q({...U,showPassword:!U.showPassword})},R=e=>{e.preventDefault()},W=()=>{q({...U,showConfirmPassword:!U.showConfirmPassword})},L=e=>{e.preventDefault()},O=()=>{let e=f("fields").cpf;e&&e.length<14&&(j("isUsuario",!1),A()),(0,S.sw)(e)?(x("fields.cpf",null),v()):x("fields.cpf",{type:"manual",message:"CPF inv\xe1lido"}),v()},T=async()=>{A();let e=f("isUsuario");if(!e){let n={cpf:f("fields").cpf};try{await l.h.post(N,n),C(!0)}catch(t){409==t.response.status?E(!0):console.log(t)}}},$=()=>{T()};return p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{md:12,title:"Nome",name:"fields.nome",required:!0,control:u,errors:null==h?void 0:null===(n=h.fields)||void 0===n?void 0:n.nome}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"CPF",mask:"cpf",name:"fields.cpf",required:null!=k&&k,control:u,errors:null==h?void 0:null===(t=h.fields)||void 0===t?void 0:t.cpf,onChange:O}),(0,s.jsx)(Z.Z,{xs:12,md:4,required:!0,title:"Data de Nascimento",value:null==p?void 0:null===(a=p.fields)||void 0===a?void 0:a.dataNascimento,name:"fields.dataNascimento",control:u,errors:null==h?void 0:null===(o=h.fields)||void 0===o?void 0:o.dataNascimento}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"Email",type:"email",required:null!=k&&k,name:"fields.email",control:u,errors:null==h?void 0:null===(i=h.fields)||void 0===i?void 0:i.email,onChange:O}),(0,s.jsx)(b.Z,{xs:12,md:3,title:"Matricula",name:"fields.matricula",control:u,errors:null==h?void 0:null===(d=h.fields)||void 0===d?void 0:d.matricula}),(0,s.jsx)(D.Z,{xs:12,md:3,onClick:$,title:"Usu\xe1rio do sistema",name:"isUsuario",value:p.fields.usuarioID>0,register:g,disabled:!(f("fields").email&&(0,S.sw)(f("fields").cpf)),helpText:"Preencha o CPF(Deve ser um CPF v\xe1lido) e email para habilitar essa fun\xe7\xe3o."}),k&&(0,s.jsx)(m.ZP,{item:!0,xs:12,md:6,children:(0,s.jsx)(V.Z,{severity:"warning",sx:{mt:2},children:(0,s.jsx)(P.Z,{variant:"body2",children:"Esse profissional j\xe1 possui acesso ao sistema. A senha n\xe3o ser\xe1 alterada!"})})}),w&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.ZP,{item:!0,xs:12,sm:3,children:(0,s.jsx)(F.Z,{fullWidth:!0,label:"Senha",id:"input-password",variant:"outlined",size:"small",type:U.showPassword?"text":"password",name:"senha",error:!!h.senha,helperText:h.senha&&h.senha.message,InputProps:{endAdornment:(0,s.jsx)(y.Z,{position:"end",children:(0,s.jsx)(I.Z,{edge:"end",onClick:z,onMouseDown:R,children:(0,s.jsx)(c.Z,{icon:U.showPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})})},...g("senha",{minLength:{value:4,message:"Senha deve ter pelo menos 4 caracteres"}})})}),(0,s.jsx)(m.ZP,{item:!0,xs:12,sm:3,children:(0,s.jsx)(F.Z,{fullWidth:!0,label:"Confirme a senha",id:"input-confirm-password",variant:"outlined",size:"small",type:U.showConfirmPassword?"text":"password",name:"confirmaSenha",error:!!h.confirmaSenha,helperText:h.confirmaSenha&&h.confirmaSenha.message,InputProps:{endAdornment:(0,s.jsx)(y.Z,{position:"end",children:(0,s.jsx)(I.Z,{edge:"end",onClick:W,onMouseDown:L,children:(0,s.jsx)(c.Z,{icon:U.showConfirmPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})})},onChange(e){_(e.target.value)},...g("confirmaSenha",{validate:e=>e===v("senha")||"As senhas n\xe3o coincidem"})})})]})]})};var E=t(76992),A=t(29618),N=t(47028),M=t(66136),_=t(67569);let U=e=>{let{submenu:n,indexMenuGroup:t,indexMenu:a,indexSubmenu:o,register:r,setValue:i}=e;return(0,s.jsxs)(m.ZP,{container:!0,spacing:5,sx:{my:2},children:[(0,s.jsx)(m.ZP,{item:!0,xs:4,md:8,children:(0,s.jsx)(P.Z,{variant:"subtitle1",children:n.nome})}),(0,s.jsx)("input",{type:"hidden",value:n.rota,name:"menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].rota"),...r("menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].rota"))}),(0,s.jsx)(_.Z,{xs:2,md:1,name:"menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].ler"),value:n.ler,register:r,setValue:i,edit:"menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].edit")}),(0,s.jsx)(_.Z,{xs:2,md:1,name:"menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].inserir"),value:n.inserir,register:r,setValue:i,edit:"menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].edit")}),(0,s.jsx)(_.Z,{xs:2,md:1,name:"menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].editar"),value:n.editar,register:r,setValue:i,edit:"menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].edit")}),(0,s.jsx)(_.Z,{xs:2,md:1,name:"menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].excluir"),value:n.excluir,register:r,setValue:i,edit:"menu[".concat(t,"].menu[").concat(a,"].submenu[").concat(o,"].edit")})]})},q=e=>{let{menu:n,indexMenuGroup:t,indexMenu:a,expandedItem:o,handleChangeItem:r,register:i,setValue:l}=e;return n.rota?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(m.ZP,{container:!0,spacing:5,sx:{my:2},children:[(0,s.jsx)(m.ZP,{item:!0,xs:4,md:8,children:(0,s.jsx)(P.Z,{variant:"subtitle1",children:n.nome})}),(0,s.jsx)("input",{type:"hidden",value:n.rota,name:"menu[".concat(t,"].menu[").concat(a,"].rota"),...i("menu[".concat(t,"].menu[").concat(a,"].rota"))}),(0,s.jsx)(_.Z,{xs:2,md:1,name:"menu[".concat(t,"].menu[").concat(a,"].ler"),value:n.ler,register:i,setValue:l,edit:"menu[".concat(t,"].menu[").concat(a,"].edit")}),(0,s.jsx)(_.Z,{xs:2,md:1,name:"menu[".concat(t,"].menu[").concat(a,"].inserir"),value:n.inserir,register:i,setValue:l,edit:"menu[".concat(t,"].menu[").concat(a,"].edit")}),(0,s.jsx)(_.Z,{xs:2,md:1,name:"menu[".concat(t,"].menu[").concat(a,"].editar"),value:n.editar,register:i,setValue:l,edit:"menu[".concat(t,"].menu[").concat(a,"].edit")}),(0,s.jsx)(_.Z,{xs:2,md:1,name:"menu[".concat(t,"].menu[").concat(a,"].excluir"),value:n.excluir,register:i,setValue:l,edit:"menu[".concat(t,"].menu[").concat(a,"].edit")})]})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(E.Z,{expanded:o==="item-".concat(t,"-").concat(a),onChange:r("item-".concat(t,"-").concat(a)),sx:{border:"1px solid #e0e0e0",boxShadow:"none"},children:[(0,s.jsx)(A.Z,{id:"controlled-panel-header-1","aria-controls":"controlled-panel-content-1",expandIcon:(0,s.jsx)(c.Z,{icon:"mdi:chevron-down"}),sx:{display:"flex",alignItems:"center"},children:(0,s.jsx)(P.Z,{children:n.nome})}),(0,s.jsx)(N.Z,{children:n.submenu&&n.submenu.map((e,n)=>(0,s.jsx)(U,{submenu:e,indexMenuGroup:t,indexMenu:a,indexSubmenu:n,register:i,setValue:l},n))})]})})},z=e=>{let{register:n,setValue:t,menu:a,control:o}=e,{settings:i}=(0,r.useContext)(M.J6),[l,d]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!1),h=e=>(n,t)=>{x(!!t&&e)},p=i.mode;return(0,s.jsxs)(E.Z,{expanded:"panel"===l,onChange(e,n){d(!!n&&"panel")},sx:{border:"".concat("dark"===p?"1px solid #65656E":"1px solid #C5C6CD"),boxShadow:"none"},children:[(0,s.jsx)(A.Z,{id:"controlled-panel-header-1","aria-controls":"controlled-panel-content-1",expandIcon:(0,s.jsx)(c.Z,{icon:"mdi:chevron-down"}),sx:{display:"flex",alignItems:"center"},children:(0,s.jsx)(P.Z,{children:"Permiss\xf5es de Acesso"})}),(0,s.jsx)(N.Z,{children:a&&a.map((e,a)=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.ZP,{container:!0,spacing:4,sx:{my:2},children:[(0,s.jsx)(m.ZP,{item:!0,xs:4,md:8,children:(0,s.jsx)(P.Z,{variant:"body2",children:e.nome})}),(0,s.jsx)(m.ZP,{item:!0,xs:2,md:1,children:(0,s.jsx)(P.Z,{variant:"body2",sx:{textAlign:"center"},children:"Ler"})}),(0,s.jsx)(m.ZP,{item:!0,xs:2,md:1,children:(0,s.jsx)(P.Z,{variant:"body2",sx:{textAlign:"center"},children:"Inserir"})}),(0,s.jsx)(m.ZP,{item:!0,xs:2,md:1,children:(0,s.jsx)(P.Z,{variant:"body2",sx:{textAlign:"center"},children:"Editar"})}),(0,s.jsx)(m.ZP,{item:!0,xs:2,md:1,children:(0,s.jsx)(P.Z,{variant:"body2",sx:{textAlign:"center"},children:"Excluir"})})]}),e.menu&&e.menu.map((e,o)=>(0,s.jsx)(q,{menu:e,indexMenuGroup:a,expandedItem:u,handleChangeItem:h,indexMenu:o,register:n,setValue:t},o))]}))})]})},R=e=>{let{id:n}=e,{setId:t}=(0,r.useContext)(i.X),{user:a,loggedUnity:Z}=(0,r.useContext)(j.V),[b,w]=(0,r.useState)(null),[P,y]=(0,r.useState)(!1),[F,I]=(0,r.useState)([]),[D,S]=(0,r.useState)(!1),[V,E]=(0,r.useState)(!1),[A,N]=(0,r.useState)(!1),M=o(),_=n&&n>0?"edit":"new",U=M.pathname,q="edit"==_?"".concat(U,"/verifyCPF"):"".concat((0,f.g_)(U),"/verifyCPF"),{control:R,handleSubmit:W,reset:L,setError:O,setValue:T,getValues:$,watch:G,register:Y,formState:{errors:J}}=(0,p.cI)({}),Q=()=>{E(!1),S(!1),N(!1)},X=async e=>{let s={...e,fields:{...e.fields,unidadeID:Z.unidadeID},removedItems:F};try{if("new"===_){let a=await l.h.post("".concat((0,f.g_)(U),"/new/insertData"),s);M.push("".concat((0,f.g_)(U))),t(a.data),g.ZP.success(f.OD.successNew)}else"edit"===_&&(await l.h.post("".concat(U,"/updateData/").concat(n),s),g.ZP.success(f.OD.successUpdate));Q(),B()}catch(o){o.response&&409===o.response.status?g.ZP.error(f.OD.errorRepeated):console.log(o)}},B=async()=>{let e="new"===_?"".concat((0,f.g_)(U),"/new/getData"):"".concat(U,"/getData/").concat(n,"?unidadeID=").concat(Z.unidadeID,"&papelID=").concat(Z.papelID,"&admin=").concat(a.admin);try{let t=await l.h.post(e);L(t.data),console.log("\uD83D\uDE80 ~ response.data:",t.data),w(t.data)}catch(s){console.log(s)}},H=()=>{let e=new Date,n="".concat(String(e.getMonth()+1).padStart(2,"0"),"/").concat(String(e.getDate()).padStart(2,"0"),"/").concat(e.getFullYear()),t=[...$("cargosFuncoes"),{conselho:"",data:n,dataInativacao:"",formacaoCargo:"",status:!0}];T("cargosFuncoes",t),y(!P)},K=(e,n)=>{if(1===b.cargosFuncoes.length){g.ZP.error("\xc9 necess\xe1rio ter pelo menos um Cargo/Fun\xe7\xe3o!");return}e.id&&I([...F,e.id]);let t=$("cargosFuncoes").filter((e,t)=>t!==n);T("cargosFuncoes",t),y(!P)};return(0,r.useEffect)(()=>{B()},[n]),(0,r.useEffect)(()=>{console.log("entra akiii"),b&&b.fields.usuarioID>0&&(console.log("entra akiii tmbm"),N(!0))},[b]),console.log("user exist default",A),console.log("userExist nEW",V),b&&(0,s.jsx)("form",{onSubmit:W(X),children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(v.Z,{btnCancel:!0,btnSave:!0,btnNew:!0,handleSubmit:()=>W(X),btnDelete:"edit"===_,onclickDelete:()=>setOpen(!0),type:_}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(m.ZP,{container:!0,spacing:5,children:(0,s.jsx)(k,{data:b,control:R,errors:J,register:Y,watch:G,getValues:$,setError:O,setValue:T,userNewVerifyCPF:V,setUserNewVerifyCPF:E,userExistVerifyCPF:D,setUserExistVerifyCPF:S,resetFields:Q,routeVeryfyCNP:q})})})]}),(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(x.Z,{title:"Cargos / Fun\xe7\xf5es"}),(0,s.jsx)(u.Z,{children:(0,s.jsxs)(m.ZP,{container:!0,spacing:5,children:[b&&(0,s.jsx)(C,{getValues:$,control:R,errors:J,removeItem:K},P),(0,s.jsx)(h.Z,{variant:"outlined",color:"primary",sx:{mt:4,ml:4},startIcon:(0,s.jsx)(c.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){H()},children:"Inserir item"})]})})]}),(A||V)&&(0,s.jsxs)(d.Z,{children:[(0,s.jsx)(x.Z,{title:"Permiss\xf5es"}),(0,s.jsx)(u.Z,{children:(0,s.jsx)(z,{menu:b.menu,control:R,register:Y,setValue:T})})]})]})})};var W=R},3893:function(e,n,t){var s=t(85893),a=t(79072),o=t(61953),r=t(22841),i=t(75158),l=t(53934);let c=e=>{let{xs:n,md:t,title:c,index:d,name:u,typePage:m,value:x,disabled:h,register:p,onClick:g,helpText:v,helpTextPosition:f}=e;return(0,s.jsx)(a.ZP,{item:!0,xs:n,md:t,children:(0,s.jsx)(o.Z,{display:"flex",alignItems:"center",justifyContent:"start",sx:{gap:0},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.Z,{control:(0,s.jsx)(i.Z,{name:u,onClick:g,...p(u),defaultChecked:x,disabled:h}),label:c,size:"small",sx:{marginRight:"4px","&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}}),v&&(0,s.jsx)(l.Z,{text:v,position:null!=f?f:"top"})]})})})};n.Z=c},50287:function(e,n,t){var s=t(85893),a=t(79072),o=t(55343),r=t(67836),i=t(87536);let l=e=>{let{xs:n,md:t,title:l,isRequired:c,disabled:d,type:u,value:m,name:x,setDateFormat:h,typeValidation:p,daysValidation:g,dateStatus:v,errors:f,control:j}=e,Z=e=>{let n=new Date(e),t=n.getDate().toString().padStart(2,"0"),s=(n.getMonth()+1).toString().padStart(2,"0"),a=n.getFullYear();return"".concat(a,"-").concat(s,"-").concat(t)};return(0,s.jsx)(a.ZP,{item:!0,xs:n,md:t,sx:{my:1},children:(0,s.jsx)(o.Z,{fullWidth:!0,children:(0,s.jsx)(i.Qr,{name:x,control:j,render(e){var n,t;let{field:a}=e;return(0,s.jsx)(r.Z,{type:"date",size:"small",label:l,disabled:!!d,defaultValue:m?Z(m):"",onChange(e){a.onChange(e),p&&h(p,u,e.target.value,g)},variant:"outlined",fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{min:null==v?void 0:null===(n=v[u])||void 0===n?void 0:n.dataIni,max:null==v?void 0:null===(t=v[u])||void 0===t?void 0:t.dataFim}})}})})})};n.Z=l},88475:function(e,n,t){var s=t(85893),a=t(79072),o=t(61953),r=t(29630),i=t(72389),l=t(80562),c=t(21609);let d=e=>{let{xs:n,md:t,icon:d,color:u,title:m,removeItem:x,item:h,pending:p,index:g,textSuccess:v,textError:f}=e;return v=v||"Remover este item",f=f||"Este item n\xe3o pode ser removido pois possui cadastros vinculados a ele",(0,s.jsx)(a.ZP,{item:!0,xs:n,md:t,children:(0,s.jsxs)(o.Z,{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,s.jsx)(r.Z,{variant:"caption",children:m}),(0,s.jsx)(i.Z,{title:1==p?f:v,children:(0,s.jsx)(l.Z,{color:null!=u?u:"error",size:"small",onClick(){1!=p&&x(h,g)},sx:{opacity:1==p?.5:1,cursor:1==p?"default":"pointer"},children:(0,s.jsx)(c.Z,{icon:null!=d?d:"tabler:trash-filled"})})})]})})};n.Z=d},82747:function(e,n,t){function s(e){if(14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let n=e.length-2,t=e.substring(0,n),s=e.substring(n),a=0,o=n-7;for(let r=n;r>=1;r--)a+=t.charAt(n-r)*o--,o<2&&(o=9);let i=a%11<2?0:11-a%11;if(i!=s.charAt(0))return!1;n+=1,t=e.substring(0,n),a=0,o=n-7;for(let l=n;l>=1;l--)a+=t.charAt(n-l)*o--,o<2&&(o=9);return(i=a%11<2?0:11-a%11)==s.charAt(1)}function a(e){let n;if(11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let t=0;for(let s=1;s<=9;s++)t+=parseInt(e.substring(s-1,s))*(11-s);if((10==(n=10*t%11)||11===n)&&(n=0),n!==parseInt(e.substring(9,10)))return!1;t=0;for(let a=1;a<=10;a++)t+=parseInt(e.substring(a-1,a))*(12-a);return(10==(n=10*t%11)||11===n)&&(n=0),n===parseInt(e.substring(10,11))}function o(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}t.d(n,{dI:function(){return o},sw:function(){return a},zk:function(){return s}})}}]);