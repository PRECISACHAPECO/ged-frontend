"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{80377:function(e,a,l){l.d(a,{Z:function(){return P}});var t=l(85893),o=l(75084),n=l(1890),s=l(77745),i=l(95398),r=l(76779),d=l(44642),c=l(40039);l(21609);var u=l(19604),x=l(29630),m=l(67294),v=l(79072),p=l(55343),h=l(61953),j=l(41470),b=l(22841),Z=l(15497),f=l(67836);l(3893);var g=l(75158);let C=e=>{let{xs:a,md:l,title:o,name:n,value:s,valueChecked:i,register:r}=e,[d,c]=(0,m.useState)(!0),u=()=>{s!=i&&c(!d)};return(0,t.jsx)(v.ZP,{item:!0,xs:a,md:l,children:(0,t.jsx)(h.Z,{display:"flex",flexDirection:"column",alignItems:"start",children:(0,t.jsx)(b.Z,{control:(0,t.jsx)(g.Z,{size:"small",name:n,...r(n),checked:d||s==i,onChange:u}),label:o,sx:{"&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}})})})},y=e=>{let{title:a,name:l,value:o,papelID:n,register:s,setValue:i,setResult:r,options:d}=e;return console.log("\uD83D\uDE80 ~ Result:",l),(0,t.jsxs)(v.ZP,{container:!0,spacing:2,sx:{mt:4},children:[n&&1==n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.ZP,{item:!0,xs:12,md:12,children:(0,t.jsxs)(p.Z,{fullWidth:!0,children:[(0,t.jsx)(x.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:a}),(0,t.jsx)(h.Z,{display:"flex",gap:8,children:(0,t.jsx)(j.Z,{row:!0,"aria-label":"colored",name:"colored",value:o.status,onChange(e,a){r({...o,status:a})},children:d&&d.map((e,a)=>(0,t.jsx)(b.Z,{value:e.value,name:l,control:(0,t.jsx)(Z.Z,{color:e.color}),label:e.label}))})})]})}),o.status&&(50==o.status||60==o.status)&&(0,t.jsx)(C,{xs:12,md:12,title:"Gerar n\xe3o conformidade",name:"naoConformidade",value:o.status,valueChecked:50,register:s})]}),(0,t.jsx)(v.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(p.Z,{fullWidth:!0,children:(0,t.jsx)(f.Z,{label:"Observa\xe7\xe3o de conclus\xe3o (opcional)",placeholder:"Observa\xe7\xe3o de conclus\xe3o (opcional)",defaultValue:o.obsConclusao,multiline:!0,rows:4,onChange(e,a){r({...o,obsConclusao:e.target.value})}})})})]})},D=e=>{let{title:a,text:l,handleClose:v,openModal:p,conclusionForm:h,info:j,canChange:b,btnCancel:Z,btnConfirm:f,register:g,setValue:C,listErrors:D}=e,{user:P,loggedUnity:I}=(0,m.useContext)(c.V),[w,S]=(0,m.useState)({});return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(n.Z,{open:p,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,onClose(e,a){"backdropClick"!==a&&v()},children:[(0,t.jsx)(s.Z,{id:"form-dialog-title",children:a}),(0,t.jsx)(i.Z,{children:(0,t.jsx)(d.Z,{sx:{mb:3},children:b?(0,t.jsxs)(t.Fragment,{children:[l,D&&D.status&&(0,t.jsxs)(u.Z,{variant:"outlined",severity:"error",sx:{mt:2},children:["Por favor, verifique os campos abaixo:",(0,t.jsx)(x.Z,{variant:"subtitle1",color:"error",sx:{mt:2},children:D.errors.map((e,a)=>(0,t.jsxs)(x.Z,{variant:"body2",color:"error",children:["- ",e]},a))})]}),D&&!D.status&&(0,t.jsx)(u.Z,{severity:"warning",sx:{mt:2},children:"Ap\xf3s concluir o formul\xe1rio, o mesmo n\xe3o poder\xe1 mais ser alterado!"}),(0,t.jsx)(y,{title:1==P.papelID?"Resultado do Processo":"Observa\xe7\xe3o",name:"status",value:w,register:g,setValue:C,setResult:S,papelID:P.papelID,options:[{value:70,color:"success",label:"Aprovado"},{value:60,color:"warning",label:"Aprovado Parcial"},{value:50,color:"error",label:"Reprovado"}]})]}):(0,t.jsx)(u.Z,{severity:"warning",sx:{mb:0},children:"O Status n\xe3o pode mais ser alterado pois j\xe1 est\xe1 sendo utilizado em outro formul\xe1rio!"})})}),(0,t.jsxs)(r.Z,{className:"dialog-actions-dense",children:[Z&&(0,t.jsx)(o.Z,{variant:"outlined",color:"primary",onClick:v,children:"Fechar"}),f&&b&&(0,t.jsx)(o.Z,{variant:"contained",disabled:D&&D.status||1==P.papelID&&!w.status,color:"primary",onClick(){v(),h(w)},children:"Concluir"})]})]})})};var P=D},34282:function(e,a,l){var t=l(85893),o=l(67294),n=l(75084),s=l(1890),i=l(77745),r=l(95398),d=l(76779),c=l(44642),u=l(21609),x=l(60664),m=l(79072),v=l(55343),p=l(35966),h=l(67836),j=l(19604),b=l(61953),Z=l(46749),f=l(40039),g=l(7071),C=l(67074),y=l(17494),D=l(87413),P=l(29630),I=l(72162),w=l(9601),S=l(51221),W=l(36599),k=l(45061);let A=(0,C.ZP)(W.Z)({paddingLeft:0,paddingRight:0,"& .MuiTimelineItem-root":{width:"100%","&:before":{display:"none"}}}),V=e=>{var a;let{id:l,parFormularioID:C,formStatus:W,hasFormPending:V,title:F,text:R,handleClose:E,openModal:O,handleSubmit:z,btnCancel:M,btnConfirm:N,canChangeStatus:_,btnConfirmColor:L}=e,[H,B]=(0,o.useState)(!1),{user:K,loggedUnity:T}=(0,o.useContext)(f.V),[q,G]=(0,o.useState)(null),[J,Q]=(0,o.useState)(""),[U,X]=(0,o.useState)(!1);console.log("selectedStatus: ",q);let Y=async()=>{try{await x.h.post("/formularios/fornecedor/getMovementHistory/".concat(l),{parFormularioID:C}).then(e=>{B(e.data)})}catch(e){console.log(e)}},$=[];for(let ee in Z.WR)30==parseInt(ee)&&parseInt(ee)!=W&&$.push({id:parseInt(ee),nome:Z.WR[ee].title});return(0,o.useEffect)(()=>{Y()},[U]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Z,{open:O,onClose:E,"aria-labelledby":"form-dialog-title",children:[(0,t.jsx)(i.Z,{id:"form-dialog-title",children:F}),(0,t.jsxs)(r.Z,{children:[(0,t.jsx)(c.Z,{sx:{mb:3},children:R}),_&&(0,t.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(v.Z,{fullWidth:!0,children:(0,t.jsx)(p.Z,{options:$,defaultValue:$.find(e=>e.id===q),id:"autocomplete-outlined",getOptionLabel:e=>e.nome,onChange(e,a){G(null==a?void 0:a.id)},renderInput:e=>(0,t.jsx)(h.Z,{...e,name:"formulario.status",label:"Alterar Status do Formul\xe1rio",placeholder:"Alterar Status do Formul\xe1rio"})})})}),q&&q>0&&(0,t.jsx)(m.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(v.Z,{fullWidth:!0,children:(0,t.jsx)(h.Z,{id:"outlined-multiline-static",label:"Observa\xe7\xe3o",multiline:!0,rows:4,placeholder:"Observa\xe7\xe3o",variant:"outlined",onChange:e=>Q(e.target.value)})})})]}),K&&1==K.papelID&&V&&(0,t.jsx)(j.Z,{severity:"warning",sx:{mb:4},children:"O Status n\xe3o pode mais ser alterado pois j\xe1 est\xe1 sendo utilizado em outro formul\xe1rio!"}),(0,t.jsx)(b.Z,{children:(0,t.jsx)(A,{children:H&&H.length>0&&H.map((e,a)=>(0,t.jsxs)(D.Z,{children:[(0,t.jsxs)(w.Z,{children:[(0,t.jsx)(y.Z,{color:Z.WR[e.statusAtual].color}),(0,t.jsx)(S.Z,{})]}),(0,t.jsxs)(I.Z,{sx:{"& svg":{verticalAlign:"bottom",mx:4}},children:[(0,t.jsxs)(b.Z,{sx:{mb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsxs)(P.Z,{variant:"body2",sx:{mr:2,fontWeight:600,color:"text.primary"},children:[e.data+" - "+e.hora+" ",0==a&&(0,t.jsx)(g.Z,{size:"small",skin:"light",color:Z.WR[e.statusAtual].color,label:"Atual",sx:{"& .MuiChip-label":{textTransform:"capitalize"}}})]}),(0,t.jsx)(P.Z,{variant:"caption",children:e.usuario})]}),(0,t.jsxs)(b.Z,{sx:{mb:2,display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsxs)(P.Z,{variant:"body2",sx:{color:"text.primary"},children:[(0,t.jsx)("span",{children:Z.WR[e.statusAnterior].title}),(0,t.jsx)(u.Z,{icon:"mdi:arrow-right",fontSize:20,style:{display:"inline-block"}}),(0,t.jsx)("span",{children:Z.WR[e.statusAtual].title})]}),(0,t.jsx)(P.Z,{variant:"caption",children:e.unidade})]}),null!=e.observacao&&(0,t.jsx)(b.Z,{children:(0,t.jsx)(P.Z,{variant:"caption",children:e.observacao})})]})]}))})})]}),(0,t.jsxs)(d.Z,{className:"dialog-actions-dense",children:[M&&(0,t.jsx)(n.Z,{variant:"outlined",color:"primary",onClick:E,children:"Fechar"}),N&&K&&1==K.papelID&&!V&&_&&(0,t.jsx)(n.Z,{variant:"contained",color:"primary",onClick:()=>1==C?X(!0):z(q,J),disabled:!q,children:"Confirmar"})]})]}),(0,t.jsx)(k.Z,{openModal:U,handleClose:()=>X(!1),title:"Confirmar Altera\xe7\xe3o",text:'Deseja realmente alterar o status do formul\xe1rio para "'.concat(null===(a=Z.WR[q])||void 0===a?void 0:a.title,'" ? O mesmo ficar\xe1 dispon\xedvel para a edi\xe7\xe3o do Fornecedor novamente.'),btnCancel:!0,btnConfirm:!0,btnConfirmColor:"primary",handleSubmit(){z(q,J),X(!1),G(null)}})]})};a.Z=V},79139:function(e,a,l){l.d(a,{Z:function(){return h}});var t=l(85893),o=l(49837),n=l(91359),s=l(79072),i=l(29630),r=l(67294),d=l(55343),c=l(46749),u=l(29308),x=l(84220),m=l(50287);let v=e=>{var a,l,o,n,i,v,p,h,j,b,Z,f;let{blockIndex:g,index:C,values:y,register:D,control:P,errors:I,setValue:w,disabled:S}=e,[W,k]=(0,r.useState)({}),A=(e,a,l,t)=>{console.log("\uD83D\uDE80 ~ type, name, value, numDays:",e,a,l,t);let o=new Date(l),n=(0,c.HD)(e,o,t);console.log("status",n),k(e=>({...e,[a]:n}))};return(0,r.useEffect)(()=>{"Data"===y.alternativa&&A("dataPassado",null,y.resposta,365)},[]),(0,t.jsxs)(s.ZP,{index:C,container:!0,spacing:4,sx:{mb:4,display:"flex",alignItems:"center"},children:[(0,t.jsx)("input",{type:"hidden",name:"blocos[".concat(g,"].itens[").concat(C,"].itemID"),defaultValue:y.itemID,...D("blocos[".concat(g,"].itens[").concat(C,"].itemID"))}),(0,t.jsx)(s.ZP,{item:!0,xs:12,md:6,children:y.ordem+" - "+y.nome}),(0,t.jsxs)(s.ZP,{item:!0,xs:12,md:3,children:[(0,t.jsx)("input",{type:"hidden",name:"blocos[".concat(g,"].itens[").concat(C,"].tipoAlternativa"),defaultValue:y.alternativa,...D("blocos[".concat(g,"].itens[").concat(C,"].tipoAlternativa"))}),(0,t.jsxs)(d.Z,{fullWidth:!0,children:[y&&y.alternativas&&y.alternativas.length>1&&(0,t.jsx)(x.Z,{title:"Selecione uma resposta",options:y.alternativas,name:"blocos[".concat(g,"].itens[").concat(C,"].resposta"),idName:"alternativaID",value:y.resposta,disabled:S,control:P,register:D,setValue:w,errors:null===(o=null==I?void 0:null===(a=I.blocos)||void 0===a?void 0:null===(l=a[g])||void 0===l?void 0:l.itens[C])||void 0===o?void 0:o.resposta}),0==y.alternativas.length&&"Data"==y.alternativa&&(0,t.jsx)(m.Z,{xs:12,md:12,title:"Data da avalia\xe7\xe3o",disabled:S,value:y.resposta,type:null,name:"blocos[".concat(g,"].itens[").concat(C,"].resposta"),errors:null===(v=null==I?void 0:null===(n=I.blocos)||void 0===n?void 0:null===(i=n[g])||void 0===i?void 0:i.itens[C])||void 0===v?void 0:v.resposta,control:P,setDateFormat:A,typeValidation:"dataPassado",daysValidation:365,dateStatus:W,register:D}),0==y.alternativas.length&&"Dissertativa"==y.alternativa&&(0,t.jsx)(u.Z,{title:"Descreva a resposta",name:"blocos[".concat(g,"].itens[").concat(C,"].resposta"),value:y.resposta,multiline:!0,disabled:S,control:P,errors:null===(j=null==I?void 0:null===(p=I.blocos)||void 0===p?void 0:null===(h=p[g])||void 0===h?void 0:h.itens[C])||void 0===j?void 0:j.resposta})]})]}),0==y.alternativas.length&&"Dissertativa longa"==y.alternativa&&(0,t.jsx)(s.ZP,{item:!0,xs:12,md:12,sx:{pt:0},children:(0,t.jsx)(d.Z,{fullWidth:!0,children:(0,t.jsx)(u.Z,{title:"Descreva a resposta",name:"blocos[".concat(g,"].itens[").concat(C,"].resposta"),rows:6,value:y.resposta,multiline:!0,disabled:S,control:P,errors:null===(f=null==I?void 0:null===(b=I.blocos)||void 0===b?void 0:null===(Z=b[g])||void 0===Z?void 0:Z.itens[C])||void 0===f?void 0:f.resposta})})}),y&&1==y.obs&&(0,t.jsx)(s.ZP,{item:!0,xs:12,md:"Dissertativa longa"==y.alternativa?12:3,children:(0,t.jsx)(d.Z,{fullWidth:!0,children:(0,t.jsx)(u.Z,{title:"Observa\xe7\xe3o",name:"blocos[".concat(g,"].itens[").concat(C,"].observacao"),value:null==y?void 0:y.observacao,multiline:!0,disabled:S,control:P})})})]})},p=e=>{let{index:a,values:l,blockKey:r,register:d,control:c,setValue:u,errors:x,disabled:m}=e;return console.log("\uD83D\uDE80 ~ BLOCK:",a,l),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(o.Z,{sx:{mt:4},children:(0,t.jsx)(n.Z,{children:(0,t.jsxs)(s.ZP,{container:!0,children:[(0,t.jsx)(s.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(i.Z,{color:"primary",variant:"subtitle1",sx:{fontWeight:700,mb:6},children:null==l?void 0:l.nome})}),l.itens&&l.itens.map((e,l)=>(0,t.jsx)(v,{blockIndex:a,index:l,values:e,control:c,register:d,setValue:u,errors:x,disabled:m},l))]})})},a)})};var h=p},56531:function(e,a,l){var t=l(85893),o=l(79072),n=l(67294),s=l(46749),i=l(40039),r=l(11163),d=l.n(r),c=l(29308),u=l(84220),x=l(50287);let m=e=>{let{register:a,errors:l,setValue:r,fields:m,values:v,disabled:p,disabledFields:h,getAddressByCep:j,control:b,setCopiedDataContext:Z}=e,[f,g]=(0,n.useState)({}),[C,y]=(0,n.useState)(null),{loggedUnity:D,user:P}=(0,n.useContext)(i.V),I=d();(0,s.g_)(I.pathname);let w=(e,a,l,t)=>{let o=new Date(l),n=(0,s.HD)(e,o,t);console.log("status",n),g(e=>({...e,[a]:n}))},S=()=>{m&&m.map((e,a)=>{if((null==e?void 0:e.nomeColuna)=="registroEstabelecimentoID"){var l;y((null==e?void 0:null===(l=e[e.tabela])||void 0===l?void 0:l.id)>0?null==e?void 0:e[e.tabela].id:null)}})},W=e=>{switch(e){case"telefone":case"telefone1":case"telefone2":return"telefone";case"cep":return"cep";case"cnpj":return"cnpj";default:return null}},k=e=>!!h&&h.length>0&&h.includes(e);return(0,n.useEffect)(()=>{S()},[]),(0,t.jsx)(o.ZP,{container:!0,spacing:4,children:m&&m.map((e,o)=>{var n,s,i,d,m,v;return(0,t.jsxs)(t.Fragment,{children:[e&&"int"===e.tipo&&e.tabela&&(0,t.jsx)(u.Z,{xs:12,md:4,title:e.nomeCampo,name:"fields[".concat(o,"].").concat(e.tabela),type:e.tabela,options:e.options,value:null==e?void 0:e[e.tabela],mask:e.tabela,disabled:p||k(e.nomeColuna),register:a,setValue:r,control:b,errors:null==l?void 0:null===(n=l.fields)||void 0===n?void 0:null===(s=n[o])||void 0===s?void 0:s[e.tabela],handleRegistroEstabelecimento:y}),e&&"date"==e.tipo&&(0,t.jsx)(x.Z,{xs:12,md:4,title:"Data da avalia\xe7\xe3o",disabled:p||k(e.nomeColuna),value:null==e?void 0:e[e.nomeColuna],type:e.nomeColuna,name:"fields[".concat(o,"].").concat(e.nomeColuna),errors:null==l?void 0:null===(i=l.fields)||void 0===i?void 0:null===(d=i[o])||void 0===d?void 0:d[e.nomeColuna],control:b,setDateFormat:w,typeValidation:"dataPassado",daysValidation:365,dateStatus:f,register:a}),e&&"string"==e.tipo&&("numeroRegistro"!=e.nomeColuna||C>1)&&(0,t.jsx)(c.Z,{xs:12,md:4,title:e.nomeCampo,name:"fields[".concat(o,"].").concat(e.nomeColuna),value:null==e?void 0:e[e.nomeColuna],type:e.nomeColuna,getAddressByCep:j,mask:W(e.nomeColuna),disabled:!!(p||k(e.nomeColuna))||"cnpj"==e.nomeColuna,control:b,errors:null==l?void 0:null===(m=l.fields)||void 0===m?void 0:null===(v=m[o])||void 0===v?void 0:v[e.nomeColuna]})]})})})};a.Z=m}}]);