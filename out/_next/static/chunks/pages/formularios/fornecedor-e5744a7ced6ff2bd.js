(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7463],{59424:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/formularios/fornecedor",function(){return n(11645)}])},93250:function(e,a,n){"use strict";var i=n(85893),s=n(49837),o=n(91359),t=n(95722);let r=e=>{let{result:a,columns:n,btnNew:r=!0,btnPrint:l=!0,btnBack:d,openModal:c}=e;return(0,i.jsx)(s.Z,{children:(0,i.jsx)(o.Z,{sx:{pt:"0"},children:(0,i.jsx)(t.Z,{rows:a,columns:n,buttonsHeader:{btnNew:r,btnPrint:l,btnBack:d,openModal:c}})})})};a.Z=r},11645:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return N}});var i=n(85893),s=n(67294),o=n(60664),t=n(93250),r=n(34874),l=n(60565),d=n(83830),c=n(40039),u=n(72819),p=n(86501),x=n(47842),m=n(82747),h=n(11163),f=n(46749),j=n(69418),v=n(61953),b=n(29630);let Z=e=>{let{values:a}=e;return(0,i.jsxs)(v.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[(0,i.jsxs)(b.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"E-mail enviado para: "})," ",null==a?void 0:a.email]}),(0,i.jsxs)(b.Z,{variant:"body2",children:[(0,i.jsx)("strong",{children:"Link do formul\xe1rio: "})," ",null==a?void 0:a.link]})]})},g=()=>{let{user:e,loggedUnity:a}=(0,s.useContext)(c.V),[n,v]=(0,s.useState)(null),b=(0,h.useRouter)(),g=b.pathname,{setTitle:N}=(0,s.useContext)(l.f),{id:C,setId:w}=(0,s.useContext)(d.X),[k,D]=(0,s.useState)(!1),[y,z]=(0,s.useState)(!1),[I,S]=(0,s.useState)(null),P=()=>{D(!0)},_=async()=>{await o.h.post("".concat(g,"/getList/"),{unidadeID:a.unidadeID,papelID:e.papelID,cnpj:e.cnpj?e.cnpj:null}).then(e=>{v(e.data),N({title:"Fornecedor",subtitle:{id:C,count:e.data.length,new:!1}})})},M=async n=>{console.log("\uD83D\uDE80 ~ makeFornecedor : ",n);try{let i=await o.h.post("/formularios/fornecedor/makeFornecedor",{usuarioID:e.usuarioID,papelID:e.papelID,unidadeID:a.unidadeID,values:n.fields});200==i.status&&(n.fields.email&&F(n.fields.email,n.fields.cnpj,n.fields.razaoSocial),S(i.data),w(i.data.fornecedorID),z(!0))}catch(s){console.error(s)}},F=(e,n,i)=>{if(e&&(0,m.dI)(e)){let s={unidadeID:a.unidadeID,cnpj:n,nomeFornecedor:i,destinatario:e};o.h.post("".concat(g,"/sendMail"),{data:s}).then(e=>{p.ZP.success("E-mail enviado com sucesso")}).catch(e=>{console.error("Erro ao enviar email",e)})}},H=()=>{let e=null==I?void 0:I.link;e&&(navigator.clipboard.writeText(e),p.ZP.success("Link copiado com sucesso!"))};(0,s.useEffect)(()=>{_()},[C]);let E=1==e.papelID?[{headerName:"ID",field:"id",size:1},{headerName:"Fornecedor",field:"fornecedor",size:1},{headerName:"CNPJ",field:"cnpj",size:1},{headerName:"Data da Avalia\xe7\xe3o",field:"data",size:1},{headerName:"Cidade",field:"cidade",size:1},{headerName:"Respons\xe1vel",field:"responsavel",size:1},{headerName:"Status",field:{name:"status",cor:"cor"},size:1}]:2==e.papelID?[{headerName:"ID",field:"id",size:1},{headerName:"F\xe1brica",field:"fabrica",size:1},{headerName:"CNPJ",field:"cnpj",size:1},{headerName:"Data da Avalia\xe7\xe3o",field:"data",size:1},{headerName:"Cidade",field:"cidade",size:1},{headerName:"Respons\xe1vel",field:"responsavel",size:1},{headerName:"Status",field:{name:"status",cor:"cor"},size:1}]:[],L=(0,f.OL)(g,E);return(0,i.jsxs)(i.Fragment,{children:[n?C&&C>0?(0,i.jsx)(r.Z,{id:C,makeFornecedor:M}):(0,i.jsx)(t.Z,{result:n,columns:L,openModal:1==e.papelID?P:null}):(0,i.jsx)(x.Z,{show:!0}),(0,i.jsx)(u.Z,{title:"Habilitar Fornecedor",description:"Habilitar novo preenchimento de formul\xe1rio pro fornecedor",handleConclusion:M,setOpenModal:D,openModal:k,size:"lg",children:(0,i.jsx)(j.Z,{})}),(0,i.jsx)(u.Z,{title:"Formul\xe1rio enviado ao fornecedor",description:"Um novo formul\xe1rio de qualifica\xe7\xe3o de fornecedor foi enviado",handleCopyLink:H,setOpenModal:z,openModal:y,children:(0,i.jsx)(Z,{values:I})})]})};var N=g},84242:function(e,a,n){"use strict";n.d(a,{Z:function(){return g}});var i=n(85893),s=n(61953),o=n(67836),t=n(80562),r=n(50853),l=n(11163),d=n.n(l),c=n(75084),u=n(41664),p=n.n(u),x=n(40039),m=n(67294),h=n(83830),f=n(46749),j=n(21609);let v=e=>{let{btnNew:a,btnPrint:n,btnSave:s,btnBack:o,handleSave:t,hasListChange:r,openModal:l}=e,u=d(),{setId:v}=(0,m.useContext)(h.X),{routes:b}=(0,m.useContext)(x.V);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"flex items-center justify-between my-2 w-full",children:[(0,i.jsx)("div",{}),(0,i.jsxs)("div",{className:"flex items-center gap-4 ",children:[(0,i.jsx)("div",{children:o&&(0,i.jsx)(c.Z,{onClick(){u.push((0,f.g_)(u.pathname)),v(null)},type:"button",variant:"outlined",color:"primary",size:"medium",children:(0,i.jsx)(j.Z,{icon:"material-symbols:arrow-back-rounded"})})}),(0,i.jsx)("div",{children:n&&(0,i.jsxs)(c.Z,{onClick:()=>window.print(),type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,i.jsx)(j.Z,{icon:"mdi:printer"}),(0,i.jsx)("span",{className:"hidden sm:block",children:"Imprimir"})]})}),(0,i.jsx)("div",{className:"",children:a&&b.find(e=>e.rota===u.pathname&&e.inserir)&&(0,i.jsx)(p(),{href:l?"":"".concat(u.pathname,"/novo"),children:(0,i.jsxs)(c.Z,{type:"button",variant:"outlined",color:"primary",size:"medium",onClick:l||null,sx:{display:"flex",gap:2},children:[(0,i.jsx)(j.Z,{icon:"ic:outline-plus"}),(0,i.jsx)("span",{className:"hidden sm:block",children:"Novo"})]})})}),(0,i.jsx)("div",{children:s&&(0,i.jsxs)(c.Z,{onClick:t,disabled:!r,type:"button",variant:"outlined",color:"primary",size:"medium",sx:{display:"flex",gap:2},children:[(0,i.jsx)(j.Z,{icon:"mdi:check-bold"}),(0,i.jsx)("span",{className:"hidden sm:block",children:"Salvar"})]})})]})]})})};var b=n(61225);let Z=e=>((0,b.Z)("(min-width:640px)"),(0,i.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",gap:2,alignItems:"baseline",justifyContent:"space-between",p:e=>e.spacing(8,0,0,0)},children:[(0,i.jsxs)(s.Z,{sx:{display:"flex",gap:"8px",textAlig:"end"},children:[(0,i.jsx)(o.Z,{size:"medium",value:e.value,onChange:e.onChange,placeholder:"Buscarâ€¦",variant:"standard",InputProps:{startAdornment:(0,i.jsx)(s.Z,{sx:{mr:2,display:"flex"},children:(0,i.jsx)(j.Z,{icon:"mdi:magnify",fontSize:20})}),endAdornment:(0,i.jsx)(t.Z,{size:"medium",title:"Clear","aria-label":"Clear",onClick:e.clearSearch,children:(0,i.jsx)(j.Z,{icon:"mdi:close",fontSize:20})})},sx:{width:{xs:1,sm:"auto"},"& .MuiInputBase-root > svg":{mr:2}}}),(0,i.jsx)("div",{className:"hidden sm:block",children:(0,i.jsx)(r.M,{})})]}),(0,i.jsx)(v,{btnNew:e.buttonsHeader.btnNew,btnPrint:e.buttonsHeader.btnPrint,btnBack:e.buttonsHeader.btnBack,btnSave:e.buttonsHeader.btnSave,handleSave:e.buttonsHeader.handleSave,hasListChange:e.hasChange,openModal:e.buttonsHeader.openModal})]}));var g=Z},95722:function(e,a,n){"use strict";var i=n(85893),s=n(67294),o=n(87630),t=n(75680),r=n(84242),l=n(60565),d=n(83830);let c=e=>{let{rows:a,columns:n,buttonsHeader:c}=e,{handleSearch:u,pageSize:p,setPageSize:x,searchText:m,filteredData:h,setData:f,data:j}=(0,s.useContext)(l.f),{setId:v}=(0,s.useContext)(d.X);return f(a),(0,i.jsx)(o._,{localeText:t.F.components.MuiDataGrid.defaultProps.localeText,autoHeight:!0,columns:n,pageSize:p,rowsPerPageOptions:[10,20,30,40,50,100],components:{Toolbar:r.Z},rows:m?h:j,onCellClick(e,a){v(e.row.id)},onPageSizeChange:e=>x(e),sx:{"& .MuiDataGrid-cell":{cursor:"pointer",overflow:"scroll"}},componentsProps:{toolbar:{value:m,clearSearch:()=>u(""),onChange:e=>u(e.target.value),buttonsHeader:c}}})};a.Z=c}},function(e){e.O(0,[4186,1445,1111,5999,7536,6668,2187,7630,9516,1515,2708,5348,676,4874,9774,2888,179],function(){return e(e.s=59424)}),_N_E=e.O()}]);