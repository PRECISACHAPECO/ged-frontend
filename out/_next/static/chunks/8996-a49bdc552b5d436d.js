"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8996],{82747:function(e,n,o){function i(e){if(14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let n=e.length-2,o=e.substring(0,n),i=e.substring(n),s=0,r=n-7;for(let a=n;a>=1;a--)s+=o.charAt(n-a)*r--,r<2&&(r=9);let l=s%11<2?0:11-s%11;if(l!=i.charAt(0))return!1;n+=1,o=e.substring(0,n),s=0,r=n-7;for(let t=n;t>=1;t--)s+=o.charAt(n-t)*r--,r<2&&(r=9);return(l=s%11<2?0:11-s%11)==i.charAt(1)}function s(e){let n;if(11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let o=0;for(let i=1;i<=9;i++)o+=parseInt(e.substring(i-1,i))*(11-i);if((10==(n=10*o%11)||11===n)&&(n=0),n!==parseInt(e.substring(9,10)))return!1;o=0;for(let s=1;s<=10;s++)o+=parseInt(e.substring(s-1,s))*(12-s);return(10==(n=10*o%11)||11===n)&&(n=0),n===parseInt(e.substring(10,11))}function r(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}o.d(n,{dI:function(){return r},sw:function(){return s},zk:function(){return i}})},48996:function(e,n,o){o.r(n);var i=o(85893),s=o(87536),r=o(67294),a=o(60664),l=o(30120),t=o(79072),d=o(54225),c=o(29630),u=o(82747),x=o(11163),h=o.n(x),m=o(58316),f=o(55343),p=o(9041),v=o(19604),j=o(39063),Z=o(80562),w=o(21609),g=o(41664),y=o.n(g),S=o(29308);let C=e=>{var n,o,x,g,C,P,b;let{handleNext:z,setDataGlobal:F,dataGlobal:A}=e,D=h(),[I,k]=(0,r.useState)(null),[O,q]=(0,r.useState)(null),[N,T]=(0,r.useState)(),[E,U]=(0,r.useState)(!1),[J,W]=(0,r.useState)(null),M=(0,r.useRef)(null),[V,_]=(0,r.useState)({showPassword:!1,showConfirmPassword:!1}),H=()=>{_({...V,showPassword:!V.showPassword})},L=e=>{e.preventDefault()},R=()=>{_({...V,showConfirmPassword:!V.showConfirmPassword})},$=e=>{e.preventDefault()},{register:B,handleSubmit:G,setValue:K,control:Q,watch:X,formState:{errors:Y}}=(0,s.cI)(),ee=e=>{18===e.length?(W((0,u.zk)(e)),(0,u.zk)(e)&&a.h.post("/registro-fornecedor/getData",{cnpj:e}).then(n=>{T(e),F({...n.data,...A,sectionOne:{cnpj:e,nomeFantasia:"",razaoSocial:"",email:""}})})):(F(null),T(null),W(null))},en=D.query.u,eo=D.query.c,ei=D.query.e,es=D.query.n,er=async(e,n)=>{if(e&&n){let o={unidadeID:e,cnpj:n,nome:es,email:ei};await a.h.post("/login-fornecedor/setAcessLink",{data:o}).then((e,n)=>{if(q(e.data[0].unidadeID),e.data&&e.data[0]&&e.data[0].cnpj){var i;ee(e.data[0].cnpj),K("cnpj",null===(i=o.response)||void 0===i?void 0:i.data[0].cnpj),K("email",o.email),K("nomeFantasia",o.nome),K("razaoSocial",o.nome),U(!0)}})}},ea=e=>{var n,o,i,s,r,a,l,t;F({...A,unidadeID:O,sectionOne:{...null==A?void 0:A.sectionOne,nomeFantasia:e.nomeFantasia,razaoSocial:e.razaoSocial,email:e.email,senha:e.senha},sectionTwo:{...null==A?void 0:A.sectionTwo,logradouro:null!==(r=null==A?void 0:null===(n=A.sectionTwo)||void 0===n?void 0:n.logradouro)&&void 0!==r?r:"--",bairro:null!==(a=null==A?void 0:null===(o=A.sectionTwo)||void 0===o?void 0:o.bairro)&&void 0!==a?a:"--",cidade:null!==(l=null==A?void 0:null===(i=A.sectionTwo)||void 0===i?void 0:i.cidade)&&void 0!==l?l:"--",uf:null!==(t=null==A?void 0:null===(s=A.sectionTwo)||void 0===s?void 0:s.uf)&&void 0!==t?t:"--"}}),z(e)};return(0,r.useEffect)(()=>{en&&eo&&(er(en,eo),setTimeout(()=>{var e;null==M||null===(e=M.current)||void 0===e||e.focus()},500))},[en,eo]),(0,r.useEffect)(()=>{var e,n,o,i,s,r;T(null==A?void 0:null===(e=A.sectionOne)||void 0===e?void 0:e.cnpj),K("cnpj",null==A?void 0:null===(n=A.sectionOne)||void 0===n?void 0:n.cnpj),K("nomeFantasia",null==A?void 0:null===(o=A.sectionOne)||void 0===o?void 0:o.nomeFantasia),K("razaoSocial",null==A?void 0:null===(i=A.sectionOne)||void 0===i?void 0:i.razaoSocial),K("email",null==A?void 0:null===(s=A.sectionOne)||void 0===s?void 0:s.email),T(null==A?void 0:null===(r=A.sectionOne)||void 0===r?void 0:r.cnpj)},[]),(!E||A)&&(0,i.jsxs)("form",{onSubmit:G(ea),children:[(0,i.jsxs)(l.Z,{sx:{mb:4},children:[(0,i.jsx)(c.Z,{variant:"h5",children:"Informa\xe7\xf5es obrigat\xf3rios"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:"Insira as informa\xe7\xf5es obrigat\xf3rias"})]}),(0,i.jsxs)(t.ZP,{container:!0,spacing:5,children:[(0,i.jsx)(S.Z,{xs:12,md:6,title:"CNPJ",name:"cnpj",defaultValue:null==A?void 0:null===(n=A.sectionOne)||void 0===n?void 0:n.cnpj,mask:"cnpj",control:Q,errors:null==Y?void 0:Y.cnpj,onChange:e=>ee(e)}),!J&&null!==J&&(0,i.jsx)(t.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(v.Z,{severity:"warning",children:"CNPJ inv\xe1lido!"})}),A&&(null==A?void 0:A.status)==="notAuthorized"&&(0,i.jsx)(t.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(v.Z,{severity:"warning",children:"Antes de realizar o cadastro, \xe9 necess\xe1rio que uma f\xe1brica habilite o seu CNPJ como um fornecedor."})}),A&&(null==A?void 0:A.status)==="hasUserNotUnity"&&(0,i.jsxs)(t.ZP,{item:!0,xs:12,md:12,children:[(0,i.jsx)("h3",{children:"CNPJ j\xe1 cadastrado"}),(0,i.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:8},children:[(0,i.jsxs)(l.Z,{children:[(0,i.jsxs)(l.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:"Nome Fantasia:"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:null==A?void 0:null===(o=A.unity)||void 0===o?void 0:o.nomeFantasia})]}),(0,i.jsxs)(l.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:"Email Institucional:"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:null==A?void 0:null===(x=A.unity)||void 0===x?void 0:x.email})]})]}),(0,i.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsx)(t.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsxs)(f.Z,{fullWidth:!0,children:[(0,i.jsx)(m.Z,{htmlFor:"input-password",color:Y.senha?"error":"",children:"Senha"}),(0,i.jsx)(j.Z,{label:"Senha",size:"small",id:"input-password",inputRef:M,type:V.showPassword?"text":"password",name:"senha",...B("senha"),endAdornment:(0,i.jsx)(p.Z,{position:"end",children:(0,i.jsx)(Z.Z,{edge:"end",onClick:H,onMouseDown:L,children:(0,i.jsx)(w.Z,{icon:V.showPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})}),error:Y.senha&&!0,helperText:Y.senha&&Y.senha.message})]})}),(0,i.jsx)(t.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsxs)(f.Z,{fullWidth:!0,children:[(0,i.jsx)(m.Z,{htmlFor:"input-confirm-password",style:{color:Y.confirmaSenha&&"red"},children:"Confirme a senha"}),(0,i.jsx)(j.Z,{label:"Confirme a senha",name:"confirmaSenha",size:"small",...B("confirmaSenha"),id:"input-confirm-password",type:V.showConfirmPassword?"text":"password",onChange(e){k(e.target.value)},endAdornment:(0,i.jsx)(p.Z,{position:"end",children:(0,i.jsx)(Z.Z,{edge:"end",onClick:R,onMouseDown:$,children:(0,i.jsx)(w.Z,{icon:V.showConfirmPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})}),error:Y.confirmaSenha&&!0}),(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"error.main"},children:Y.confirmaSenha&&Y.confirmaSenha.message})]})})]})]})]}),A&&(null==A?void 0:A.status)==="hasUserHasUnity"&&(0,i.jsxs)(t.ZP,{item:!0,xs:12,md:12,children:[(0,i.jsx)("h3",{children:"CNPJ j\xe1 cadastrado"}),(0,i.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:8},children:[(0,i.jsxs)(l.Z,{children:[(0,i.jsxs)(l.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:"Nome Fantasia:"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:null==A?void 0:null===(g=A.unity)||void 0===g?void 0:g.nomeFantasia})]}),(0,i.jsxs)(l.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:"Email Institucional:"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:null==A?void 0:null===(C=A.unity)||void 0===C?void 0:C.email})]})]}),(0,i.jsxs)(l.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsx)(c.Z,{href:"/fornecedor",component:y(),sx:{color:"primary.main",textDecoration:"none"},children:"Fazer login"}),(0,i.jsx)(c.Z,{href:"/fornecedor",component:y(),sx:{color:"primary.main",textDecoration:"none"},children:"Esqueceu a senha?"})]})]})]}),A&&(null==A?void 0:A.status)==="isAuthorized"&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.Z,{xs:12,md:6,title:"Nome Fantasia",name:"nomeFantasia",defaultValue:(null==A?void 0:A.sectionOne.nomeFantasia)||es,required:!0,control:Q,errors:null==Y?void 0:Y.nomeFantasia}),(0,i.jsx)(S.Z,{xs:12,md:6,title:"Raz\xe3o Social",name:"razaoSocial",defaultValue:(null==A?void 0:null===(P=A.sectionOne)||void 0===P?void 0:P.razaoSocial)||es,required:!0,control:Q,errors:null==Y?void 0:Y.razaoSocial}),(0,i.jsx)(S.Z,{xs:12,md:6,title:"Email Institucional",name:"email",defaultValue:(null==A?void 0:null===(b=A.sectionOne)||void 0===b?void 0:b.email)||ei,required:!0,control:Q,errors:null==Y?void 0:Y.email}),(0,i.jsx)(t.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsxs)(f.Z,{fullWidth:!0,children:[(0,i.jsx)(m.Z,{htmlFor:"input-password",color:Y.senha?"error":"",children:"Senha"}),(0,i.jsx)(j.Z,{size:"small",label:"Senha",id:"input-password",type:V.showPassword?"text":"password",name:"senha",...B("senha",{required:"Campo obrigat\xf3rio",minLength:{value:4,message:"Senha deve ter pelo menos 4 caracteres"}}),endAdornment:(0,i.jsx)(p.Z,{position:"end",children:(0,i.jsx)(Z.Z,{edge:"end",onClick:H,onMouseDown:L,children:(0,i.jsx)(w.Z,{icon:V.showPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})}),error:!!Y.senha,helperText:Y.senha&&Y.senha.message})]})}),(0,i.jsx)(t.ZP,{item:!0,xs:12,sm:6,children:(0,i.jsxs)(f.Z,{fullWidth:!0,children:[(0,i.jsx)(m.Z,{htmlFor:"input-confirm-password",style:{color:Y.confirmaSenha&&"red"},children:"Confirme a senha"}),(0,i.jsx)(j.Z,{label:"Confirme a senha",name:"confirmaSenha",size:"small",...B("confirmaSenha",{required:"Campo obrigat\xf3rio",validate:e=>e===X("senha")||"As senhas n\xe3o coincidem"}),id:"input-confirm-password",type:V.showConfirmPassword?"text":"password",onChange(e){k(e.target.value)},endAdornment:(0,i.jsx)(p.Z,{position:"end",children:(0,i.jsx)(Z.Z,{edge:"end",onClick:R,onMouseDown:$,children:(0,i.jsx)(w.Z,{icon:V.showConfirmPassword?"mdi:eye-outline":"mdi:eye-off-outline"})})}),error:!!Y.confirmaSenha}),(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"error.main"},children:Y.confirmaSenha&&Y.confirmaSenha.message})]})})]}),(0,i.jsxs)(t.ZP,{item:!0,xs:12,children:[(0,i.jsxs)(l.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(d.Z,{disabled:!0,variant:"contained",startIcon:(0,i.jsx)(w.Z,{icon:"mdi:chevron-left",fontSize:20}),children:"Anterior"}),(0,i.jsx)(d.Z,{disabled:(null==A?void 0:A.status)=="hasUserHasUnity"||(null==A?void 0:A.status)=="notAuthorized"||!N,type:"submit",variant:"contained",onClick:G,endIcon:(0,i.jsx)(w.Z,{icon:"mdi:chevron-right",fontSize:20}),children:"Proximo"})]}),(null==A?void 0:A.status)!=="hasUserHasUnity"||(null==A?void 0:A.status)=="notAuthorized"&&(0,i.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",marginTop:10,flexWrap:"wrap",justifyContent:"start"},children:[(0,i.jsx)(c.Z,{sx:{mr:2,color:"text.secondary"},children:"Fazer login?"}),(0,i.jsx)(c.Z,{href:"/fornecedor",component:y(),sx:{color:"primary.main",textDecoration:"none"},children:"Login"})]})]})]})]})};n.default=C}}]);