"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8773],{88773:function(e,r,l){var s=l(85893),t=l(11163),i=l.n(t),o=l(67294),n=l(60664);l(60565);var a=l(83830),d=l(49837),c=l(91359),u=l(79072),f=l(29630),m=l(87536),x=l(47842),v=l(86501),p=l(45061),g=l(46749),h=l(99741),j=l(49540),Z=l(40039),b=l(29308);let C=e=>{var r,l,t,C,y,D,q,k,S,w,P,E,I,F;let{id:N}=e,{user:Y,setLoggedUnity:A,loggedUnity:O}=(0,o.useContext)(Z.V),{setId:_}=(0,o.useContext)(a.X),[z,M]=(0,o.useState)(!1),[R,T]=(0,o.useState)(),U=i(),$=N&&N>0?"edit":"new",B=U.pathname,{trigger:J,handleSubmit:V,setValue:K,reset:W,formState:{errors:X},register:G}=(0,m.cI)(),H=async e=>{if(9==e.length){let r=e.replace(/\D/g,"");n.h.get("https://viacep.com.br/ws/"+r+"/json/").then(e=>{console.log("busca cep",e.data),e.data.localidade?(K("fields.logradouro",e.data.logradouro),K("fields.bairro",e.data.bairro),K("fields.cidade",e.data.localidade),K("fields.uf",e.data.uf),v.ZP.success("Endere\xe7o encontrado!")):v.ZP.error("Endere\xe7o n\xe3o encontrado!")})}},L=async e=>{let r={...e.fields,dataCadastro:(0,j.p6)(e.dataCadastro,"YYYY-MM-DD")};try{"new"===$?await n.h.post("".concat((0,g.g_)(B),"/new/insertData"),values).then(e=>{U.push("".concat((0,g.g_)(B))),_(e.data),v.ZP.success(g.OD.successNew)}):"edit"===$&&(await n.h.post("".concat(B,"/updateData/").concat(N),values),v.ZP.success(g.OD.successUpdate))}catch(l){l.response&&409===l.response.status?v.ZP.error(g.OD.errorRepeated):console.log(l)}for(let s in O)s in r&&(O[s]=r[s]);localStorage.setItem("loggedUnity",JSON.stringify(O))},Q=async()=>{try{await n.h.delete("".concat(B,"/").concat(N)),_(null),M(!1),v.ZP.success(g.OD.successDelete)}catch(e){e.response&&409===e.response.status?(v.ZP.error(g.OD.pendingDelete),M(!1)):console.log(e)}},ee=async()=>{if("edit"==$)try{let e=await n.h.get("".concat(B,"/").concat(N));W(e.data),T(e.data)}catch(r){console.log(r)}else T({})};return(0,o.useEffect)(()=>{ee(),setTimeout(()=>{J()},300)},[N]),(0,s.jsxs)(s.Fragment,{children:[!R&&(0,s.jsx)(x.Z,{}),(0,s.jsx)(d.Z,{children:(0,s.jsxs)("form",{onSubmit:V(L),children:[(0,s.jsx)(h.Z,{btnCancel:1===Y.papelID,btnSave:!0,handleSubmit:()=>V(L),btnDelete:"edit"===$&&1===Y.papelID,onclickDelete:()=>M(!0),type:$}),(0,s.jsx)(c.Z,{children:(0,s.jsxs)(u.ZP,{container:!0,spacing:4,children:[(0,s.jsx)(b.Z,{xs:12,md:4,title:"Nome Fantasia",name:"fields.nomeFantasia",required:!0,register:G,errors:null==X?void 0:null===(r=X.fields)||void 0===r?void 0:r.nomeFantasia}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"Raz\xe3o Social",name:"fields.razaoSocial",required:!0,register:G,errors:null==X?void 0:null===(l=X.fields)||void 0===l?void 0:l.razaoSocial}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"CNPJ",name:"fields.cnpj",mask:"cnpj",required:!0,register:G,errors:null==X?void 0:null===(t=X.fields)||void 0===t?void 0:t.cnpj}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"Respons\xe1vel",name:"fields.responsavel",required:!0,register:G,errors:null==X?void 0:null===(C=X.fields)||void 0===C?void 0:C.responsavel}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"E-mail",name:"fields.email",type:"email",required:!0,register:G,errors:null==X?void 0:null===(y=X.fields)||void 0===y?void 0:y.email}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"Telefone 1",name:"fields.telefone1",mask:"telefone",required:!1,register:G,errors:null==X?void 0:null===(D=X.fields)||void 0===D?void 0:D.telefone1}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"Telefone 2",name:"fields.telefone2",mask:"telefone",required:!1,register:G,errors:null==X?void 0:null===(q=X.fields)||void 0===q?void 0:q.telefone2}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"CEP",name:"fields.cep",getAddressByCep:H,mask:"cep",required:!1,register:G,errors:null==X?void 0:null===(k=X.fields)||void 0===k?void 0:k.cep}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"Rua",name:"fields.logradouro",required:!1,register:G,errors:null==X?void 0:null===(S=X.fields)||void 0===S?void 0:S.logradouro}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"N\xfamero",name:"fields.numero",required:!1,register:G,errors:null==X?void 0:null===(w=X.fields)||void 0===w?void 0:w.numero}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"Complemento",name:"fields.complemento",required:!1,register:G,errors:null==X?void 0:null===(P=X.fields)||void 0===P?void 0:P.complemento}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"Bairro",name:"fields.bairro",required:!1,register:G,errors:null==X?void 0:null===(E=X.fields)||void 0===E?void 0:E.bairro}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"Cidade",name:"fields.cidade",required:!1,register:G,errors:null==X?void 0:null===(I=X.fields)||void 0===I?void 0:I.cidade}),(0,s.jsx)(b.Z,{xs:12,md:4,title:"UF",name:"fields.uf",mask:"estado",required:!1,register:G,errors:null==X?void 0:null===(F=X.fields)||void 0===F?void 0:F.uf})]})})]})}),"edit"===$&&R&&(0,s.jsxs)(f.Z,{variant:"caption",sx:{display:"flex",justifyContent:"end",p:4},children:["Data de cadastro:",(0,j.p6)(R.fields.dataCadastro,"DD/MM/YYYY")]}),(0,s.jsx)(p.Z,{title:"Excluir dado",text:"Tem certeza que deseja excluir?",openModal:z,handleClose:()=>M(!1),handleSubmit:Q,btnCancel:!0,btnConfirm:!0})]})};r.Z=C},45061:function(e,r,l){var s=l(85893),t=l(75084),i=l(29620),o=l(77745),n=l(95398),a=l(76779),d=l(44642);l(21609);var c=l(19604),u=l(29630),f=l(55343),m=l(67836),x=l(67294),v=l(82747);l(84220),l(29308),l(67569),l(3893),l(88475);let p=e=>{let{title:r,text:l,handleClose:p,openModal:g,handleSubmit:h,cnpj:j,gruposAnexo:Z,inputEmail:b,btnCancel:C,btnConfirm:y,grupoAnexosFornecedor:D,btnCancelColor:q,btnConfirmColor:k,closeAfterSave:S,listErrors:w}=e,[P,E]=(0,x.useState)(null),[I,F]=(0,x.useState)(!1);return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(i.Z,{open:g,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,onClose(e,r){"backdropClick"!==r&&p()},children:[(0,s.jsx)(o.Z,{id:"form-dialog-title",children:r}),(0,s.jsxs)(n.Z,{children:[(0,s.jsxs)(d.Z,{sx:{mb:3},children:[l,w&&w.status&&(0,s.jsxs)(c.Z,{variant:"outlined",severity:"error",sx:{mt:2},children:["Por favor, verifique os campos abaixo:",(0,s.jsx)(u.Z,{variant:"subtitle1",color:"error",sx:{mt:2},children:w.errors.map((e,r)=>(0,s.jsxs)(u.Z,{variant:"body2",color:"error",children:["- ",e]},r))})]})]}),b&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(f.Z,{sx:{mt:2},fullWidth:!0,children:[(0,s.jsx)(m.Z,{defaultValue:"",type:"email",label:"E-mail do Fornecedor (opcional)",placeholder:"E-mail do Fornecedor (opcional)","aria-describedby":"validation-schema-nome",name:"email",error:(null==P?void 0:P.length)>0&&I,inputProps:{onChange(e){E(e.target.value),F(!(0,v.dI)(e.target.value))}}}),(null==P?void 0:P.length)>0&&I&&(0,s.jsx)(u.Z,{variant:"body2",color:"error",children:"Por favor, insira um e-mail v\xe1lido!"})]}),(0,s.jsx)(c.Z,{severity:"info",sx:{mt:2},children:"Se o e-mail for preenchido, o mesmo receber\xe1 as instru\xe7\xf5es de cadastro e preenchimento do formul\xe1rio no e-mail."})]})]}),(0,s.jsxs)(a.Z,{className:"dialog-actions-dense",children:[C&&(0,s.jsx)(t.Z,{variant:"outlined",color:"primary",onClick:p,children:"Cancelar"}),y&&(0,s.jsx)(t.Z,{variant:"contained",disabled:b&&(null==P?void 0:P.length)>0&&I||w&&w.status,color:k||"error",onClick:b&&j?()=>{h(j,Z,P),E(null),S&&p()}:b&&!j?()=>{h(P),E(null),S&&p()}:()=>{h(),S&&p()},children:"Confirmar"})]})]})})};r.Z=p},47842:function(e,r,l){var s=l(85893),t=l(70754),i=l(61953);let o=e=>{let{title:r}=e;return(0,s.jsxs)(i.Z,{sx:{position:"absolute",top:"50%",left:"50%",textAlign:"center"},children:[(0,s.jsx)(t.Z,{}),(0,s.jsx)("p",{children:null!=r?r:"Carregando..."})]})};r.Z=o},82747:function(e,r,l){function s(e){if(14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let r=e.length-2,l=e.substring(0,r),s=e.substring(r),t=0,i=r-7;for(let o=r;o>=1;o--)t+=l.charAt(r-o)*i--,i<2&&(i=9);let n=t%11<2?0:11-t%11;if(n!=s.charAt(0))return!1;r+=1,l=e.substring(0,r),t=0,i=r-7;for(let a=r;a>=1;a--)t+=l.charAt(r-a)*i--,i<2&&(i=9);return(n=t%11<2?0:11-t%11)==s.charAt(1)}function t(e){let r;if(11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let l=0;for(let s=1;s<=9;s++)l+=parseInt(e.substring(s-1,s))*(11-s);if((10==(r=10*l%11)||11===r)&&(r=0),r!==parseInt(e.substring(9,10)))return!1;l=0;for(let t=1;t<=10;t++)l+=parseInt(e.substring(t-1,t))*(12-t);return(10==(r=10*l%11)||11===r)&&(r=0),r===parseInt(e.substring(10,11))}function i(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}l.d(r,{dI:function(){return i},sw:function(){return t},zk:function(){return s}})}}]);