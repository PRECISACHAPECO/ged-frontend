"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2039],{80587:function(e,o,t){t(85893),t(21609),t(10179),t(42107),t(88475),t(73731),t(53934)},23895:function(e,o,t){t.d(o,{Z:function(){return w}});var i=t(85893),a=t(67294),n=t(66136),l=t(79072),s=t(17575),r=t(80562),d=t(21609),c=t(10179),u=t(42107),x=t(73731),m=t(53934);let p=e=>{var o;let{key:t,item:a,handleFileClick:n,indexGrupo:p,indexItem:h,selectedItem:f,handleFileSelect:v,handleRemove:g,loadingFile:j,folder:Z,error:b,disabled:D,modeTheme:y,inputRef:w}=e;return console.log("\uD83D\uDE80 ~ AnexoGrid item:",a),(0,i.jsx)(l.ZP,{item:!0,xs:12,md:3,children:(0,i.jsxs)("div",{className:"".concat((null==b?void 0:b[t])?"border border-red-500":"dark"===y?"bg-[#202023]":"bg-[#F6F6F8]"," rounded-lg flex flex-col relative z-10"),children:[(0,i.jsx)("div",{className:"flex items-center justify-center p-2 mt-1 ",children:(0,i.jsx)("p",{className:"font-medium text-sm ",children:a.nome})}),(0,i.jsx)("div",{className:"flex justify-center items-center cursor-pointer p-1 h-[100px] w-full ",disabled:D,onClick(){a.anexo&&a.anexo.path&&a.anexo.exist?window.open(a.anexo.path,"_blank"):D||n(a)},children:(0,i.jsxs)("div",{className:"flex p-1 justify-center items-center gap-2 rounded-lg w-full h-full m-3 border-2 border-dashed hover:border-[#4A8B57] transition-colors ".concat("dark"===y?" border-[#27272a]":"rgba(76, 78, 100, 0.12)"),children:[f&&f.grupoAnexoItemID==a.grupoAnexoItemID&&(0,i.jsx)(x.Z,{show:j,title:"Enviando anexo..."}),(0,i.jsx)("div",{className:"flex items-center gap-3",children:a.anexo&&a.anexo.exist?(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,i.jsx)(u.Z,{data:a.anexo}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsxs)("p",{className:"text-sm opacity-80",children:[a.anexo.nome,(0,i.jsx)("span",{className:"text-xs opacity-50 ml-1",children:"(".concat((a.anexo.size/1024/1024).toFixed(2),"MB)")})]}),a.descricao&&(0,i.jsx)(m.Z,{text:a.descricao})]}),(0,i.jsx)("p",{className:"text-xs opacity-50",children:new Date(a.anexo.time).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})}):(0,i.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,i.jsx)(c.Z,{className:"w-8 h-8 ".concat(a.anexo&&a.anexo.exist?"fill-[#666CFF]":"fill-current")}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("h6",{className:"text-sm font-normal opacity-80",children:"Adicione um arquivo"}),a.descricao&&(0,i.jsx)(m.Z,{text:a.descricao})]})]})})]})}),(0,i.jsx)("div",{className:"flex items-center justify-between gap-1 p-2 py-3 pl-4",children:(0,i.jsx)(s.Z,{title:1==a.hasPending?"Este item n\xe3o pode mais ser removido pois j\xe1 foi respondido em um formul\xe1rio":"Remover este item",children:(0,i.jsx)(r.Z,{color:"error",onClick:()=>g(a),disabled:!(null===(o=a.anexo)||void 0===o?void 0:o.exist)||D,children:(0,i.jsx)(d.Z,{icon:"tabler:trash-filled"})})})}),(0,i.jsx)("input",{type:"file",ref:w,style:{display:"none"},onChange:e=>v(e,f,Z)})]})})};t(80587);var h=t(92945),f=t(49837),v=t(91359),g=t(29630),j=t(85390),Z=t(87054),b=function(e){return(0,i.jsx)("svg",{fill:"currentColor",viewBox:"0 0 16 16",height:"1em",width:"1em",...e,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 01.5-.5h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4a.5.5 0 01.5-.5h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4a.5.5 0 01.5-.5h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5z"})})},D=function(e){return(0,i.jsx)("svg",{fill:"currentColor",viewBox:"0 0 16 16",height:"1em",width:"1em",...e,children:(0,i.jsx)("path",{d:"M1 2.5A1.5 1.5 0 012.5 1h3A1.5 1.5 0 017 2.5v3A1.5 1.5 0 015.5 7h-3A1.5 1.5 0 011 5.5v-3zM2.5 2a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5h-3zm6.5.5A1.5 1.5 0 0110.5 1h3A1.5 1.5 0 0115 2.5v3A1.5 1.5 0 0113.5 7h-3A1.5 1.5 0 019 5.5v-3zm1.5-.5a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5h-3zM1 10.5A1.5 1.5 0 012.5 9h3A1.5 1.5 0 017 10.5v3A1.5 1.5 0 015.5 15h-3A1.5 1.5 0 011 13.5v-3zm1.5-.5a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5h-3zm6.5.5A1.5 1.5 0 0110.5 9h3a1.5 1.5 0 011.5 1.5v3a1.5 1.5 0 01-1.5 1.5h-3A1.5 1.5 0 019 13.5v-3zm1.5-.5a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5h-3z"})})};let y=e=>{let{values:o}=e,[t,s]=(0,a.useState)(null);console.log("\uD83D\uDE80 ~ selectedItem:",t);let{settings:r}=(0,a.useContext)(n.J6),d=r.mode,c=(0,a.useRef)(null),u=e=>{c.current.click(),s(e)};(0,a.useEffect)(()=>{c.current.value=""},[o.handleFileSelect]);let[x,m]=(0,a.useState)("list"),y=(e,o)=>{m(o)};return(0,i.jsx)(f.Z,{sx:{mt:4},children:(0,i.jsxs)(v.Z,{children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,i.jsxs)(g.Z,{variant:"subtitle1",sx:{fontWeight:600},children:[o.grupo.nome,(0,i.jsx)(g.Z,{variant:"body2",sx:{mb:2},children:o.grupo.descricao})]}),(0,i.jsx)("div",{children:(0,i.jsxs)(j.Z,{exclusive:!0,color:"primary",value:x,onChange:y,children:[(0,i.jsx)(Z.Z,{value:"list",children:(0,i.jsx)(b,{})}),(0,i.jsx)(Z.Z,{value:"grid",children:(0,i.jsx)(D,{})})]})})]}),(0,i.jsx)(l.ZP,{container:!0,spacing:4,children:o.grupo.itens.map((e,a)=>"list"===x?(0,i.jsx)(h.Z,{modeTheme:d,handleFileClick:u,selectedItem:t,inputRef:c,item:e,loadingFile:o.loadingFile,grupo:o.grupo,indexBlock:o.indexGrupo,indexItem:a,handleFileSelect:o.handleFileSelect,handleRemove:o.handleRemove,folder:o.folder,error:o.error,disabled:o.disabled},"".concat(o.indexGrupo,"-").concat(a)):(0,i.jsx)(p,{modeTheme:d,handleFileClick:u,selectedItem:t,inputRef:c,item:e,loadingFile:o.loadingFile,grupo:o.grupo,indexGrupo:o.indexGrupo,indexItem:a,handleFileSelect:o.handleFileSelect,handleRemove:o.handleRemove,folder:o.folder,error:o.error,disabled:o.disabled},"".concat(o.indexGrupo,"-").concat(a)))})]})})};var w=y},69291:function(e,o,t){t.d(o,{Z:function(){return R}});var i=t(85893),a=t(11163),n=t.n(a),l=t(67294),s=t(60565),r=t(83830),d=t(60664),c=t(49837),u=t(91359),x=t(79072),m=t(59742),p=t(54225),h=t(87536),f=t(86501),v=t(47842),g=t(45061),j=t(86887),Z=t(46749),b=t(29308),D=t(84220),y=t(67569),w=t(40039),S=t(21609),A=t(88475),I=t(44373);let C=e=>{let{getValues:o,removeAnexo:t,setValue:a,control:n,register:s,errors:r,type:c}=e,[u,x]=(0,l.useState)([]),m=async()=>{let e=await d.h.post("/cadastros/produto/getFormularios");console.log("--> ",e.data),x(e.data)};return(0,l.useEffect)(()=>{m()},[]),o("anexos")&&o("anexos").map((e,d)=>{var x,m,p,h,f,v;return(0,i.jsxs)(l.Fragment,{children:[(0,i.jsx)(b.Z,{md:6,title:"Nome",name:"anexos[".concat(d,"].nome"),required:!0,control:n,errors:null==r?void 0:null===(x=r.anexos)||void 0===x?void 0:null===(m=x[d])||void 0===m?void 0:m.nome}),(0,i.jsx)(D.Z,{xs:12,md:3,title:"Formul\xe1rio",name:"anexos[".concat(d,"].formulario"),value:e.formulario,required:!0,options:null!=u?u:[],register:s,setValue:a,control:n,errors:null==r?void 0:null===(p=r.anexos)||void 0===p?void 0:null===(h=p[d])||void 0===h?void 0:h.formulario,helpText:"Formul\xe1rio em que ser\xe1 solicitado esse anexo para este produto"}),(0,i.jsx)(y.Z,{xs:1,md:1,title:"Obrigat\xf3rio",name:"anexos[".concat(d,"].obrigatorio"),value:1==e.obrigatorio,typePage:c,register:s}),(0,i.jsx)(y.Z,{xs:1,md:1,title:"Ativo",name:"anexos[".concat(d,"].status"),value:1==e.obrigatorio,typePage:c,register:s}),(0,i.jsx)(A.Z,{xs:4,md:1,title:"Remover",index:d,removeItem:t,item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois possui anexo vinculado a ele"}),(0,i.jsx)(b.Z,{xs:11,md:12,multiline:!0,items:4,title:"Descri\xe7\xe3o (opcional)",name:"anexos[".concat(d,"].descricao"),control:n,errors:null==r?void 0:null===(f=r.anexos)||void 0===f?void 0:null===(v=f[d])||void 0===v?void 0:v.descricao}),d<o("anexos").length-1&&(0,i.jsx)(I.Z,{})]},d)})};var F=t(41088);let N=e=>{var o,t;let{id:a,btnClose:A,handleConfirmNew:I,handleModalClose:N,newChange:R,manualUrl:P,outsideID:z}=e,[E,T]=(0,l.useState)(!1),[M,k]=(0,l.useState)(null),O=n(),q=a&&a>0?"edit":"new",V=O.pathname,{title:L}=(0,l.useContext)(s.f),{setId:B}=(0,l.useContext)(r.X),{loggedUnity:U,user:G}=(0,l.useContext)(w.V),[H,_]=(0,l.useState)([]),[J,W]=(0,l.useState)(!1),{startLoading:Q,stopLoading:X}=(0,F.Z)(),{trigger:K,handleSubmit:Y,setValue:$,reset:ee,control:eo,getValues:et,formState:{errors:ei},register:ea}=(0,h.cI)(),en=async e=>{Q();let o={...e,unidadeID:U.unidadeID,usuarioID:G.usuarioID,removedItems:H};console.log(o);try{"new"===q?await d.h.post("cadastros/produto/new/insertData",o).then(e=>{I?I(e.data,"produtos"):(O.push("".concat((0,Z.g_)(V))),B(e.data.id)),f.ZP.success(Z.OD.successNew)}):"edit"===q&&(await d.h.post("".concat(V,"/updateData/").concat(a),o),f.ZP.success(Z.OD.successUpdate))}catch(t){t.response&&409===t.response.status?f.ZP.error(Z.OD.errorRepeated):console.log(t)}finally{X()}},el=async()=>{try{await d.h.delete("".concat(V,"/").concat(a,"/").concat(G.usuarioID,"/").concat(U.unidadeID)),B(null),T(!1),f.ZP.success(Z.OD.successDelete)}catch(e){e.response&&409===e.response.status?(f.ZP.error(Z.OD.pendingDelete),T(!1)):console.log(e)}},es=async()=>{try{let e="new"===q?"cadastros/produto/new/getData":"".concat(V,"/getData/").concat(a);await d.h.post(e).then(e=>{console.log("\uD83D\uDE80 ~ getData:",e.data),k(e.data),ee(e.data)})}catch(o){console.log(o)}},er=(e,o)=>{e.produtoAnexoID&&_([...H,e.produtoAnexoID]);let t=et("anexos").filter((e,t)=>t!==o);$("anexos",t),W(!J)},ed=()=>{let e=[...et("anexos"),{nome:"",obrigatorio:1,status:1,descricao:"",observacao:""}];$("anexos",e),W(!J)};return(0,l.useEffect)(()=>{es(),"new"===q&&setTimeout(()=>{K()},300)},[a]),(0,l.useEffect)(()=>{R&&Y(en)()},[R]),(0,i.jsxs)(i.Fragment,{children:[!M&&(0,i.jsx)(v.Z,{}),M&&(0,i.jsxs)("form",{onSubmit:Y(en),className:"space-y-3",children:[(0,i.jsx)(j.Z,{btnCancel:!0,btnNew:!I,btnSave:!0,btnClose:A,manualUrl:P,handleModalClose:N,handleSubmit:()=>Y(en),btnDelete:"edit"===q,onclickDelete:()=>T(!0),type:q,outsideID:z}),(0,i.jsx)(c.Z,{children:(0,i.jsx)(u.Z,{children:(0,i.jsxs)(x.ZP,{container:!0,spacing:5,children:[(0,i.jsx)(b.Z,{xs:11,md:6,title:"Nome",name:"fields.nome",required:!0,control:eo,errors:null==ei?void 0:null===(o=ei.fields)||void 0===o?void 0:o.nome}),(0,i.jsx)(D.Z,{xs:12,md:4,title:"Unidade de medida",name:"unidadeMedida.fields",value:null==M?void 0:M.unidadeMedida.fields,required:!0,options:M.unidadeMedida.options,register:ea,setValue:$,control:eo,errors:null==ei?void 0:null===(t=ei.unidadeMedida)||void 0===t?void 0:t.fields,helpText:"Selecione a unidade de medida"}),(0,i.jsx)(y.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:M.fields.status,typePage:q,register:ea})]})})}),(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(m.Z,{title:"Anexos"}),(0,i.jsx)(u.Z,{children:(0,i.jsxs)(x.ZP,{container:!0,spacing:5,children:[(0,i.jsx)(C,{getValues:et,removeAnexo:er,setValue:$,control:eo,register:ea,errors:ei,type:q},J),(0,i.jsx)(x.ZP,{item:!0,xs:12,children:(0,i.jsx)(p.Z,{variant:"outlined",color:"primary",sx:{mt:1},startIcon:(0,i.jsx)(S.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){ed()},children:"Inserir Anexo"})})]})})]})]}),(0,i.jsx)(g.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+L.title,openModal:E,handleClose:()=>T(!1),handleSubmit:el,btnCancel:!0,btnConfirm:!0})]})};var R=N},77993:function(e,o,t){t.d(o,{Z:function(){return N}});var i=t(85893),a=t(11163),n=t.n(a),l=t(67294),s=t(60565),r=t(83830),d=t(40039),c=t(60664),u=t(49837),x=t(91359),m=t(79072),p=t(29630),h=t(54225),f=t(21609),v=t(87536),g=t(86501),j=t(45061),Z=t(47842),b=t(86887),D=t(46749),y=t(41088),w=t(84220),S=t(29308),A=t(67569),I=t(88475);let C=e=>{let{getValues:o,removeItem:t,control:a,register:n,errors:l,type:s}=e;return o("items")&&o("items").map((e,o)=>{var r,d,c,u;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.Z,{xs:12,md:3,title:"Nome",name:"items[".concat(o,"].nome"),required:!0,control:a,errors:null==l?void 0:null===(r=l.items)||void 0===r?void 0:null===(d=r[o])||void 0===d?void 0:d.nome}),(0,i.jsx)(S.Z,{xs:12,md:6,title:"Descri\xe7\xe3o",name:"items[".concat(o,"].descricao"),required:!1,control:a,errors:null==l?void 0:null===(c=l.items)||void 0===c?void 0:null===(u=c[o])||void 0===u?void 0:u.descricao}),(0,i.jsx)(A.Z,{xs:4,md:1,title:"Ativo",index:o,name:"items[".concat(o,"].status"),value:e.status,typePage:s,register:n}),(0,i.jsx)(A.Z,{xs:4,md:1,title:"Obrigat\xf3rio",index:o,name:"items[".concat(o,"].obrigatorio"),value:e.obrigatorio,typePage:s,register:n}),(0,i.jsx)(I.Z,{xs:4,md:1,title:"Remover",index:o,removeItem:t,item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois possui anexo vinculado a ele"})]})})},F=e=>{var o,t,a,I;let{id:F,btnClose:N,handleConfirmNew:R,handleModalClose:P,newChange:z,manualUrl:E,outsideID:T}=e,{setId:M}=(0,l.useContext)(r.X),k=n(),[O,q]=(0,l.useState)(null),[V,L]=(0,l.useState)(!1),B=F&&F>0?"edit":"new",U=k.pathname,{title:G}=(0,l.useContext)(s.f),{loggedUnity:H,user:_}=(0,l.useContext)(d.V),[J,W]=(0,l.useState)(!1),[Q,X]=(0,l.useState)([]),[K,Y]=(0,l.useState)(!1),{startLoading:$,stopLoading:ee}=(0,y.Z)(),{trigger:eo,handleSubmit:et,setValue:ei,reset:ea,getValues:en,control:el,formState:{errors:es},register:er}=(0,v.cI)(),ed=async()=>{try{let e="new"===B?"cadastros/grupo-anexos/new/getData":"".concat(U,"/getData/").concat(F);await c.h.post(e,{unidadeID:H.unidadeID}).then(e=>{q(e.data),ea(e.data)})}catch(o){console.log(o)}},ec=()=>{let e=[...en("items"),{nome:"",descricao:"",status:!0,obrigatorio:!0}];ei("items",e),Y(!K)},eu=(e,o)=>{if(1===O.items.length){g.ZP.error("\xc9 necess\xe1rio ter pelo menos um item!");return}e.id&&X([...Q,e.id]);let t=en("items").filter((e,t)=>t!==o);ei("items",t),Y(!K)},ex=async e=>{let o={...e,usuarioID:_.usuarioID,unidadeID:H.unidadeID};$(),o.removedItems=Q,o.unidade=H.unidadeID;try{"new"===B?await c.h.post("cadastros/grupo-anexos/new/insertData",o).then(e=>{R?R(e.data,"gruposAnexo"):(k.push("".concat((0,D.g_)(U))),M(e.data.id)),g.ZP.success(D.OD.successNew)}):"edit"===B&&(await c.h.post("".concat(U,"/updateData/").concat(F),o),g.ZP.success(D.OD.successUpdate)),W(!J)}catch(t){t.response&&409===t.response.status?g.ZP.error(D.OD.errorRepeated):console.log(t)}finally{ee()}},em=async()=>{try{await c.h.delete("".concat(U,"/deleteData/").concat(F,"/").concat(_.usuarioID,"/").concat(H.unidadeID)),M(null),setOpen(!1),g.ZP.success(D.OD.successDelete),console.log("entrou")}catch(e){e.response&&409===e.response.status?(g.ZP.error(D.OD.pendingDelete),L(!1)):console.log(e)}};return(0,l.useEffect)(()=>{ed(),"new"===B&&setTimeout(()=>{eo()},300)},[F]),(0,l.useEffect)(()=>{z&&et(ex)()},[z]),(0,i.jsxs)(i.Fragment,{children:[!O&&(0,i.jsx)(Z.Z,{}),O&&(0,i.jsxs)("form",{onSubmit:et(ex),children:[(0,i.jsx)(b.Z,{btnCancel:!0,btnNew:!R,btnSave:!0,manualUrl:E,btnClose:N,handleModalClose:P,handleSubmit:()=>et(ex),btnDelete:"edit"===B,onclickDelete:()=>L(!0),type:B,outsideID:T}),(0,i.jsx)(u.Z,{children:O&&(0,i.jsx)(x.Z,{children:(0,i.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,i.jsx)(S.Z,{xs:11,md:11,title:"Nome",name:"fields.nome",required:!0,control:el,errors:null==es?void 0:null===(o=es.fields)||void 0===o?void 0:o.nome}),(0,i.jsx)(A.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:O.fields.status,typePage:B,register:er}),(0,i.jsx)(S.Z,{xs:12,md:12,title:"Descri\xe7\xe3o",name:"fields.descricao",required:!1,control:el,errors:null==es?void 0:null===(t=es.fields)||void 0===t?void 0:t.descricao}),(0,i.jsx)(w.Z,{xs:12,md:12,title:"Formul\xe1rios",name:"formulario.fields",value:null!==(I=null==O?void 0:O.formulario.fields)&&void 0!==I?I:null,multiple:!0,limitTags:5,required:!0,options:O.formulario.options,register:er,setValue:ei,control:el,errors:null==es?void 0:null===(a=es.formulario)||void 0===a?void 0:a.fields})]})})}),(0,i.jsx)(u.Z,{sx:{mt:4},children:(0,i.jsxs)(x.Z,{children:[(0,i.jsx)(p.Z,{sx:{mb:5},children:"Itens"}),(0,i.jsx)(m.ZP,{container:!0,spacing:3,children:(0,i.jsx)(C,{getValues:en,removeItem:eu,control:el,register:er,errors:es,type:B},K)}),(0,i.jsx)(h.Z,{variant:"outlined",color:"primary",sx:{mt:4},startIcon:(0,i.jsx)(f.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){ec()},children:"Inserir item"})]})})]}),(0,i.jsx)(j.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+G.title,openModal:V,handleClose:()=>L(!1),handleSubmit:em,btnCancel:!0,btnConfirm:!0})]})};var N=F},27304:function(e,o,t){t.d(o,{Z:function(){return A}});var i=t(85893),a=t(44642),n=t(79072),l=t(61953),s=t(49837),r=t(91359),d=t(29630),c=t(67294),u=t(40039),x=t(82747),m=t(60664),p=t(29308),h=t(84220),f=t(1322),v=t(77993),g=t(69291),j=t(62135),Z=t(54225),b=t(21609);let D=c.memo(e=>{let{xs:o,md:t,name:a,register:l,setValue:s,setIsNotFactory:r}=e,[d,u]=(0,c.useState)(1);return(0,c.useEffect)(()=>{a&&l&&(s(a,d),r(1!==d))},[a,l,d,s,r]),(0,i.jsxs)(n.ZP,{item:!0,xs:o,md:t,children:[(0,i.jsxs)(j.Z,{color:"primary",children:[(0,i.jsx)(Z.Z,{onClick:()=>u(1),variant:1===d?"contained":"outlined",children:(0,i.jsxs)("div",{className:"flex items-center gap-2 py-2 px-1",children:[(0,i.jsx)(b.Z,{icon:"mdi:company"}),(0,i.jsx)("p",{className:"capitalize",children:"F\xe1brica"})]})}),(0,i.jsx)(Z.Z,{onClick:()=>u(2),variant:2===d?"contained":"outlined",children:(0,i.jsxs)("div",{className:"flex items-center gap-2 py-2 px-1",children:[(0,i.jsx)(b.Z,{icon:"mdi:truck-fast-outline"}),(0,i.jsx)("p",{className:"capitalize",children:"Fornecedor"})]})})]}),a&&l&&(0,i.jsx)("input",{type:"hidden",name:a,...l(a),value:d})]})}),y=e=>{var o,t,a,n,s,r,x,j,Z;let{fields:b,params:y,habilitaQuemPreencheFormFornecedor:w,setFields:S,handleCnpj:A,validCnpj:I,getValues:C,control:F,errors:N,setValue:R,register:P,reset:z,isNotFactory:E,setIsNotFactory:T}=e,{loggedUnity:M}=(0,c.useContext)(u.V),[k,O]=(0,c.useState)([]),[q,V]=(0,c.useState)([]),[L,B]=(0,c.useState)([]),[U,G]=(0,c.useState)(!1),[H,_]=(0,c.useState)(!1),[J,W]=(0,c.useState)(""),[Q,X]=(0,c.useState)(null),K=async()=>{let e=await m.h.post("/formularios/fornecedor/getModels",{unidadeID:M.unidadeID});O(e.data)},Y=async()=>{let e=await m.h.post("/formularios/fornecedor/getProducts",{unidadeID:M.unidadeID});V(e.data)},$=async()=>{let e=await m.h.post("/formularios/fornecedor/getGruposAnexo",{unidadeID:M.unidadeID});B(e.data)},ee=()=>{S(null),R("fields.cnpj",""),R("fields.razaoSocial",""),R("fields.email",""),R("fields.modelo",null),R("fields.gruposAnexo",[]),R("fields.produtos",[])};(0,c.useEffect)(()=>{z(),K(),Y(),$()},[]);let eo=async(e,o)=>{if(_(!1),"gruposAnexo"==o){B(o=>[...o,e]);let t=[...C("fields.gruposAnexo")];t.push(e),R("fields.gruposAnexo",t)}else if("produtos"==o){V(o=>[...o,e]);let i=[...C("fields.produtos")];i.push(e),R("fields.produtos",i)}G(!U)},et=async e=>{_(!0),"gruposAnexo"==e?(W("Novo grupo de anexos"),X((0,i.jsx)(v.Z,{manualUrl:"/cadastros/grupo-anexos",btnClose:!0,handleModalClose:()=>_(!1),newChange:U,handleConfirmNew:eo,outsideID:!0}))):"produtos"==e&&(W("Novo produto"),X((0,i.jsx)(g.Z,{manualUrl:"/cadastros/produto",btnClose:!0,handleModalClose:()=>_(!1),newChange:U,handleConfirmNew:eo,outsideID:!0})))},ei=async e=>{_(!1)};return k&&q&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(l.Z,{children:[(null==y?void 0:y.habilitaQuemPreencheFormFornecedor)&&(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)(D,{xs:12,md:6,register:P,name:"habilitaQuemPreencheFormFornecedor",setValue:R,setIsNotFactory:T})}),(0,i.jsx)(p.Z,{xs:12,md:12,title:"CNPJ",name:"fields.cnpj",value:null==b?void 0:b.cnpj,onChange:A,clearField:C("fields.cnpj")?ee:null,mask:"cnpj",required:!0,control:F,errors:null==N?void 0:null===(o=N.fields)||void 0===o?void 0:o.cnpj}),!1==I&&(0,i.jsx)(d.Z,{variant:"body2",color:"error",children:"CNPJ inv\xe1lido!"})]}),(0,i.jsx)(p.Z,{xs:12,md:12,title:"Raz\xe3o Social",name:"fields.razaoSocial",value:null==b?void 0:b.razaoSocial,disabled:!I,required:!0,control:F,errors:null==N?void 0:null===(t=N.fields)||void 0===t?void 0:t.razaoSocial}),(0,i.jsx)(p.Z,{xs:12,md:12,title:"Nome Fantasia",name:"fields.nomeFantasia",value:null==b?void 0:b.nomeFantasia,disabled:!I,required:!0,control:F,errors:null==N?void 0:null===(a=N.fields)||void 0===a?void 0:a.nomeFantasia}),E&&(0,i.jsx)(p.Z,{xs:12,md:12,type:"email",title:"E-mail",name:"fields.email",value:null==b?void 0:b.email,disabled:!I,required:!0,control:F,errors:null==N?void 0:null===(n=N.fields)||void 0===n?void 0:n.email}),(0,i.jsx)(h.Z,{xs:12,md:12,title:"Modelo de Formul\xe1rio",name:"fields.modelo",options:k,required:!0,value:null==b?void 0:b.modelo,disabled:!I,register:P,setValue:R,control:F,errors:null==N?void 0:null===(s=N.fields)||void 0===s?void 0:s.modelo}),(0,i.jsx)(h.Z,{xs:12,md:12,title:"Grupos de Anexo",multiple:!0,createNew(){et("gruposAnexo")},name:"fields.gruposAnexo",value:null!==(j=null==b?void 0:b.gruposAnexo)&&void 0!==j?j:[],disabled:!I,options:null!=L?L:[],register:P,setValue:R,control:F,errors:null==N?void 0:null===(r=N.fields)||void 0===r?void 0:r.gruposAnexo}),(0,i.jsx)(h.Z,{xs:12,md:12,title:"Produtos",name:"fields.produtos",value:null!==(Z=null==b?void 0:b.produtos)&&void 0!==Z?Z:[],disabled:!I,multiple:!0,createNew:()=>et("produtos"),required:null==y?void 0:y.obrigatorioProdutoFornecedor,options:null!=q?q:[],register:P,setValue:R,control:F,errors:null==N?void 0:null===(x=N.fields)||void 0===x?void 0:x.produtos}),(0,i.jsx)(f.Z,{title:J,size:"md",openModal:H,setOpenModal:_,handleSave:ei,children:Q})]})};var w=t(34175);let S=e=>{var o,t,p,h,f,v;let{cnpj:g,control:j,setValue:Z,register:b,errors:D,reset:S,getValues:A,isNotFactory:I,setIsNotFactory:C}=e,[F,N]=(0,c.useState)(!1),{loggedUnity:R}=(0,c.useContext)(u.V),[P,z]=(0,c.useState)(null),[E,T]=(0,c.useState)(null),[M,k]=(0,c.useState)(null),O=e=>{18==e.length?(0,x.zk)(e)?(k(!0),q(e)):k(!1):(k(null),z(null))},q=async e=>{try{let o=await m.h.post("/formularios/fornecedor/cnpj",{unidadeID:R.unidadeID,cnpj:e}),t={new:o.data.new,fornecedorID:o.data.fornecedorID,data:o.data.dataAvaliacao,modelo:o.data.modelo.nome,produtos:o.data.produtos,gruposAnexo:o.data.gruposAnexo},i="";t.new&&(i=await V(e)),z({...P,cnpj:t.new?(0,w.PK)(i.data.CNPJ):e,status:t.new?i.data.STATUS:"",dataAbertura:t.new?i.data["DATA ABERTURA"]:"",telefone:t.new?i.data.DDD+" "+i.data.TELEFONE:"",razaoSocial:t.new?i.data["RAZAO SOCIAL"]:o.data.fields.razaoSocial,nomeFantasia:t.new?i.data["NOME FANTASIA"]:o.data.fields.nomeFantasia,email:t.new?i.data.EMAIL:o.data.fields.email,cidade:t.new?i.data.MUNICIPIO+"/"+i.data.UF:"",preenchimento:t}),Z("fields.cnpj",e),Z("fields.razaoSocial",t.new?i.data["RAZAO SOCIAL"]:o.data.fields.razaoSocial),Z("fields.nomeFantasia",t.new?i.data["NOME FANTASIA"]:o.data.fields.nomeFantasia),Z("fields.nome",t.new?i.data["NOME FANTASIA"]:""),Z("fields.email",t.new?i.data.EMAIL:o.data.fields.email),Z("fields.modelo",o.data.modelo.id>0?o.data.modelo:null),Z("fields.gruposAnexo",o.data.gruposAnexo),Z("fields.produtos",o.data.produtos)}catch(a){console.error(a)}},V=async e=>{let o=e.replace(/\D/g,""),t=await m.h.get("https://api-publica.speedio.com.br/buscarcnpj?cnpj=".concat(o));return t},L=async()=>{let e={unidadeID:R.unidadeID};try{let o=await m.h.post("/formularios/fornecedor/paramsNewFornecedor",e);T(o.data)}catch(t){console.error(t)}};return(0,c.useEffect)(()=>{N(!F),g&&g.length>0&&O(g)},[]),(0,c.useEffect)(()=>{L()},[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(a.Z,{children:(0,i.jsxs)(n.ZP,{container:!0,spacing:4,children:[(0,i.jsx)(n.ZP,{item:!0,xs:12,md:6,children:(0,i.jsx)(l.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:(0,i.jsx)(y,{setFields:z,fields:null!=P?P:null,params:E,control:j,errors:D,reset:S,setValue:Z,getValues:A,register:b,handleCnpj:O,validCnpj:M,isNotFactory:I,setIsNotFactory:C},F)})}),(0,i.jsxs)(n.ZP,{item:!0,xs:12,md:6,children:[(0,i.jsx)(s.Z,{children:(0,i.jsx)(r.Z,{children:(0,i.jsxs)(l.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[(0,i.jsx)(d.Z,{variant:"body2",children:(0,i.jsx)("strong",{children:"Dados consultados da Receita Federal"})}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Raz\xe3o Social:"})," ",null==P?void 0:P.razaoSocial]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Nome Fantasia:"})," ",null==P?void 0:P.nomeFantasia]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"CNPJ:"})," ",null==P?void 0:P.cnpj]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Status:"})," ",null==P?void 0:P.status]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Data Abertura:"})," ",null==P?void 0:P.dataAbertura]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Telefone:"})," ",null==P?void 0:P.telefone]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"E-mail:"})," ",null==P?void 0:P.email]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Cidade:"})," ",null==P?void 0:P.cidade]})]})})}),(0,i.jsx)(s.Z,{sx:{mt:4},children:(0,i.jsx)(r.Z,{children:(0,i.jsxs)(l.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[(0,i.jsx)(d.Z,{variant:"body2",children:(0,i.jsx)("strong",{children:"Dados do \xfaltimo formul\xe1rio deste fornecedor"})}),(null==P?void 0:null===(o=P.preenchimento)||void 0===o?void 0:o.new)?(0,i.jsx)(d.Z,{variant:"body2",color:"primary",children:(0,i.jsx)("strong",{children:"Novo fornecedor"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"ID: "})," ",null==P?void 0:null===(t=P.preenchimento)||void 0===t?void 0:t.fornecedorID]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Data de preenchimento:"})," ",null==P?void 0:null===(p=P.preenchimento)||void 0===p?void 0:p.data]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Modelo:"})," ",null==P?void 0:null===(h=P.preenchimento)||void 0===h?void 0:h.modelo]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Grupos de anexo: "}),null==P?void 0:null===(f=P.preenchimento)||void 0===f?void 0:f.gruposAnexo.map((e,o)=>{var t;return"".concat(e.nome).concat(o<(null==P?void 0:null===(t=P.preenchimento)||void 0===t?void 0:t.gruposAnexo.length)-1?", ":"")})]}),(0,i.jsxs)(d.Z,{variant:"caption",children:[(0,i.jsx)("strong",{children:"Produtos: "}),null==P?void 0:null===(v=P.preenchimento)||void 0===v?void 0:v.produtos.map((e,o)=>{var t;return"".concat(e.nome).concat(o<(null==P?void 0:null===(t=P.preenchimento)||void 0===t?void 0:t.produtos.length)-1?", ":"")})]})]})]})})})]})]})})})};var A=S},17844:function(e,o,t){var i=t(60664),a=t(67294);t(1503);let n=()=>{let[e,o]=(0,a.useState)([]),t=localStorage.getItem("report"),n=JSON.parse(t),l=async()=>{try{let e=await i.h.post("relatorio/".concat(n.route),n);o(e.data)}catch(t){console.log(t)}};return(0,a.useEffect)(()=>{n&&l()},[]),e};o.Z=n},42404:function(e,o,t){t.d(o,{W:function(){return a}});var i=t(64004);let a=i.mM.create({page:{flexDirection:"column",backgroundColor:"#FFF",justifyContent:"start",paddingTop:15,paddingBottom:30},title:{},header:{position:"fixed",top:-10,left:0,right:0,margin:"0 auto",fontSize:12,height:50,width:"92%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},content:{marginHorizontal:10,fontSize:11,padding:15,flex:1},footer:{position:"absolute",bottom:20,color:"grey",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:25,fontSize:10},blockTitle:{paddingVertical:5},containerFields:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",paddingTop:2},fields:{display:"flex",flexDirection:"column",gap:"2px",paddingBottom:4,paddingTop:4},fieldTitle:{fontSize:8,opacity:"0.8"},fieldValue:{fontSize:10},separator:{height:"1px",width:"100%",borderBottom:"1px solid #ddd",clear:"both"},table:{width:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid #ddd",borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd",borderTopLeftRadius:3,borderTopRightRadius:3,borderBottomLeftRadius:3,borderBottomRightRadius:3},tableRed:{width:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid #ff625d",borderTop:"1px solid #ff625d",borderLeft:"1px solid #ff625d",borderBottom:"1px solid #ff625d",borderTopLeftRadius:3,borderTopRightRadius:3,borderBottomLeftRadius:3,borderBottomRightRadius:3},tableTitle:{display:"flex",flexDirection:"row",width:"100%",fontSize:8,backgroundColor:"#EEE",borderTopLeftRadius:2,borderTopRightRadius:2,borderLeft:"1px solid #ddd"},tableTitleRed:{display:"flex",flexDirection:"row",width:"100%",fontSize:8,backgroundColor:"#f8e2e2",borderTopLeftRadius:2,borderTopRightRadius:2,borderLeft:"1px solid #f8e2e2"},tableTitlecolumn:{padding:8},tableContainer:{display:"flex",flexDirection:"row",width:"100%"},tableContent:{padding:8,borderLeft:"1px solid #ddd",borderTop:"1px solid #ddd"},tableContentRed:{paddingHorizontal:8,paddingVertical:0,borderLeft:"1px solid #f8e2e2",borderTop:"1px solid #f8e2e2"},tableContentcolumn:{fontSize:9}})},99384:function(e,o,t){var i=t(67294),a=t(46749);let n=()=>{let[e,o]=(0,i.useState)({}),t=(e,t,i,n)=>{let l=new Date(i),s=(0,a.HD)(e,l,n);o(e=>({...e,[t]:s}))};return{setDateFormat:t,dateStatus:e}};o.Z=n}}]);