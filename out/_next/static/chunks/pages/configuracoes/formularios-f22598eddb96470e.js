(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6364],{92689:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/configuracoes/formularios",function(){return o(25372)}])},25372:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return w}});var i=o(85893),n=o(67294),s=o(60664),l=o(93250),a=o(60565),r=o(83830),d=o(11163),c=o.n(d),m=o(46749),u=o(36188),x=o(40039),v=o(86501),h=o(47842),b=o(21609);o(1948);var p=o(84220),j=o(29308),Z=o(67569),g=o(3893),f=o(88475);o(53934);var k=o(87536),I=o(49837),P=o(91359),D=o(85214),S=o(79072),R=o(29630),y=o(75084);let C=e=>{var t,o;let{blocks:n,errors:s,control:l,register:a,getValues:r,removeItem:d,addItem:c,setValue:m,options:u}=e;return r("blocks")&&n&&r("blocks").map((e,x)=>{var v,h,g,k,D,C,N,_;return(0,i.jsx)(I.Z,{md:12,sx:{mt:4},children:(0,i.jsxs)(P.Z,{children:[(0,i.jsx)(R.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:4},children:"Bloco ".concat(x+1)}),(0,i.jsx)("input",{type:"hidden",name:"blocks.[".concat(x,"].parRecebimentompBlocoID"),defaultValue:e.dados.parRecebimentompBlocoID,...a("blocks.[".concat(x,"].parRecebimentompBlocoID"))}),(0,i.jsxs)(S.ZP,{container:!0,spacing:4,children:[(0,i.jsx)(j.Z,{className:"order-1",xs:10,md:1,title:"Sequ\xeancia",name:"blocks.[".concat(x,"].dados.ordem"),value:e.dados.ordem,required:!0,control:l,errors:null==s?void 0:null===(v=s.blocks)||void 0===v?void 0:null===(h=v[x])||void 0===h?void 0:null===(g=h.dados)||void 0===g?void 0:g.ordem}),(0,i.jsx)(j.Z,{className:"order-3 md:order-2",xs:10,md:9,title:"Nome do Bloco",name:"blocks.[".concat(x,"].dados.nome"),value:e.dados.nome,required:!0,control:l,errors:null==s?void 0:null===(k=s.blocks)||void 0===k?void 0:null===(D=k[x])||void 0===D?void 0:null===(C=D.dados)||void 0===C?void 0:C.nome}),(0,i.jsx)(Z.Z,{className:"order-2 md:order-3",xs:2,md:1,title:"Ativo",name:"blocks.[".concat(x,"].dados.status"),value:null===(N=n[x])||void 0===N?void 0:N.dados.status,register:a}),(0,i.jsx)(Z.Z,{className:"order-4",xs:2,md:1,title:"Observa\xe7\xe3o",name:"blocks.[".concat(x,"].dados.obs"),value:null===(_=n[x])||void 0===_?void 0:_.dados.obs,register:a})]}),(0,i.jsxs)(S.ZP,{container:!0,spacing:4,sx:{mt:0},children:[(0,i.jsx)(S.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(R.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Itens"})}),r("blocks")&&n&&e.itens&&e.itens.map((e,r)=>{var c,v,h,b,g,k,I,P,D,S,R,y,C,N,_,w,E,B,O,V,q,F,W,M;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"hidden",name:"blocks.[".concat(x,"].itens.[").concat(r,"].parRecebimentompBlocoItemID"),defaultValue:e.parRecebimentompBlocoItemID,...a("blocks.[".concat(x,"].itens.[").concat(r,"].parRecebimentompBlocoItemID"))}),(0,i.jsx)(j.Z,{xs:12,md:1,title:"Sequ\xeancia",name:"blocks.[".concat(x,"].itens.[").concat(r,"].ordem"),value:e.ordem,required:!0,control:l,errors:null==s?void 0:null===(c=s.blocks)||void 0===c?void 0:null===(v=c[x])||void 0===v?void 0:null===(h=v.itens)||void 0===h?void 0:null===(b=h[r])||void 0===b?void 0:b.ordem}),(0,i.jsx)(p.Z,{xs:12,md:5,title:(null===(k=null===(g=n[x])||void 0===g?void 0:g.itens[r])||void 0===k?void 0:k.itemID)?"Item [".concat(n[x].itens[r].itemID,"]"):"Item",name:"blocks.[".concat(x,"].itens.[").concat(r,"].item"),value:null!==(t=null===(P=null===(I=n[x])||void 0===I?void 0:I.itens[r])||void 0===P?void 0:P.item)&&void 0!==t?t:null,required:!0,disabled:1==e.hasPending,options:u.itens,register:a,setValue:m,control:l,errors:null==s?void 0:null===(D=s.blocks)||void 0===D?void 0:null===(S=D[x])||void 0===S?void 0:null===(R=S.itens)||void 0===R?void 0:null===(y=R[r])||void 0===y?void 0:y.item}),(0,i.jsx)(p.Z,{xs:12,md:2,title:"Alternativa",name:"blocks.[".concat(x,"].itens.[").concat(r,"].alternativa"),value:null!==(o=null===(N=null===(C=n[x])||void 0===C?void 0:C.itens[r])||void 0===N?void 0:N.alternativa)&&void 0!==o?o:null,required:!0,disabled:1==e.hasPending,options:u.alternativas,register:a,setValue:m,control:l,errors:null==s?void 0:null===(_=s.blocks)||void 0===_?void 0:null===(w=_[x])||void 0===w?void 0:null===(E=w.itens)||void 0===E?void 0:null===(B=E[r])||void 0===B?void 0:B.alternativa}),(0,i.jsx)(Z.Z,{xs:3,md:1,title:"Ativo",index:r,name:"blocks.[".concat(x,"].itens.[").concat(r,"].status"),value:null===(V=null===(O=n[x])||void 0===O?void 0:O.itens[r])||void 0===V?void 0:V.status,register:a}),(0,i.jsx)(Z.Z,{xs:3,md:1,title:"Obs",index:r,name:"blocks.[".concat(x,"].itens.[").concat(r,"].obs"),value:null===(F=null===(q=n[x])||void 0===q?void 0:q.itens[r])||void 0===F?void 0:F.obs,register:a}),(0,i.jsx)(Z.Z,{xs:3,md:1,title:"Obrigat\xf3rio",index:r,name:"blocks.[".concat(x,"].itens.[").concat(r,"].obrigatorio"),value:null===(M=null===(W=n[x])||void 0===W?void 0:W.itens[r])||void 0===M?void 0:M.obrigatorio,register:a}),(0,i.jsx)(f.Z,{xs:3,md:1,title:0==r?"Remover":"",index:x,removeItem:()=>d(e,x,r),item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois j\xe1 foi respondido em um formul\xe1rio"})]})}),(0,i.jsx)(S.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(y.Z,{variant:"outlined",color:"primary",startIcon:(0,i.jsx)(b.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){c(x)},children:"Inserir Item"})})]})]})},x)})},N=e=>{let{id:t}=e,{user:o,loggedUnity:l}=(0,n.useContext)(x.V),[a,d]=(0,n.useState)(),[p,Z]=(0,n.useState)(),[f,N]=(0,n.useState)(null),[_,w]=(0,n.useState)([]),[E,B]=(0,n.useState)(null),[O,V]=(0,n.useState)(!1),[q,F]=(0,n.useState)([]),[W,M]=(0,n.useState)(!1),X=c(),z=X.pathname,{setId:A}=(0,n.useContext)(r.X),{setValue:T,register:L,reset:U,getValues:G,control:H,handleSubmit:J,formState:{errors:K}}=(0,k.cI)(),Q=async e=>{let t={unidadeID:l.unidadeID,header:e.header,products:e.products,blocks:e.blocks,arrRemovedItems:q,orientacoes:e.orientacoes};d(null),console.log("onSubmit: ",t);try{await s.h.put("".concat(z,"/recebimentoMp/updateData"),t).then(e=>{v.ZP.success(m.OD.successUpdate),V(!O)})}catch(o){console.log(o)}},Y=e=>{let t=[..._];t[e].itens.push({ordem:t[e].itens.length+1,obs:1,status:1,obrigatorio:1}),w(t),T("blocks.[".concat(e,"].itens.[").concat(t[e].itens.length-1,"].new"),!0),eo(t[e],e,_,f)},$=()=>{let e=[...G("blocks")];e.push({dados:{ordem:e.length+1,nome:"",status:1},itens:[{ordem:1,obs:1,status:1,obrigatorio:1}]}),T("blocks",e),w(e)},ee=(e,t,o)=>{if(console.log("\uD83D\uDE80 ~ length:",_[t].itens.length),1===_[t].itens.length){v.ZP.error("Voc\xea deve ter ao menos um item!");return}let i=[...q];i.push(e),F(i);let n=[...G("blocks")];n[t].itens.splice(o,1),w(n),T("blocks",n),eo(_[t],t,_,f),M(!W)},et=()=>{try{s.h.post("".concat(z,"/recebimentoMp/getData"),{unidadeID:l.unidadeID}).then(e=>{var t,o;console.log("getData: ",e.data),d(e.data.header),Z(e.data.products),w(e.data.blocks),B(null===(t=e.data)||void 0===t?void 0:null===(o=t.orientacoes)||void 0===o?void 0:o.obs),N(e.data.options),U(e.data),setTimeout(()=>{e.data.blocks.map((t,o)=>{eo(t,o,e.data.blocks,e.data.options)})},3e3)})}catch(e){console.log(e)}},eo=(e,t,o,i)=>{let n=i.itens;n=n.filter(t=>{let o=e.itens.some(e=>e.item&&t.id===e.item.id);return!o});let s=[...o];s[t].optionsBlock.itens=n,w(s)};return(0,n.useEffect)(()=>{et()},[t,O]),console.log("errors: ",K),(0,i.jsx)(i.Fragment,{children:a?(0,i.jsxs)("form",{onSubmit:J(Q),children:[a&&(0,i.jsxs)(I.Z,{children:[(0,i.jsx)(u.Z,{btnCancel:!0,btnSave:!0,handleSubmit:()=>J(Q),type:"edit"}),(0,i.jsx)(P.Z,{children:(0,i.jsx)(D.Z,{component:"nav","aria-label":"main mailbox",children:(0,i.jsxs)(S.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(S.ZP,{item:!0,md:4,xs:4,children:(0,i.jsx)(R.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,i.jsx)(S.ZP,{item:!0,md:3,xs:4,children:(0,i.jsx)(R.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,i.jsx)(S.ZP,{item:!0,md:3,xs:4,children:(0,i.jsx)(R.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})}),a.map((e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"hidden",name:"header.[".concat(t,"].parRecebimentompID"),defaultValue:e.parRecebimentompID,...L("headers.[".concat(t,"].parRecebimentompID"))}),(0,i.jsx)(S.ZP,{item:!0,md:4,xs:6,children:e.nomeCampo}),(0,i.jsx)(S.ZP,{item:!0,md:3,xs:3,children:(0,i.jsx)(g.Z,{title:"",name:"header.[".concat(t,"].mostra"),value:e.mostra,register:L})}),(0,i.jsx)(S.ZP,{item:!0,md:3,xs:3,children:(0,i.jsx)(g.Z,{title:"",name:"header.[".concat(t,"].obrigatorio"),value:e.obrigatorio,register:L})})]}))]})})})]}),p&&(0,i.jsx)(I.Z,{sx:{mt:4},children:(0,i.jsx)(P.Z,{children:(0,i.jsx)(D.Z,{component:"nav","aria-label":"main mailbox",children:(0,i.jsxs)(S.ZP,{container:!0,spacing:2,children:[(0,i.jsx)(S.ZP,{item:!0,md:4,xs:4,children:(0,i.jsx)(R.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Nome do Campo"})}),(0,i.jsx)(S.ZP,{item:!0,md:3,xs:4,children:(0,i.jsx)(R.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Mostra no Formul\xe1rio"})}),(0,i.jsx)(S.ZP,{item:!0,md:3,xs:4,children:(0,i.jsx)(R.Z,{variant:"subtitle1",sx:{fontWeight:600},children:"Obrigat\xf3rio"})}),p.map((e,t)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("input",{type:"hidden",name:"products.[".concat(t,"].parRecebimentoMpProdutoID"),defaultValue:e.parRecebimentompProdutoID,...L("products.[".concat(t,"].parRecebimentoMpProdutoID"))}),(0,i.jsx)(S.ZP,{item:!0,md:4,xs:6,children:e.nomeCampo}),(0,i.jsx)(S.ZP,{item:!0,md:3,xs:3,children:(0,i.jsx)(g.Z,{title:"",name:"products.[".concat(t,"].mostra"),value:e.mostra,register:L})}),(0,i.jsx)(S.ZP,{item:!0,md:3,xs:3,children:(0,i.jsx)(g.Z,{title:"",name:"products.[".concat(t,"].obrigatorio"),value:e.obrigatorio,register:L})})]}))]})})})}),_&&(0,i.jsx)(C,{blocks:_,errors:K,control:H,register:L,removeItem:ee,addItem:Y,getValues:G,setValue:T,options:f},W),(0,i.jsx)(S.ZP,{item:!0,xs:12,md:12,sx:{mt:4},children:(0,i.jsx)(y.Z,{variant:"outlined",color:"primary",startIcon:(0,i.jsx)(b.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){$()},children:"Inserir Bloco"})}),a&&(0,i.jsx)(I.Z,{md:12,sx:{mt:4},children:(0,i.jsx)(P.Z,{children:(0,i.jsx)(S.ZP,{container:!0,spacing:4,children:(0,i.jsx)(S.ZP,{item:!0,xs:12,md:12,children:(0,i.jsx)(j.Z,{xs:12,md:12,title:"Orienta\xe7\xf5es",name:"orientacoes.obs",required:!1,value:null==E?void 0:E.obs,multiline:!0,rows:4,control:H})})})})})]}):(0,i.jsx)(h.Z,{})})},_=()=>{let[e,t]=(0,n.useState)(null),o=(0,d.useRouter)(),c=o.pathname,{setTitle:u}=(0,n.useContext)(a.f),{id:x,setId:v}=(0,n.useContext)(r.X);(0,n.useEffect)(()=>{let e=async()=>{await s.h.get(c).then(e=>{t(e.data),u({title:"Formul\xe1rios",subtitle:{id:x,count:e.data.length,new:!1}})})};e()},[x]);let b=(0,m.OL)(c,[{title:"ID",field:"id",size:.2},{title:"Nome",field:"nome",size:.8}]),p=e=>{o.push("".concat(c,"/").concat(e))};return(0,i.jsx)(i.Fragment,{children:e?x&&x>0?1==x?p("fornecedor"):2==x?(0,i.jsx)(N,{id:x}):3==x?(0,i.jsx)("h3",{children:"Em desenvolvimento..."}):4==x?p("limpeza"):null:(0,i.jsx)(l.Z,{result:e,columns:b}):(0,i.jsx)(h.Z,{})})};var w=_}},function(e){e.O(0,[4186,1445,1111,5999,7536,6668,2187,7630,9516,2708,8233,9774,2888,179],function(){return e(e.s=92689)}),_N_E=e.O()}]);