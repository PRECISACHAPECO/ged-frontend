(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2752],{68374:function(e,o,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/formularios/recebimento-mp",function(){return a(20365)}])},93250:function(e,o,a){"use strict";var t=a(85893),n=a(49837),s=a(91359),i=a(69175);let r=e=>{let{result:o,columns:a,btnNew:r=!0,btnPrint:l=!0,btnBack:d,openModal:c,modaLog:u}=e;return(0,t.jsx)(n.Z,{children:(0,t.jsx)(s.Z,{sx:{pt:"0"},children:(0,t.jsx)(i.Z,{rows:o,columns:a,modaLog:u,buttonsHeader:{btnNew:r,btnPrint:l,btnBack:d,openModal:c}})})})};o.Z=r},20365:function(e,o,a){"use strict";a.r(o),a.d(o,{default:function(){return ed}});var t=a(85893),n=a(67294),s=a(60664),i=a(93250),r=a(87536),l=a(56531),d=a(99734),c=a(34282),u=a(29308),m=a(23895),x=a(7071),p=a(61953),f=a(49837),h=a(91359),v=a(29630),g=a(79072),b=a(55343),D=a(19604),j=a(11163),Z=a.n(j),C=a(46749),I=a(86887),y=a(83830),F=a(40039),P=a(39976),S=a(47842),E=a(86501),w=a(66136),N=a(80377);a(27304);var M=a(50287),V=a(84220),A=a(44731);let k=e=>{var o,a,s;let{value:i}=e,{settings:r}=(0,n.useContext)(w.J6);return(0,t.jsx)(f.Z,{style:{height:"100%"},children:(0,t.jsx)(h.Z,{sx:{textAlign:"center"},children:(0,t.jsx)("div",{className:"flex flex-col items-center gap-1",children:(null==i?void 0:i.nome_)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsx)(A.Z,{variant:"rounded",sx:{width:70,height:70},className:"p-1 ".concat("dark"===r.mode?"!bg-[#e0e0e0]":"!bg-[#f5f5f5]"),children:(0,t.jsx)("img",{src:null!==(o=null==i?void 0:i.foto)&&void 0!==o?o:"/imageDefault/factory.svg",alt:"Imagem da logo da f\xe1brica"})})}),(0,t.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600},children:null==i?void 0:i.nome_}),(0,t.jsx)(v.Z,{variant:"subtitle2",children:null==i?void 0:i.cnpj_}),i.email?(0,t.jsx)(v.Z,{variant:"subtitle2",children:null==i?void 0:i.email}):(0,t.jsx)(v.Z,{variant:"subtitle2",color:"error",sx:{textTransform:"italic"},children:"E-mail n\xe3o informado"}),(null==i?void 0:i.telefone)&&(0,t.jsx)(v.Z,{variant:"subtitle2",children:null!==(a=null==i?void 0:i.telefone)&&void 0!==a?a:"--"}),(null==i?void 0:i.cidade)&&(0,t.jsx)(v.Z,{variant:"subtitle2",children:null!==(s=null==i?void 0:i.cidade)&&void 0!==s?s:"--"})]}):(0,t.jsx)(v.Z,{variant:"subtitle1",children:"-- Selecione um fornecedor --"})})})})};var z=a(22841),R=a(75158),H=a(54225),_=a(44373),O=a(3893),T=a(21609);let B=e=>{var o,a,n,s,i,r,l,d,c,m,x,p;let{value:f,index:h,apresentacoes:v,setValue:g,register:b,control:D,errors:j,disabled:Z}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.Z,{xs:12,md:2,title:"Quantidade",name:"produtos[".concat(h,"].quantidade"),register:b,control:D,errors:null==j?void 0:null===(o=j.produtos)||void 0===o?void 0:null===(a=o[h])||void 0===a?void 0:a.quantidade,disabled:Z}),(0,t.jsx)(M.Z,{xs:12,md:2,title:"Data da fabrica\xe7\xe3o",value:f.dataFabricacao,name:"produtos[".concat(h,"].dataFabricacao"),control:D,errors:null==j?void 0:null===(n=j.produtos)||void 0===n?void 0:null===(s=n[h])||void 0===s?void 0:s.dataFabricacao,disabled:Z}),(0,t.jsx)(u.Z,{xs:12,md:2,title:"N\xba Lote",name:"produtos[".concat(h,"].lote"),register:b,control:D,errors:null==j?void 0:null===(i=j.produtos)||void 0===i?void 0:null===(r=i[h])||void 0===r?void 0:r.lote,disabled:Z}),(0,t.jsx)(V.Z,{xs:12,md:2,title:"Apresenta\xe7\xe3o",name:"produtos[".concat(h,"].apresentacao"),type:"string",options:null!=v?v:[],register:b,setValue:g,control:D,errors:null==j?void 0:null===(l=j.produtos)||void 0===l?void 0:null===(d=l[h])||void 0===d?void 0:d.apresentacao,disabled:Z}),(0,t.jsx)(u.Z,{xs:12,md:2,title:"NF",name:"produtos[".concat(h,"].nf"),register:b,control:D,errors:null==j?void 0:null===(c=j.produtos)||void 0===c?void 0:null===(m=c[h])||void 0===m?void 0:m.nf,disabled:Z}),(0,t.jsx)(M.Z,{xs:12,md:2,title:"Data de validade",value:f.dataValidade,name:"produtos[".concat(h,"].dataValidade"),control:D,errors:null==j?void 0:null===(x=j.produtos)||void 0===x?void 0:null===(p=x[h])||void 0===p?void 0:p.dataValidade,disabled:Z})]})},W=e=>{let{produtos:o,setProdutos:a,getValues:i,setValue:r,register:l,control:d,errors:c,disabled:u}=e,[m,x]=(0,n.useState)([]),f=async()=>{try{let e=await s.h.get("/cadastros/apresentacao");x(e.data)}catch(o){console.log("\uD83D\uDE80 ~ error:",o)}},h=(e,t)=>{let{checked:n}=e.target;r("produtos[".concat(t,"].checked_"),n);let s=[...o];s[t].checked_=n,a(s)};return(0,n.useEffect)(()=>{f()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Z,{color:"primary",variant:"subtitle1",sx:{fontWeight:700,mb:2},children:"Produtos aprovados do fornecedor"}),o&&0==o.length&&(0,t.jsx)(v.Z,{color:"warning",variant:"subtitle1",className:"italic",children:(0,t.jsxs)(p.Z,{display:"flex",alignItems:"center",sx:{gap:1},children:[(0,t.jsx)(T.Z,{icon:"typcn:warning",color:"#FFC107"}),(0,t.jsx)("p",{children:"Nenhum fornecedor selecionado!"})]})}),o&&o.length>0&&o.map((e,a)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("input",{type:"hidden",value:e.produtoID,name:"produtos[".concat(a,"].produtoID"),...l("produtos[".concat(a,"].produtoID"))}),(0,t.jsxs)(g.ZP,{container:!0,spacing:4,sx:{pb:2},children:[(0,t.jsx)(g.ZP,{item:!0,xs:12,md:4,children:(0,t.jsx)(z.Z,{control:(0,t.jsx)(R.Z,{onClick:e=>h(e,a),defaultChecked:e.checked_,disabled:u}),label:e.nome,size:"small",sx:{marginRight:"4px","&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}})}),(0,t.jsx)(g.ZP,{item:!0,xs:12,md:8,children:(0,t.jsxs)(p.Z,{display:"flex",alignItems:"center",justifyContent:"end",sx:{gap:4,mt:3},children:[(0,t.jsxs)(v.Z,{variant:"body2",children:["\xdaltima avalia\xe7\xe3o: ",e.ultimaAvaliacao]}),(0,t.jsxs)(v.Z,{variant:"body2",children:["Pr\xf3xima avalia\xe7\xe3o: ",e.proximaAvialacao," (",1==e.diasRestantes?"".concat(e.diasRestantes," dia"):"".concat(e.diasRestantes," dias"),")"]}),(0,t.jsx)(H.Z,{variant:"outlined",size:"small",children:(0,t.jsxs)(p.Z,{display:"flex",alignItems:"center",sx:{gap:1},children:[(0,t.jsx)(T.Z,{icon:"fluent:form-new-20-regular",width:18,height:18}),"Nova avalia\xe7\xe3o"]})}),(0,t.jsx)(H.Z,{variant:"outlined",size:"small",children:(0,t.jsxs)(p.Z,{display:"flex",alignItems:"center",sx:{gap:1},children:[(0,t.jsx)(T.Z,{icon:"raphael:lab",width:18,height:18}),"Laborat\xf3rio (dev)"]})})]})}),e&&e.checked_&&(0,t.jsx)(B,{value:e,apresentacoes:m,index:a,setValue:r,register:l,control:d,errors:c,disabled:u},a)]}),a<o.length-1&&(0,t.jsx)(_.Z,{})]},a))]})},L=e=>{var o,a,i,r,d,c,m,x;let{recebimentoMpID:p,modelo:v,values:b,produtosRecebimento:D,fields:j,disabled:I,register:P,errors:S,getValues:E,setValue:N,control:A,getAddressByCep:z}=e,{user:R,loggedUnity:H}=(0,n.useContext)(F.V),[_,O]=(0,n.useState)({}),[T,B]=(0,n.useState)([]),[L,q]=(0,n.useState)([]),[X,G]=(0,n.useState)(null),[J,K]=(0,n.useState)([]),[Q,U]=(0,n.useState)(!1),{settings:Y}=(0,n.useContext)(w.J6);Y.mode,Z();let{setId:$}=(0,n.useContext)(y.X),ee=(e,o,a,t)=>{let n=new Date(a),s=(0,C.HD)(e,n,t);O(e=>({...e,[o]:s}))},eo=async()=>{let e=await s.h.post("/cadastros/profissional/getProfissionaisAssinatura",{formularioID:2,modeloID:v.id});B(e.data.preenche),et(e.data.preenche)},ea=async()=>{let e=await s.h.post("/formularios/fornecedor/getFornecedoresAprovados",{unidadeID:H.unidadeID,recebimentoMpID:p,modelo:v});q(e.data),en(b.fornecedor,e.data,!1)},et=e=>{let o=R.profissionalID,a=e.find(e=>e.id===o);a&&a.id>0&&N("fieldsHeader.profissional",a)},en=(e,o,a)=>{if(U(!Q),!e){G(null),K([]);return}o&&o.forEach(o=>{o.id===e.id&&(!a&&D&&D.length>0&&D.map(e=>{o.produtos.forEach(o=>{o.produtoID===e.produto.id&&(o.checked_=!0)})}),a&&o.produtos.forEach(e=>{e.checked_=!1}),G(o),K(o.produtos))})};return(0,n.useEffect)(()=>{ea(),eo()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.ZP,{container:!0,alignItems:"stretch",spacing:4,children:[(0,t.jsx)(g.ZP,{item:!0,xs:12,md:9,children:(0,t.jsx)(f.Z,{style:{height:"100%"},children:(0,t.jsx)(h.Z,{children:(0,t.jsxs)(g.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(M.Z,{xs:12,md:2,title:"Data da abertura",name:"fieldsHeader.abertoPor.dataInicio",type:"date",value:null==b?void 0:null===(o=b.abertoPor)||void 0===o?void 0:o.dataInicio,disabled:!0,control:A}),(0,t.jsx)(u.Z,{xs:12,md:2,title:"Hora da abertura",name:"fieldsHeader.abertoPor.horaInicio",type:"time",disabled:!0,register:P,control:A}),(0,t.jsx)(u.Z,{xs:12,md:8,title:"Profissional que abriu",name:"fieldsHeader.abertoPor.profissional.nome",value:null==b?void 0:null===(a=b.abertoPor)||void 0===a?void 0:null===(i=a.profissional)||void 0===i?void 0:i.nome,disabled:!0,register:P,control:A}),(0,t.jsx)(M.Z,{xs:12,md:2,title:"Data da avalia\xe7\xe3o",name:"fieldsHeader.data",type:"date",value:null!==(x=null==b?void 0:b.data)&&void 0!==x?x:new Date,disabled:I,register:P,control:A,setDateFormat:ee,typeValidation:"dataPassado",daysValidation:365,dateStatus:_,errors:null==S?void 0:null===(r=S.fieldsHeader)||void 0===r?void 0:r.data}),(0,t.jsx)(u.Z,{xs:12,md:2,title:"Hora da avalia\xe7\xe3o",name:"fieldsHeader.hora",type:"time",disabled:I,register:P,control:A,errors:null==S?void 0:null===(d=S.fieldsHeader)||void 0===d?void 0:d.hora}),(0,t.jsx)(V.Z,{xs:12,md:4,title:"Profissional preenchimento",name:"fieldsHeader.profissional",type:"string",options:T,disabled:I,register:P,setValue:N,control:A,errors:null==S?void 0:null===(c=S.fieldsHeader)||void 0===c?void 0:c.profissional}),(0,t.jsx)(l.Z,{register:P,errors:S,setValue:N,control:A,fields:j,values:j,getAddressByCep:z,disabled:I}),(0,t.jsx)(V.Z,{xs:12,md:12,title:"Fornecedor",name:"fieldsHeader.fornecedor",type:"string",options:L,onChange:e=>en(e,L,!0),value:null==b?void 0:b.fornecedor,disabled:I,register:P,setValue:N,control:A,errors:null==S?void 0:null===(m=S.fieldsHeader)||void 0===m?void 0:m.fornecedor})]})})})}),(0,t.jsx)(g.ZP,{item:!0,xs:12,md:3,children:(0,t.jsx)(k,{value:X})})]}),(0,t.jsx)(f.Z,{children:(0,t.jsx)(h.Z,{children:(0,t.jsx)(W,{produtos:J,setProdutos:K,getValues:E,setValue:N,register:P,control:A,errors:S,disabled:I},Q)})})]})},q=e=>{var o,a,i,r;let{modeloID:l,values:d,disabled:c,register:m,errors:x,setValue:p,control:v}=e,{user:b}=(0,n.useContext)(F.V),[D,j]=(0,n.useState)({}),[Z,I]=(0,n.useState)([]),y=(e,o,a,t)=>{let n=new Date(a),s=(0,C.HD)(e,n,t);j(e=>({...e,[o]:s}))},P=async()=>{let e=await s.h.post("/cadastros/profissional/getProfissionaisAssinatura",{formularioID:2,modeloID:l});console.log("\uD83D\uDE80 ~ response.data:",e.data),I(e.data.aprova),S(e.data.aprova)},S=e=>{let o=b.profissionalID,a=e.find(e=>e.id===o);a&&a.id>0&&p("fieldsFooter.profissional",a)};return(0,n.useEffect)(()=>{P()},[]),(0,t.jsx)(f.Z,{children:(0,t.jsx)(h.Z,{children:(0,t.jsxs)(g.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(M.Z,{xs:12,md:2,title:"Data da conclus\xe3o",name:"fieldsFooter.dataConclusao",type:"date",value:null!==(r=null==d?void 0:d.dataConclusao)&&void 0!==r?r:new Date,disabled:c,register:m,control:v,setDateFormat:y,typeValidation:"dataPassado",daysValidation:365,dateStatus:D,errors:null==x?void 0:null===(o=x.fieldsFooter)||void 0===o?void 0:o.dataConclusao}),(0,t.jsx)(u.Z,{xs:12,md:2,title:"Hora da conclus\xe3o",name:"fieldsFooter.horaConclusao",type:"time",disabled:c,register:m,control:v,errors:null==x?void 0:null===(a=x.fieldsFooter)||void 0===a?void 0:a.horaConclusao}),(0,t.jsx)(V.Z,{xs:12,md:8,title:"Profissional que aprova",name:"fieldsFooter.profissional",type:"string",options:null!=Z?Z:[],disabled:c,register:m,setValue:p,control:v,errors:null==x?void 0:null===(i=x.fieldsFooter)||void 0===i?void 0:i.profissional})]})})})};var X=a(41088),G=a(92629),J=a(93859),K=a(1503),Q=a(62135),U=a(99384);let Y=e=>{var o,a;let{index:s,value:i,info:r,papelID:l,produtos:d,handlePreenchimentoFornecedor:c,getValues:m,register:x,control:p,setValue:f,errors:h}=e;console.log("\uD83D\uDE80 ~ FieldsFabrica:",i);let{setDateFormat:v,dateStatus:b}=(0,U.Z)(),[D,j]=(0,n.useState)(null!==(o=i.tipo)&&void 0!==o?o:1),Z=e=>{console.log("\uD83D\uDE80 ~ type:",e),j(e),f("naoConformidade.itens[".concat(s,"].tipo"),e)};return(0,t.jsxs)(t.Fragment,{children:[1==l&&(0,t.jsx)(O.Z,{xs:12,md:4,onClick:c,title:"Fornecedor preenche?",name:"naoConformidade.itens[".concat(s,"].fornecedorPreenche"),value:i.fornecedorPreenche,disabled:r.concluido,register:x,helpText:"Se marcado, o fornecedor deve preencher o plano de a\xe7\xe3o com seu acesso ao sistema."}),(0,t.jsxs)(g.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(M.Z,{xs:12,md:3,title:"Data",name:"naoConformidade.itens[".concat(s,"].data"),type:"date",value:null==i?void 0:i.data,disabled:r.concluido||1!=l,register:x,control:p,setDateFormat:v,typeValidation:"dataPassado",daysValidation:999999999999,dateStatus:b,errors:null}),(0,t.jsx)(u.Z,{xs:12,md:3,title:"Hora",name:"naoConformidade.itens[".concat(s,"].hora"),disabled:r.concluido||1!=l,type:"time",register:x,control:p,errors:null}),(0,t.jsx)(V.Z,{xs:12,md:6,title:"Profissional preenchimento",name:"naoConformidade.itens[".concat(s,"].profissionalPreenchimento"),disabled:r.concluido||1!=l,type:"string",options:null!==(a=i.profissionaisOptions.preenchimento)&&void 0!==a?a:[],register:x,setValue:f,control:p,errors:null}),(0,t.jsx)(g.ZP,{item:!0,xs:12,md:3,children:(0,t.jsxs)(Q.Z,{color:"primary",fullWidth:!0,className:"mt-1",disabled:r.concluido||1!=l,children:[(0,t.jsx)(H.Z,{onClick:()=>Z(1),variant:1===D?"contained":"outlined",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 px-1",children:[(0,t.jsx)(T.Z,{icon:"ph:plant"}),(0,t.jsx)("p",{className:"capitalize",children:"Produto"})]})}),(0,t.jsx)(H.Z,{onClick:()=>Z(2),variant:2===D?"contained":"outlined",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 py-[2px] px-1",children:[(0,t.jsx)(T.Z,{icon:"mdi:truck-fast-outline"}),(0,t.jsx)("p",{className:"capitalize",children:"Transporte"})]})})]})}),(0,t.jsx)(V.Z,{xs:12,md:9,title:"Produto",name:"naoConformidade.itens[".concat(s,"].produto"),type:"string",disabled:1!=D||r.concluido||1!=l,options:null!=d?d:[],register:x,setValue:f,control:p,errors:null}),i.dynamicFields&&i.dynamicFields.length>0&&i.dynamicFields.map((e,o)=>(0,t.jsx)(u.Z,{xs:12,md:12,multiline:!0,rows:4,title:e.nomeCampo,value:e.valor,disabled:r.concluido||1!=l,name:"naoConformidade.itens[".concat(s,"].dynamicFields[").concat(o,"].value"),required:1==e.obrigatorio,register:x,control:p},o))]})]})},$=e=>{let{index:o,value:a,info:s,papelID:i,register:r,control:l,setValue:d,errors:c}=e,{settings:m}=(0,n.useContext)(w.J6),{setDateFormat:x,dateStatus:p}=(0,U.Z)();return(0,t.jsx)(t.Fragment,{children:a&&a.fornecedorPreenche&&(0,t.jsxs)("div",{className:"".concat("dark"==m.mode?"bg-[#353D39]":"bg-[#E2EAE4]"," p-5 rounded-xl border border-[#4A8B57]"),children:[(0,t.jsx)(v.Z,{variant:"subtitle1",color:"primary",sx:{fontWeight:700,pb:5},children:"Preenchimento realizado pelo Fornecedor"}),(0,t.jsxs)(g.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(u.Z,{xs:12,md:12,multiline:!0,rows:4,title:"Observa\xe7\xf5es do Fornecedor",name:"naoConformidade.itens[".concat(o,"].obsFornecedor"),disabled:s.concluido||2!=i,control:l,errors:null}),(0,t.jsx)(M.Z,{xs:12,md:3,title:"Data",name:"naoConformidade.itens[".concat(o,"].dataFornecedor"),type:"date",value:null==a?void 0:a.dataFornecedor,register:r,disabled:s.concluido||2!=i,control:l,setDateFormat:x,typeValidation:"dataPassado",daysValidation:999999999999,dateStatus:p,errors:null}),(0,t.jsx)(u.Z,{xs:12,md:3,title:"Hora",name:"naoConformidade.itens[".concat(o,"].horaFornecedor"),disabled:s.concluido||2!=i,type:"time",register:r,control:l,errors:null}),(0,t.jsx)(V.Z,{xs:12,md:6,title:"Profissional preenchimento",name:"naoConformidade.itens[".concat(o,"].usuarioFornecedor"),disabled:s.concluido||2!=i,type:"string",options:[],register:r,setValue:d,control:l,errors:null})]})]})})};var ee=a(15497),eo=a(41470);let ea=e=>{var o;let{index:a,value:n,info:s,papelID:i,register:r,control:l,setValue:d,handleChangeStatus:c,errors:m}=e,{setDateFormat:x,dateStatus:p}=(0,U.Z)(),f=[{id:1,nome:"Conforme"},{id:2,nome:"N\xe3o Conforme"}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(g.ZP,{container:!0,spacing:4,sx:{paddingTop:2},children:[(0,t.jsx)(u.Z,{xs:12,md:12,multiline:!0,rows:4,title:"Conclus\xe3o",name:"naoConformidade.itens[".concat(a,"].conclusao"),disabled:s.concluido||1!=i,control:l,errors:null}),(0,t.jsx)(g.ZP,{item:!0,xs:12,md:12,children:(0,t.jsx)(eo.Z,{row:!0,name:"naoConformidade.itens[".concat(a,"].status"),defaultValue:null==n?void 0:n.status,onChange:e=>c(a,e.target.value),sx:{mt:0},children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(v.Z,{variant:"subtitle2",sx:{pb:0},children:"Avalia\xe7\xe3o Final:"}),f&&f.map((e,o)=>(0,t.jsx)(z.Z,{value:e.id,label:e.nome,control:(0,t.jsx)(ee.Z,{disabled:!1,error:!1,sx:{pr:2}}),disabled:s.concluido||1!=i,fullWidth:!0,sx:{"& .MuiFormControlLabel-label":{fontSize:"0.8rem",color:"text.secondary"},"&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}},o))]})})}),(0,t.jsx)(M.Z,{xs:12,md:3,title:"Data",name:"naoConformidade.itens[".concat(a,"].dataConclusao"),type:"date",value:null==n?void 0:n.dataConclusao,disabled:s.concluido||1!=i,register:r,control:l,setDateFormat:x,typeValidation:"dataPassado",daysValidation:999999999999,dateStatus:p,errors:null}),(0,t.jsx)(u.Z,{xs:12,md:3,title:"Hora",name:"naoConformidade.itens[".concat(a,"].horaConclusao"),disabled:s.concluido||1!=i,type:"time",register:r,control:l,errors:null}),(0,t.jsx)(V.Z,{xs:12,md:6,title:"Profissional preenchimento",name:"naoConformidade.itens[".concat(a,"].profissionalConclusao"),disabled:s.concluido||1!=i,type:"string",options:null!==(o=n.profissionaisOptions.conclusao)&&void 0!==o?o:[],register:r,setValue:d,control:l,errors:null})]})})};var et=a(72819),en=a(24527);let es=e=>{let{recebimentoMpID:o,values:a,info:i,getValues:r,register:l,control:d,setValue:c,errors:u}=e;console.log("\uD83D\uDE80 ~ RecebimentoMpNaoConformidade => values: ",a);let{user:m,loggedUnity:p}=(0,n.useContext)(F.V),{settings:b}=(0,n.useContext)(w.J6),[D,j]=(0,n.useState)(!1),[Z,I]=(0,n.useState)([]),[y,P]=(0,n.useState)(!1);console.log("\uD83D\uDE80 ~ models:",Z);let S=()=>{j(!D)},N=()=>{if(0==Z.length){E.ZP.error("N\xe3o h\xe1 nenhum modelo de n\xe3o conformidade cadastrado para esta unidade! Por favor cadastre em Configura\xe7\xf5es > Formul\xe1rios.");return}if(1==Z.length){M(Z[0]);return}Z.length>1&&P(!0)},M=e=>{var o,a;console.log("\uD83D\uDE80 ~ model:",e);let t=r("naoConformidade.itens");t.push({parRecebimentoMpNaoConformidadeModeloID:e.parRecebimentoMpNaoConformidadeModeloID,modelo:{id:e.parRecebimentoMpNaoConformidadeModeloID,nome:e.nome},profissionalPreenchimento:null,produto:null,profissionalConclusao:null,data:new Date,hora:(0,C.Xn)(),dataFornecedor:new Date,horaFornecedor:(0,C.Xn)(),dataConclusao:new Date,horaConclusao:(0,C.Xn)(),profissionaisOptions:{preenchimento:null!==(o=e.profissionaisOptions.preenchimento)&&void 0!==o?o:[],conclusao:null!==(a=e.profissionaisOptions.conclusao)&&void 0!==a?a:[]},dynamicFields:e.dynamicFields}),c("naoConformidade.itens",t),j(!D),E.ZP.success("N\xe3o conformidade inserida. Preencha os campos...")},V=(e,o)=>{let a=r("naoConformidade.itens");a[e].status=o,console.log("\uD83D\uDE80 ~ naoConformidades:",a),c("naoConformidade.itens",a)},A=async()=>{try{let e=await s.h.get("/formularios/recebimento-mp/getNaoConformidadeModels/".concat(p.unidadeID));I(e.data)}catch(o){console.log("\uD83D\uDE80 ~ getNcModels ~ error",o)}},k=()=>(0,t.jsx)(g.ZP,{container:!0,spacing:4,children:Z&&Z.length>0&&Z.map((e,o)=>(0,t.jsx)(en.Z,{xs:12,md:6,icon:"fluent:form-multiple-48-regular",title:e.nome,action:"select",subtitle:"Ciclo de ".concat(e.ciclo," dias"),handleClick(){M(e),P(!1)}},o))});return(0,n.useEffect)(()=>{A()},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("div",{className:"".concat("dark"==b.mode?"bg-[#4B3537]":"bg-[#F8E2E2]"," p-5 rounded-xl border border-[#FF4D49] text-center"),children:(0,t.jsx)(v.Z,{color:"error",variant:"subtitle1",sx:{fontWeight:700},children:"Plano de A\xe7\xe3o"})}),(0,t.jsx)(f.Z,{children:(0,t.jsx)(h.Z,{children:(0,t.jsx)(v.Z,{variant:"subtitle1",children:"Deve ser preenchido pelos colaboradores respons\xe1veis pelas a\xe7\xf5es de monitoramento e/ou verifica\xe7\xe3o e/ou respons\xe1vel pela execu\xe7\xe3o da a\xe7\xe3o corretiva."})})}),r("naoConformidade.itens")&&r("naoConformidade.itens").map((e,o)=>(0,t.jsx)(f.Z,{children:(0,t.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.Z,{variant:"subtitle1",color:"error",sx:{fontWeight:700},children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(T.Z,{icon:"typcn:warning",color:"#FF4D49"}),(0,t.jsxs)("p",{children:["N\xe3o Conformidade ",o+1]})]})}),(0,t.jsx)(x.Z,{size:"small",skin:"light",label:e.modelo.nome,color:"error",sx:{"& .MuiChip-label":{textTransform:"capitalize"}}})]}),(0,t.jsx)(Y,{index:o,value:e,handlePreenchimentoFornecedor:S,getValues:r,info:i,papelID:m.papelID,produtos:a.produtos,register:l,control:d,setValue:c,errors:u},o),(0,t.jsx)($,{index:o,value:e,info:i,papelID:m.papelID,register:l,control:d,setValue:c,errors:u},o),(0,t.jsx)(ea,{index:o,value:e,info:i,papelID:m.papelID,register:l,control:d,setValue:c,handleChangeStatus:V,errors:u},o)]})},o)),!i.concluido&&1==m.papelID&&(0,t.jsx)(g.ZP,{container:!0,spacing:4,children:(0,t.jsx)(g.ZP,{item:!0,xs:12,children:(0,t.jsx)(H.Z,{variant:"outlined",color:"primary",onClick:N,startIcon:(0,t.jsx)(T.Z,{icon:"material-symbols:add-circle-outline-rounded"}),sx:{mt:2},children:"Inserir nova n\xe3o conformidade"})})})]}),(0,t.jsx)(et.Z,{title:"Modelo de N\xe3o Conformidade",description:"Selecione o modelo de n\xe3o conformidade que deseja inserir. O mesmo pode ser gerenciado em Configura\xe7\xf5es > Formul\xe1rios.",setOpenModal:P,openModal:y,children:(0,t.jsx)(k,{})})]})},ei=e=>{var o;let a;let{id:i}=e,{menu:l,user:j,loggedUnity:M}=(0,n.useContext)(F.V),[V,A]=(0,n.useState)(!1),[k,z]=(0,n.useState)(!1),[R,H]=(0,n.useState)(!1),[_,O]=(0,n.useState)(!1),[T,B]=(0,n.useState)(!1),[W,Q]=(0,n.useState)(!1),[U,Y]=(0,n.useState)(!1),[$,ee]=(0,n.useState)(null),[eo,ea]=(0,n.useState)(!0),[et,en]=(0,n.useState)(null),[ei,er]=(0,n.useState)([]),[el,ed]=(0,n.useState)([]),[ec,eu]=(0,n.useState)(null),{createNewNotification:em}=(0,n.useContext)(P.u),[ex,ep]=(0,n.useState)(!1),[ef,eh]=(0,n.useState)([]),[ev,eg]=(0,n.useState)([]),[eb,eD]=(0,n.useState)([]),[ej,eZ]=(0,n.useState)(null),[eC,eI]=(0,n.useState)([]),[ey,eF]=(0,n.useState)(null),[eP,eS]=(0,n.useState)(""),[eE,ew]=(0,n.useState)(!1),[eN,eM]=(0,n.useState)(!1),[eV,eA]=(0,n.useState)({status:!1,errors:[]}),[ek,ez]=(0,n.useState)(null),{settings:eR}=(0,n.useContext)(w.J6),{setId:eH}=(0,n.useContext)(y.X),{startLoading:e_,stopLoading:eO}=(0,X.Z)(),[eT,eB]=(0,n.useState)(!1),{setReportParameters:eW,sendPdfToServer:eL}=(0,K.Gc)(),[eq,eX]=(0,n.useState)({status:!1,message:"Voc\xea n\xe3o tem permiss\xf5es",messageType:"info"}),eG=Z(),eJ=i&&i>0?"edit":"new",eK=eG.pathname,{reset:eQ,register:eU,getValues:eY,setValue:e$,control:e0,watch:e1,handleSubmit:e2,clearErrors:e3,setError:e9,formState:{errors:e8}}=(0,r.cI)(),e7=()=>{eH(et.modelo.id),eG.push("/configuracoes/formularios/recebimento-mp/")},e4={id:i,name:"Formul\xe1rio do Recebimento de MP",nameComponent:"DadosRecebimentoMp",type:"report",unidadeID:M.unidadeID,papelID:j.papelID,route:"recebimentoMp/dadosRecebimentoMp",icon:"fluent:print-24-regular"},e5=[];e5.push(e4),1==j.papelID&&(a=!1,l.map(e=>{e.menu.map(e=>{e.submenu&&e.submenu.length>0&&e.submenu.map(e=>{"/configuracoes/formularios"==e.rota&&(a=!0)})})}),a)&&e5.push({id:5,name:"Configura\xe7\xf5es do formul\xe1rio",description:"Alterar as configura\xe7\xf5es do modelo de formul\xe1rio.",route:null,type:null,action:e7,modal:!1,icon:"bi:gear",identification:null});let e6=async()=>{},oe=()=>{A(!0);try{s.h.post("".concat(eK,"/getData/").concat(i),{type:eJ,profissionalID:j.profissionalID,unidadeID:M.unidadeID}).then(e=>{var o,a;A(!1),console.log("getData: ",e.data),eh(e.data.fieldsHeader),eg(e.data.fieldsFooter),eD(e.data.fields),er(e.data.produtos),eI(e.data.blocos),ed(e.data.grupoAnexo),eS(e.data.info),en(e.data.unidade),eZ(e.data.link),eF(e.data.ultimaMovimentacao),on(e.data.blocos),ee(e.data.naoConformidade) //! Seta n√£o conformidades
,eQ(e.data);let t=C.WR[null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(a=o.info)||void 0===a?void 0:a.status];eu(t),eX({status:1==j.papelID&&e.data.info.status<40,message:e.data.info.status>40?"Esse formul\xe1rio j\xe1 foi conclu\xeddo, n\xe3o \xe9 mais poss\xedvel alterar as informa\xe7\xf5es!":e.data.info.status<40?"Formul\xe1rio aberto para preenchimento!":40==e.data.info.status?"Este formul\xe1rio est\xe1 aguardando aprova\xe7\xe3o!":null,messageType:"info"}),e6()}).catch(e=>{console.log("\uD83D\uDE80 ~ error:",e),A(!1)})}catch(e){console.log("\uD83D\uDE80 ~ error:",e),A(!1)}},oo=e=>{console.log("checkErrors => validateForm: ",e,e8),e3();let o=!1,a=[];e&&(null==eb||eb.forEach((e,t)=>{let n=e.tabela?"fields[".concat(t,"].").concat(e.tabela):"fields[".concat(t,"].").concat(e.nomeColuna),s=eY(n);1!==e.obrigatorio||s||(e9(n,{type:"manual",message:"Campo obrigat\xf3rio"}),a.push(null==e?void 0:e.nomeCampo),o=!0)}),ei&&ei.length>0&&ei.forEach((e,t)=>{e.produtoAnexosDescricao&&e.produtoAnexosDescricao.forEach((n,s)=>{1===n.obrigatorio&&0==n.anexos.length&&(e9("produtos[".concat(t,"].produtoAnexosDescricao[").concat(s,"].anexos"),{type:"manual",message:"Campo obrigat\xf3rio"}),a.push("Anexo: ".concat(null==e?void 0:e.nome," / ").concat(null==n?void 0:n.nome)),o=!0)})}),eC.forEach((e,t)=>{e.itens.forEach((e,n)=>{let s=eY("blocos[".concat(t,"].itens[").concat(n,"].resposta"));(null==e?void 0:e.obrigatorio)!==1||s||(e9("blocos[".concat(t,"].itens[").concat(n,"].resposta"),{type:"manual",message:"Campo obrigat\xe1rio"}),a.push(null==e?void 0:e.nome),o=!0),e.respostaConfig&&1==e.respostaConfig.anexo&&e.respostaConfig.anexosSolicitados.length>0&&e.respostaConfig.anexosSolicitados.forEach((s,i)=>{1==s.obrigatorio&&s.anexos&&0==s.anexos.length&&(e9("blocos[".concat(t,"].itens[").concat(n,"].respostaConfig.anexosSolicitados[").concat(i,"].anexos"),{type:"manual",message:"Campo obrigat\xe1rio"}),a.push("Anexo: ".concat(null==e?void 0:e.nome," / ").concat(null==s?void 0:s.nome)),o=!0)})})}),el&&el.length>0&&el.forEach((e,t)=>{e.itens.forEach((n,s)=>{1===n.obrigatorio&&0==n.anexos.length&&(e9("grupoAnexo[".concat(t,"].itens[").concat(s,"].anexos"),{type:"manual",message:"Campo obrigat\xe1rio"}),a.push("Anexo: ".concat(null==e?void 0:e.nome," / ").concat(null==n?void 0:n.nome)),o=!0)})})),eA({status:o,errors:a})},oa=async e=>{if(9===e.length){let o=e.replace(/[^0-9]/g,"");try{let a=await s.h.get("https://viacep.com.br/ws/".concat(o,"/json/"));a.data.localidade?(eb.forEach(async(e,o)=>{("logradouro"===e.nomeColuna||"bairro"===e.nomeColuna||"cidade"===e.nomeColuna||"estado"===e.nomeColuna)&&(await e$("fields[".concat(o,"].logradouro"),a.data.logradouro),await e$("fields[".concat(o,"].bairro"),a.data.bairro),await e$("fields[".concat(o,"].cidade"),a.data.localidade),await e$("fields[".concat(o,"].estado"),a.data.uf))}),E.ZP.success("Endere\xe7o encontrado!")):E.ZP.error("Endere\xe7o n\xe3o encontrado!")}catch(t){console.error(t)}}},ot=e=>{console.log("abre o modal"),ez(e),oo(!0),ew(!0)},on=e=>{let o=!0;e.forEach(e=>{e.itens.forEach(e=>{e.respostaConfig&&1==e.respostaConfig.bloqueiaFormulario&&(o=!1)})}),ea(o)},os=async e=>{console.log("\uD83D\uDE80 ~ conclusionForm:",e),eL(i,ek,"recebimento-mp"),e.conclusion=!0,await e2(or)(e)},oi=(e,o,a)=>{let t=30==e?"Em preenchimento":40==e?"Conclu\xeddo":50==e?"Reprovado":60==e?"Aprovado parcialmente":70==e?"Aprovado":"Pendente",n={titulo:"Formul\xe1rio de Fornecedor ".concat(t),descricao:"O formul\xe1rio de Fornecedor #".concat(i," est\xe1 ").concat(t,"."),url:"/formularios/fornecedor/",urlID:i,tipoNotificacaoID:6,usuarioGeradorID:j.usuarioID,usuarioID:0,unidadeID:M.unidadeID,papelID:1};if(n&&(em(n),o)){let s={titulo:"Fornecedor gerado",descricao:"O formul\xe1rio de Fornecedor #".concat(i," est\xe1 ").concat(t," e gerou uma n\xe3o conformidade."),url:"/formularios/fornecedor/nao-conformidade/",urlID:a,tipoNotificacaoID:5,usuarioGeradorID:j.usuarioID,usuarioID:0,unidadeID:M.unidadeID,papelID:1};em(s)}},or=async function(e){var o,a;let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!0===t.conclusion&&(e.concluiForm=!0,e.info.status=null!==(o=t.status)&&void 0!==o?o:eP.status,e.obsConclusao=t.obsConclusao);let n={form:e,auth:{usuarioID:j.usuarioID,profissionalID:null!==(a=j.profissionalID)&&void 0!==a?a:0,papelID:j.papelID,unidadeID:M.unidadeID}};console.log("\uD83D\uDE80 ~ data:",n),e_();try{"edit"==eJ?(Q(!0),await s.h.post("".concat(eK,"/updateData/").concat(i),n).then(o=>{E.ZP.success(C.OD.successUpdate),console.log("\uD83D\uDE80 ~ response edit email:",o),Q(!1),oi(e.status,e.naoConformidade,null)})):"new"==eJ?await s.h.post("".concat((0,C.g_)(eK),"/insertData"),n).then(e=>{eG.push("".concat((0,C.g_)(eK))),console.log("\uD83D\uDE80 ~ response new email:",e),eH(e.data),E.ZP.success(C.OD.successNew)}):E.ZP.error(C.OD.error)}catch(r){console.log("errro da fun\xe7\xe3o update/email",r)}finally{eO()}},ol=async(e,o)=>{H(!0);let a=e.target.files;if(a&&a.length>0){var t;let n=new FormData;for(let r=0;r<a.length;r++)n.append("files[]",a[r]);n.append("usuarioID",j.usuarioID),n.append("unidadeID",M.unidadeID),n.append("grupoAnexoItemID",null!==(t=o.grupoAnexoItemID)&&void 0!==t?t:null),await s.h.post("".concat(eK,"/saveAnexo/").concat(i,"/grupo-anexo/").concat(j.usuarioID,"/").concat(et.unidadeID),n).then(e=>{H(!1);let o=eY();or(o)}).catch(e=>{var o,a,t;H(!1),E.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao atualizar anexo, tente novamente!")})}},od=async(e,o)=>{B(!0);let a=e.target.files;if(a&&a.length>0){var t,n;let r=new FormData;for(let l=0;l<a.length;l++)r.append("files[]",a[l]);r.append("usuarioID",j.usuarioID),r.append("unidadeID",M.unidadeID),r.append("parRecebimentoMpModeloBlocoID",null!==(t=o.parRecebimentoMpModeloBlocoID)&&void 0!==t?t:null),r.append("itemOpcaoAnexoID",null!==(n=o.itemOpcaoAnexoID)&&void 0!==n?n:null),await s.h.post("".concat(eK,"/saveAnexo/").concat(i,"/item/").concat(j.usuarioID,"/").concat(et.unidadeID),r).then(e=>{B(!1);let o=eY();or(o)}).catch(e=>{var o,a,t;B(!1),E.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao atualizar anexo, tente novamente!!!!")})}},oc=async e=>{try{var o;let a=await s.h.post("/cadastros/item/getItemConfigs",{itemID:e.itemID,alternativaItemID:null!==(o=e.alternativa.id)&&void 0!==o?o:null}),t=eC.map(o=>({...o,itens:o.itens.map(o=>o.itemID==e.itemID?{...o,respostaConfig:{...a.data}}:o)}));eI(t)}catch(n){console.log("error",n)}},ou=async e=>{e&&await s.h.delete("".concat(eK,"/deleteAnexo/").concat(i,"/").concat(e.anexoID,"/").concat(et.unidadeID,"/").concat(j.usuarioID,"/item")).then(e=>{let o=eY();or(o)}).catch(e=>{var o,a,t;E.ZP.error(null!==(t=null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)&&void 0!==t?t:"Erro ao remover anexo, tente novamente!")})},om=e=>{let o=[...eC];o.map((o,a)=>{o.itens.map((o,t)=>{e$("blocos[".concat(a,"].itens[").concat(t,"].resposta"),o.alternativas[e])})}),eI(o=>o.map(o=>({...o,itens:o.itens.map(o=>({...o,resposta:o.alternativas[e]&&o.alternativas[e].id>0?o.alternativas[e]:null}))}))),console.log("id do fornecedorrr",eY("fieldsHeader.fornecedor.id")),z(!k);let a=eY();or(a)};return(0,n.useEffect)(()=>{"edit"==eJ&&oe()},[i,W]),(0,n.useEffect)(()=>{oo(!1)},[]),(0,n.useEffect)(()=>{eW({id:i,nameComponent:"DadosRecebimentoMp",route:"recebimentoMp/dadosRecebimentoMp",unidadeID:M.unidadeID,papelID:j.papelID,usuarioID:j.usuarioID})},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Z,{show:V}),(0,t.jsxs)("form",{onSubmit:e2(or),children:[(0,t.jsx)(I.Z,{btnCancel:!0,btnSave:!eP.concluido,btnSend:1==j.papelID&&eP.status>=30&&!eP.concluido,btnPrint:"edit"==eJ,btnDelete:eP.status<40,onclickDelete:()=>eB(!0),actionsData:e5,actions:!0,handleSubmit:()=>e2(or),handleSend:ot,iconConclusion:"mdi:check-bold",titleConclusion:"Concluir Formul\xe1rio",title:"Recebimento de MP",componentSaveReport:(0,t.jsx)(J.Z,{}),btnStatus:1==j.papelID&&"edit"==eJ,handleBtnStatus:()=>ep(!0),type:eJ,status:ec}),(0,t.jsxs)("div",{className:"flex gap-2 mb-2",children:[ec&&(0,t.jsx)(x.Z,{size:"small",skin:"light",color:ec.color,label:ec.title,sx:{"& .MuiChip-label":{textTransform:"capitalize"}}}),et&&et.modelo&&(0,t.jsx)(x.Z,{size:"small",skin:"light",label:et.modelo.nome,sx:{"& .MuiChip-label":{textTransform:"capitalize"}}})]}),(0,t.jsxs)(p.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[eP&&""!=eP.cabecalhoModelo&&(0,t.jsx)(f.Z,{children:(0,t.jsx)(h.Z,{children:(0,t.jsx)(v.Z,{variant:"subtitle1",children:eP.cabecalhoModelo})})}),et&&(0,t.jsx)(L,{recebimentoMpID:i,modelo:et.modelo,values:ef,produtosRecebimento:ei,fields:eb,getValues:eY,disabled:!eq.status,register:eU,errors:e8,setValue:e$,control:e0,getAddressByCep:oa}),eC&&eC.map((e,o)=>(0,t.jsx)(d.Z,{index:o,blockKey:"parRecebimentoMpModeloBlocoID",handleFileSelect:od,setItemResposta:oc,handleRemoveAnexoItem:ou,setBlocos:eI,changeAllOptions:om,values:e,control:e0,register:eU,setValue:e$,errors:null==e8?void 0:e8.blocos,disabled:!eq.status},k)),el&&el.map((e,o)=>(0,t.jsx)(m.Z,{values:{grupo:e,loadingFile:R,indexGrupo:o,handleFileSelect:ol,handleRemove:handleRemoveAnexoGroup,folder:"grupo-anexo",disabled:!eq.status,error:e8}},o)),eP&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(f.Z,{children:(0,t.jsx)(h.Z,{children:(0,t.jsx)(g.ZP,{container:!0,spacing:4,children:(0,t.jsx)(g.ZP,{item:!0,xs:12,md:12,children:(0,t.jsxs)(b.Z,{fullWidth:!0,children:[(0,t.jsx)(v.Z,{variant:"subtitle1",sx:{fontWeight:600,mb:2},children:"Observa\xe7\xf5es (campo de uso exclusivo da validadora)"}),(0,t.jsx)(u.Z,{title:"Observa\xe7\xe3o (opcional)",name:"info.obs",multiline:!0,rows:4,value:eP.obs,disabled:!eq.status,control:e0})]})})})})})}),et&&ev&&!ev.concluded&&(0,t.jsx)(q,{modeloID:et.modelo.id,values:ev,register:eU,disabled:!1,errors:e8,setValue:e$,control:e0}),ev&&ev.concluded&&(null===(o=ev.conclusion)||void 0===o?void 0:o.profissional)&&(0,t.jsx)(v.Z,{variant:"caption",children:"Conclu\xeddo por ".concat(ev.conclusion.profissional.nome," em ").concat(ev.conclusion.dataFim," ").concat(ev.conclusion.horaFim,".")}),eP.naoConformidade&&(0,t.jsx)(es,{recebimentoMpID:i,values:$,info:eP,getValues:eY,register:eU,control:e0,setValue:e$,errors:e8}),eq.message&&(0,t.jsx)(D.Z,{severity:"warning",children:eq.message}),ey&&(0,t.jsxs)(D.Z,{severity:"info",children:["\xdaltima movimenta\xe7\xe3o: Profissional ".concat(ey.nome," do(a) ").concat(ey.nomeFantasia," movimentou o formul\xe1rio de ").concat(ey.statusAnterior," para ").concat(ey.statusAtual," em ").concat(ey.dataHora,"."),ey.observacao&&(0,t.jsxs)("p",{children:[(0,t.jsx)("br",{}),'Mensagem: "',ey.observacao,'"']})]}),ex&&(0,t.jsx)(c.Z,{title:"Hist\xf3rico do Formul\xe1rio",text:"Listagem do hist\xf3rico das movimenta\xe7\xf5es do formul\xe1rio ".concat(i," do Recebimento de MP."),id:i,parFormularioID:2,formStatus:eP.status,hasFormPending:U,canChangeStatus:!1,openModal:ex,handleClose:()=>ep(!1),btnCancel:!0,btnConfirm:!0,handleSubmit:!1}),(0,t.jsx)(N.Z,{openModal:eE,handleClose(){ew(!1),oo(!1)},title:"Concluir Formul\xe1rio",text:"Deseja realmente concluir este formul\xe1rio?",info:eP,canChange:!U,register:eU,setValue:e$,getValues:eY,btnCancel:!0,btnConfirm:!0,btnConfirmColor:"primary",conclusionForm:os,listErrors:eV,canApprove:eo}),(0,t.jsx)(G.Z,{title:"Excluir Formul\xe1rio",description:"Tem certeza que deseja exluir o formulario?",params:{route:"formularios/recebimento-mp/delete/".concat(i),messageSucceded:"Formul\xe1rio exclu\xeddo com sucesso!",MessageError:"Dado possui pend\xeancia!"},open:eT,handleClose:()=>eB(!1)})]})]})]})};var er=a(60565);let el=()=>{let{user:e,loggedUnity:o}=(0,n.useContext)(F.V),[a,r]=(0,n.useState)(null),l=(0,j.useRouter)(),d=l.pathname,{setTitle:c}=(0,n.useContext)(er.f),{id:u}=(0,n.useContext)(y.X),m=async()=>{await s.h.get("".concat(d,"/getList/").concat(o.unidadeID,"/").concat(e.papelID,"/").concat(e.usuarioID)).then(e=>{r(e.data),c({title:"Recebimento de MP",subtitle:{id:u,count:e.data.length,new:!1}})})};(0,n.useEffect)(()=>{m()},[u]);let x=2==e.papelID?[{headerName:"ID",field:"id",size:.1},{headerName:"Data",field:"data",size:.1,type:"date"},{headerName:"F\xe1brica",field:"fabrica",size:.2},{headerName:"Profissional",field:"profissional",size:.2},{headerName:"Modelo",field:"modelo",size:.2},{headerName:"Status",field:{name:"status",cor:"cor"},size:.2}]:[{headerName:"ID",field:"id",size:.1},{headerName:"Data",field:"data",size:.1,type:"date"},{headerName:"Fornecedor",field:"fornecedor",size:.2},{headerName:"Profissional",field:"profissional",size:.2},{headerName:"Modelo",field:"modelo",size:.2},{headerName:"Status",field:{name:"status",cor:"cor"},size:.2}],p=(0,C.OL)(d,x);return(0,t.jsx)(t.Fragment,{children:a?u&&u>0?(0,t.jsx)(ei,{id:u}):(0,t.jsx)(i.Z,{result:a,columns:p}):(0,t.jsx)(S.Z,{show:!0})})};var ed=el}},function(e){e.O(0,[9349,1515,7842,9525,7282,5815,2039,4105,9774,2888,179],function(){return e(e.s=68374)}),_N_E=e.O()}]);