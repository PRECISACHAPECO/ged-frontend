(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9336],{45765:function(e,n,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/registro/sections/SectionThree",function(){return o(93778)}])},82747:function(e,n,o){"use strict";function i(e){if(14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let n=e.length-2,o=e.substring(0,n),i=e.substring(n),t=0,r=n-7;for(let s=n;s>=1;s--)t+=o.charAt(n-s)*r--,r<2&&(r=9);let l=t%11<2?0:11-t%11;if(l!=i.charAt(0))return!1;n+=1,o=e.substring(0,n),t=0,r=n-7;for(let c=n;c>=1;c--)t+=o.charAt(n-c)*r--,r<2&&(r=9);return(l=t%11<2?0:11-t%11)==i.charAt(1)}function t(e){let n;if(11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let o=0;for(let i=1;i<=9;i++)o+=parseInt(e.substring(i-1,i))*(11-i);if((10==(n=10*o%11)||11===n)&&(n=0),n!==parseInt(e.substring(9,10)))return!1;o=0;for(let t=1;t<=10;t++)o+=parseInt(e.substring(t-1,t))*(12-t);return(10==(n=10*o%11)||11===n)&&(n=0),n===parseInt(e.substring(10,11))}function r(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}o.d(n,{dI:function(){return r},sw:function(){return t},zk:function(){return i}})},93778:function(e,n,o){"use strict";o.r(n);var i=o(85893),t=o(60664),r=o(61953),s=o(79072),l=o(75084),c=o(29630),a=o(86501),d=o(21609),u=o(17288);o(61310);var x=o(67294),f=o(82747),v=o(39976);let h=e=>{var n,o,h,m,p,j,Z;let{handlePrev:y,dataGlobal:g,setDataGlobal:D}=e;console.log("\uD83D\uDE80 ~ dataGlobal:",g);let[b,w]=(0,x.useState)(!0),[E,I]=(0,x.useState)(!1),O=(0,u.a)(),{createNeWNotification:T}=(0,x.useContext)(v.u),_=()=>{if(g.sectionOne.email&&(0,f.dI)(g.sectionOne.email)){let e={cnpj:g.sectionOne.cnpj,nomeFornecedor:g.sectionOne.nomeFantasia,destinatario:g.sectionOne.email};t.h.post("/registro-fornecedor/sendMailNewFornecedor",{data:e}).then(e=>{a.ZP.success("E-mail enviado com sucesso")}).catch(e=>{console.error("Erro ao enviar email",e)})}},C=()=>{I(!0),t.h.post("/registro-fornecedor/registerNew",{data:g}).then(e=>{if(201===e.status)a.ZP.error(e.data.message);else{let n={titulo:"Cadastro realizado com sucesso",descricao:"Ol\xe1 ".concat(g.sectionOne.nomeFantasia,", seja bem-vindo(a) ao GEDagro!"),url:null,urlID:null,tipoNotificacaoID:1,usuarioGeradorID:null,usuarioID:e.data.usuarioID,unidadeID:e.data.unidadeID};T(n),a.ZP.success("Cadastro efetuado com sucesso!");let{cnpj:o,senha:i}=null==g?void 0:g.sectionOne;return _(),O.loginFornecedor({cnpj:o,password:i,rememberMe:b})}}).then(()=>{setTimeout(()=>{a.ZP.success("Efetuando login no sistema")},2e3)}).catch(e=>{a.ZP.error("Erro: "+e.message)}).finally(()=>{I(!1)})};return(0,x.useEffect)(()=>{var e,n,o,i,t,r;let s={logradouro:null==g?void 0:null===(e=g.sectionTwo)||void 0===e?void 0:e.logradouro,numero:null==g?void 0:null===(n=g.sectionTwo)||void 0===n?void 0:n.numero,complemento:null==g?void 0:null===(o=g.sectionTwo)||void 0===o?void 0:o.complemento,bairro:null==g?void 0:null===(i=g.sectionTwo)||void 0===i?void 0:i.bairro,cidade:null==g?void 0:null===(t=g.sectionTwo)||void 0===t?void 0:t.cidade,uf:null==g?void 0:null===(r=g.sectionTwo)||void 0===r?void 0:r.uf},l=Object.entries(s).map(e=>{let[n,o]=e;if(o)return"".concat(o,", ")}).join("").slice(0,-2)+".";D({...g,sectionThree:{endereco:l}})},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.Z,{sx:{mb:4},children:[(0,i.jsx)(c.Z,{variant:"h5",children:"Verifique as informa\xe7\xf5es"}),(0,i.jsx)(c.Z,{sx:{color:"text.secondary"},children:"Envie se estiver tudo certo"})]}),(0,i.jsx)(s.ZP,{container:!0,spacing:5,children:(0,i.jsxs)(s.ZP,{item:!0,xs:12,children:[(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"text.secondary"},children:"CNPJ"}),(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:null==g?void 0:null===(n=g.sectionOne)||void 0===n?void 0:n.cnpj})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"text.secondary"},children:"Nome Fantasia"}),(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:null==g?void 0:null===(o=g.sectionOne)||void 0===o?void 0:o.nomeFantasia})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"text.secondary"},children:"Raz\xe3o Social"}),(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:null==g?void 0:null===(h=g.sectionOne)||void 0===h?void 0:h.razaoSocial})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"text.secondary"},children:"Email Institucional"}),(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:null==g?void 0:null===(m=g.sectionOne)||void 0===m?void 0:m.email})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"text.secondary"},children:"Telefone"}),(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:null==g?void 0:null===(p=g.sectionTwo)||void 0===p?void 0:p.telefone})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"text.secondary"},children:"Cep"}),(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:null==g?void 0:null===(j=g.sectionTwo)||void 0===j?void 0:j.cep})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(c.Z,{variant:"caption",sx:{color:"text.secondary"},children:"Endere\xe7o"}),(0,i.jsx)(c.Z,{sx:{color:"text.primary"},children:null==g?void 0:null===(Z=g.sectionThree)||void 0===Z?void 0:Z.endereco})]})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",justifyContent:"space-between",mt:5},children:[(0,i.jsx)(l.Z,{color:"secondary",variant:"contained",onClick:y,startIcon:(0,i.jsx)(d.Z,{icon:"mdi:chevron-left",fontSize:20}),children:"Anterior"}),(0,i.jsx)(l.Z,{type:"submit",onClick:C,color:"success",variant:"contained",disabled:E,children:"Concluir"})]})]})})]})};n.default=h},61310:function(){}},function(e){e.O(0,[2521,9774,2888,179],function(){return e(e.s=45765)}),_N_E=e.O()}]);