"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9170],{80587:function(e,o,n){n(85893),n(21609),n(10179),n(42107),n(88475),n(73731),n(53934)},23895:function(e,o,n){n.d(o,{Z:function(){return w}});var t=n(85893),s=n(67294),a=n(66136),i=n(79072),l=n(72389),r=n(80562),d=n(21609),c=n(10179),u=n(42107),x=n(73731),m=n(53934);let p=e=>{var o;let{key:n,item:s,handleFileClick:a,indexGrupo:p,indexItem:v,selectedItem:h,handleFileSelect:j,handleRemove:f,loadingFile:g,folder:Z,error:b,disabled:A,modeTheme:D,inputRef:w}=e;return console.log("\uD83D\uDE80 ~ AnexoGrid item:",s),(0,t.jsx)(i.ZP,{item:!0,xs:12,md:3,children:(0,t.jsxs)("div",{className:"".concat((null==b?void 0:b[n])?"border border-red-500":"dark"===D?"bg-[#202023]":"bg-[#F6F6F8]"," rounded-lg flex flex-col relative z-10"),children:[(0,t.jsx)("div",{className:"flex items-center justify-center p-2 mt-1 ",children:(0,t.jsx)("p",{className:"font-medium text-sm ",children:s.nome})}),(0,t.jsx)("div",{className:"flex justify-center items-center cursor-pointer p-1 h-[100px] w-full ",disabled:A,onClick(){s.anexo&&s.anexo.path&&s.anexo.exist?window.open(s.anexo.path,"_blank"):A||a(s)},children:(0,t.jsxs)("div",{className:"flex p-1 justify-center items-center gap-2 rounded-lg w-full h-full m-3 border-2 border-dashed hover:border-[#4A8B57] transition-colors ".concat("dark"===D?" border-[#27272a]":"rgba(76, 78, 100, 0.12)"),children:[h&&h.grupoAnexoItemID==s.grupoAnexoItemID&&(0,t.jsx)(x.Z,{show:g,title:"Enviando anexo..."}),(0,t.jsx)("div",{className:"flex items-center gap-3",children:s.anexo&&s.anexo.exist?(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)(u.Z,{data:s.anexo}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)("p",{className:"text-sm opacity-80",children:[s.anexo.nome,(0,t.jsx)("span",{className:"text-xs opacity-50 ml-1",children:"(".concat((s.anexo.size/1024/1024).toFixed(2),"MB)")})]}),s.descricao&&(0,t.jsx)(m.Z,{text:s.descricao})]}),(0,t.jsx)("p",{className:"text-xs opacity-50",children:new Date(s.anexo.time).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})}):(0,t.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,t.jsx)(c.Z,{className:"w-8 h-8 ".concat(s.anexo&&s.anexo.exist?"fill-[#666CFF]":"fill-current")}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("h6",{className:"text-sm font-normal opacity-80",children:"Adicione um arquivo"}),s.descricao&&(0,t.jsx)(m.Z,{text:s.descricao})]})]})})]})}),(0,t.jsx)("div",{className:"flex items-center justify-between gap-1 p-2 py-3 pl-4",children:(0,t.jsx)(l.Z,{title:1==s.hasPending?"Este item n\xe3o pode mais ser removido pois j\xe1 foi respondido em um formul\xe1rio":"Remover este item",children:(0,t.jsx)(r.Z,{color:"error",onClick:()=>f(s),disabled:!(null===(o=s.anexo)||void 0===o?void 0:o.exist)||A,children:(0,t.jsx)(d.Z,{icon:"tabler:trash-filled"})})})}),(0,t.jsx)("input",{type:"file",ref:w,style:{display:"none"},onChange:e=>j(e,h,Z)})]})})};n(80587);var v=n(92945),h=n(49837),j=n(91359),f=n(29630),g=n(85390),Z=n(87054),b=function(e){return(0,t.jsx)("svg",{fill:"currentColor",viewBox:"0 0 16 16",height:"1em",width:"1em",...e,children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 01.5-.5h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4a.5.5 0 01.5-.5h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5zm0-4a.5.5 0 01.5-.5h10a.5.5 0 010 1H3a.5.5 0 01-.5-.5z"})})},A=function(e){return(0,t.jsx)("svg",{fill:"currentColor",viewBox:"0 0 16 16",height:"1em",width:"1em",...e,children:(0,t.jsx)("path",{d:"M1 2.5A1.5 1.5 0 012.5 1h3A1.5 1.5 0 017 2.5v3A1.5 1.5 0 015.5 7h-3A1.5 1.5 0 011 5.5v-3zM2.5 2a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5h-3zm6.5.5A1.5 1.5 0 0110.5 1h3A1.5 1.5 0 0115 2.5v3A1.5 1.5 0 0113.5 7h-3A1.5 1.5 0 019 5.5v-3zm1.5-.5a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5h-3zM1 10.5A1.5 1.5 0 012.5 9h3A1.5 1.5 0 017 10.5v3A1.5 1.5 0 015.5 15h-3A1.5 1.5 0 011 13.5v-3zm1.5-.5a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5h-3zm6.5.5A1.5 1.5 0 0110.5 9h3a1.5 1.5 0 011.5 1.5v3a1.5 1.5 0 01-1.5 1.5h-3A1.5 1.5 0 019 13.5v-3zm1.5-.5a.5.5 0 00-.5.5v3a.5.5 0 00.5.5h3a.5.5 0 00.5-.5v-3a.5.5 0 00-.5-.5h-3z"})})};let D=e=>{let{values:o}=e,[n,l]=(0,s.useState)(null);console.log("\uD83D\uDE80 ~ selectedItem:",n);let{settings:r}=(0,s.useContext)(a.J6),d=r.mode,c=(0,s.useRef)(null),u=e=>{c.current.click(),l(e)};(0,s.useEffect)(()=>{c.current.value=""},[o.handleFileSelect]);let[x,m]=(0,s.useState)("list"),D=(e,o)=>{m(o)};return(0,t.jsx)(h.Z,{sx:{mt:4},children:(0,t.jsxs)(j.Z,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsxs)(f.Z,{variant:"subtitle1",sx:{fontWeight:600},children:[o.grupo.nome,(0,t.jsx)(f.Z,{variant:"body2",sx:{mb:2},children:o.grupo.descricao})]}),(0,t.jsx)("div",{children:(0,t.jsxs)(g.Z,{exclusive:!0,color:"primary",value:x,onChange:D,children:[(0,t.jsx)(Z.Z,{value:"list",children:(0,t.jsx)(b,{})}),(0,t.jsx)(Z.Z,{value:"grid",children:(0,t.jsx)(A,{})})]})})]}),(0,t.jsx)(i.ZP,{container:!0,spacing:4,children:o.grupo.itens.map((e,s)=>"list"===x?(0,t.jsx)(v.Z,{modeTheme:d,handleFileClick:u,selectedItem:n,inputRef:c,item:e,loadingFile:o.loadingFile,grupo:o.grupo,indexBlock:o.indexGrupo,indexItem:s,handleFileSelect:o.handleFileSelect,handleRemove:o.handleRemove,folder:o.folder,error:o.error,disabled:o.disabled},"".concat(o.indexGrupo,"-").concat(s)):(0,t.jsx)(p,{modeTheme:d,handleFileClick:u,selectedItem:n,inputRef:c,item:e,loadingFile:o.loadingFile,grupo:o.grupo,indexGrupo:o.indexGrupo,indexItem:s,handleFileSelect:o.handleFileSelect,handleRemove:o.handleRemove,folder:o.folder,error:o.error,disabled:o.disabled},"".concat(o.indexGrupo,"-").concat(s)))})]})})};var w=D},69291:function(e,o,n){n.d(o,{Z:function(){return P}});var t=n(85893),s=n(11163),a=n.n(s),i=n(67294),l=n(60565),r=n(83830),d=n(60664),c=n(49837),u=n(91359),x=n(79072),m=n(59742),p=n(75084),v=n(87536),h=n(86501),j=n(47842),f=n(45061),g=n(86887),Z=n(46749),b=n(29308),A=n(84220),D=n(67569),w=n(40039),y=n(21609),S=n(88475),C=n(44373);let I=e=>{let{getValues:o,removeAnexo:n,control:s,register:a,errors:l,type:r}=e;return o("anexos")&&o("anexos").map((e,d)=>{var c,u,x,m;return(0,t.jsxs)(i.Fragment,{children:[(0,t.jsx)(b.Z,{md:9,title:"Nome",name:"anexos[".concat(d,"].nome"),required:!0,control:s,errors:null==l?void 0:null===(c=l.anexos)||void 0===c?void 0:null===(u=c[d])||void 0===u?void 0:u.nome}),(0,t.jsx)(D.Z,{xs:1,md:1,title:"Obrigat\xf3rio",name:"anexos[".concat(d,"].obrigatorio"),value:1==e.obrigatorio,typePage:r,register:a}),(0,t.jsx)(D.Z,{xs:1,md:1,title:"Ativo",name:"anexos[".concat(d,"].status"),value:1==e.obrigatorio,typePage:r,register:a}),(0,t.jsx)(S.Z,{xs:4,md:1,title:"Remover",index:d,removeItem:n,item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois possui anexo vinculado a ele"}),(0,t.jsx)(b.Z,{xs:11,md:12,multiline:!0,items:4,title:"Descri\xe7\xe3o (opcional)",name:"anexos[".concat(d,"].descricao"),control:s,errors:null==l?void 0:null===(x=l.anexos)||void 0===x?void 0:null===(m=x[d])||void 0===m?void 0:m.descricao}),d<o("anexos").length-1&&(0,t.jsx)(C.Z,{})]},d)})};var N=n(41088);let F=e=>{var o,n;let{id:s,btnClose:S,handleConfirmNew:C,handleModalClose:F,newChange:P}=e,[E,z]=(0,i.useState)(!1),[M,O]=(0,i.useState)(null),R=a(),k=s&&s>0?"edit":"new",q=R.pathname,{title:T}=(0,i.useContext)(l.f),{setId:V}=(0,i.useContext)(r.X),{loggedUnity:G}=(0,i.useContext)(w.V),[B,L]=(0,i.useState)([]),[U,_]=(0,i.useState)(!1),{startLoading:J,stopLoading:H}=(0,N.Z)(),{trigger:W,handleSubmit:X,setValue:K,reset:Q,control:Y,getValues:$,formState:{errors:ee},register:eo}=(0,v.cI)(),en=async e=>{J();let o={...e,unidadeID:G.unidadeID,removedItems:B};console.log(o);try{"new"===k?await d.h.post("cadastros/produto/new/insertData",o).then(e=>{C?C(e.data,"produtos"):(R.push("".concat((0,Z.g_)(q))),V(e.data.id)),h.ZP.success(Z.OD.successNew)}):"edit"===k&&(await d.h.post("".concat(q,"/updateData/").concat(s),o),h.ZP.success(Z.OD.successUpdate))}catch(n){n.response&&409===n.response.status?h.ZP.error(Z.OD.errorRepeated):console.log(n)}finally{H()}},et=async()=>{try{await d.h.delete("".concat(q,"/").concat(s)),V(null),z(!1),h.ZP.success(Z.OD.successDelete)}catch(e){e.response&&409===e.response.status?(h.ZP.error(Z.OD.pendingDelete),z(!1)):console.log(e)}},es=async()=>{try{let e="new"===k?"cadastros/produto/new/getData":"".concat(q,"/getData/").concat(s);await d.h.post(e).then(e=>{O(e.data),Q(e.data)})}catch(o){console.log(o)}},ea=(e,o)=>{e.produtoAnexoID&&L([...B,e.produtoAnexoID]);let n=$("anexos").filter((e,n)=>n!==o);K("anexos",n),_(!U)},ei=()=>{let e=[...$("anexos"),{nome:"",obrigatorio:1,status:1,descricao:"",observacao:""}];K("anexos",e),_(!U)};return(0,i.useEffect)(()=>{es(),"new"===k&&setTimeout(()=>{W()},300)},[s]),(0,i.useEffect)(()=>{P&&X(en)()},[P]),(0,t.jsxs)(t.Fragment,{children:[!M&&(0,t.jsx)(j.Z,{}),M&&(0,t.jsxs)("form",{onSubmit:X(en),className:"space-y-3",children:[(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(g.Z,{btnCancel:!0,btnNew:!C,btnSave:!0,btnClose:S,handleModalClose:F,handleSubmit:()=>X(en),btnDelete:"edit"===k,onclickDelete:()=>z(!0),type:k}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)(x.ZP,{container:!0,spacing:5,children:[(0,t.jsx)(b.Z,{xs:11,md:6,title:"Nome",name:"fields.nome",required:!0,control:Y,errors:null==ee?void 0:null===(o=ee.fields)||void 0===o?void 0:o.nome}),(0,t.jsx)(A.Z,{xs:12,md:4,title:"Unidade de medida",name:"unidadeMedida.fields",value:null==M?void 0:M.unidadeMedida.fields,required:!0,options:M.unidadeMedida.options,register:eo,setValue:K,control:Y,errors:null==ee?void 0:null===(n=ee.unidadeMedida)||void 0===n?void 0:n.fields,helpText:"Selecione a unidade de medida"}),(0,t.jsx)(D.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:M.fields.status,typePage:k,register:eo})]})})]}),(0,t.jsxs)(c.Z,{children:[(0,t.jsx)(m.Z,{title:"Anexos"}),(0,t.jsx)(u.Z,{children:(0,t.jsxs)(x.ZP,{container:!0,spacing:5,children:[(0,t.jsx)(I,{getValues:$,removeAnexo:ea,control:Y,register:eo,errors:ee,type:k},U),(0,t.jsx)(x.ZP,{item:!0,xs:12,children:(0,t.jsx)(p.Z,{variant:"outlined",color:"primary",sx:{mt:1},startIcon:(0,t.jsx)(y.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){ei()},children:"Inserir Anexo"})})]})})]})]}),(0,t.jsx)(f.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+T.title,openModal:E,handleClose:()=>z(!1),handleSubmit:et,btnCancel:!0,btnConfirm:!0})]})};var P=F},77993:function(e,o,n){n.d(o,{Z:function(){return N}});var t=n(85893),s=n(11163),a=n.n(s),i=n(67294),l=n(60565),r=n(83830),d=n(40039),c=n(60664),u=n(49837),x=n(91359),m=n(79072),p=n(29630),v=n(75084),h=n(21609),j=n(87536),f=n(86501),g=n(45061),Z=n(47842),b=n(86887),A=n(46749),D=n(84220),w=n(29308),y=n(67569),S=n(88475);let C=e=>{let{getValues:o,removeItem:n,control:s,register:a,errors:i,type:l}=e;return o("items")&&o("items").map((e,o)=>{var r,d,c,u;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Z,{xs:12,md:3,title:"Nome",name:"items[".concat(o,"].nome"),required:!0,control:s,errors:null==i?void 0:null===(r=i.items)||void 0===r?void 0:null===(d=r[o])||void 0===d?void 0:d.nome}),(0,t.jsx)(w.Z,{xs:12,md:6,title:"Descri\xe7\xe3o",name:"items[".concat(o,"].descricao"),required:!1,control:s,errors:null==i?void 0:null===(c=i.items)||void 0===c?void 0:null===(u=c[o])||void 0===u?void 0:u.descricao}),(0,t.jsx)(y.Z,{xs:4,md:1,title:"Ativo",index:o,name:"items[".concat(o,"].status"),value:e.status,typePage:l,register:a}),(0,t.jsx)(y.Z,{xs:4,md:1,title:"Obrigat\xf3rio",index:o,name:"items[".concat(o,"].obrigatorio"),value:e.obrigatorio,typePage:l,register:a}),(0,t.jsx)(S.Z,{xs:4,md:1,title:"Remover",index:o,removeItem:n,item:e,pending:e.hasPending,textSuccess:"Remover este item",textError:"Este item n\xe3o pode mais ser removido pois possui anexo vinculado a ele"})]})})},I=e=>{var o,n,s,S;let{id:I,btnClose:N,handleConfirmNew:F,handleModalClose:P,newChange:E}=e,{setId:z}=(0,i.useContext)(r.X),M=a(),[O,R]=(0,i.useState)(null),[k,q]=(0,i.useState)(!1),T=I&&I>0?"edit":"new",V=M.pathname,{title:G}=(0,i.useContext)(l.f),{loggedUnity:B}=(0,i.useContext)(d.V),[L,U]=(0,i.useState)(!1),[_,J]=(0,i.useState)([]),[H,W]=(0,i.useState)(!1),{startLoading:X,stopLoading:K}=useLoad(),{trigger:Q,handleSubmit:Y,setValue:$,reset:ee,getValues:eo,control:en,formState:{errors:et},register:es}=(0,j.cI)(),ea=async()=>{try{let e="new"===T?"cadastros/grupo-anexos/new/getData":"".concat(V,"/getData/").concat(I);await c.h.post(e,{unidadeID:B.unidadeID}).then(e=>{R(e.data),ee(e.data)})}catch(o){console.log(o)}},ei=()=>{let e=[...eo("items"),{nome:"",descricao:"",status:!0,obrigatorio:!0}];$("items",e),W(!H)},el=(e,o)=>{if(1===O.items.length){f.ZP.error("\xc9 necess\xe1rio ter pelo menos um item!");return}e.id&&J([..._,e.id]);let n=eo("items").filter((e,n)=>n!==o);$("items",n),W(!H)},er=async e=>{X(),e.removedItems=_,e.unidade=B.unidadeID;try{"new"===T?await c.h.post("cadastros/grupo-anexos/new/insertData",e).then(e=>{F?F(e.data,"gruposAnexo"):(M.push("".concat((0,A.g_)(V))),z(e.data.id)),f.ZP.success(A.OD.successNew)}):"edit"===T&&(await c.h.post("".concat(V,"/updateData/").concat(I),e),f.ZP.success(A.OD.successUpdate)),U(!L)}catch(o){o.response&&409===o.response.status?f.ZP.error(A.OD.errorRepeated):console.log(o)}finally{K()}},ed=async()=>{try{await c.h.delete("".concat(V,"/deleteData/").concat(I)),z(null),setOpen(!1),f.ZP.success(A.OD.successDelete)}catch(e){e.response&&409===e.response.status?(f.ZP.error(A.OD.pendingDelete),q(!1)):console.log(e)}};return(0,i.useEffect)(()=>{ea(),"new"===T&&setTimeout(()=>{Q()},300)},[I]),(0,i.useEffect)(()=>{E&&Y(er)()},[E]),(0,t.jsxs)(t.Fragment,{children:[!O&&(0,t.jsx)(Z.Z,{}),O&&(0,t.jsxs)("form",{onSubmit:Y(er),children:[(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(b.Z,{btnCancel:!0,btnNew:!F,btnSave:!0,btnClose:N,handleModalClose:P,handleSubmit:()=>Y(er),btnDelete:"edit"===T,onclickDelete:()=>setOpen(!0),type:T}),O&&(0,t.jsx)(x.Z,{children:(0,t.jsxs)(m.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(w.Z,{xs:11,md:11,title:"Nome",name:"fields.nome",required:!0,control:en,errors:null==et?void 0:null===(o=et.fields)||void 0===o?void 0:o.nome}),(0,t.jsx)(y.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:O.fields.status,typePage:T,register:es}),(0,t.jsx)(w.Z,{xs:12,md:12,title:"Descri\xe7\xe3o",name:"fields.descricao",required:!1,control:en,errors:null==et?void 0:null===(n=et.fields)||void 0===n?void 0:n.descricao}),(0,t.jsx)(D.Z,{xs:12,md:12,title:"Formul\xe1rios",name:"formulario.fields",value:null!==(S=null==O?void 0:O.formulario.fields)&&void 0!==S?S:null,multiple:!0,limitTags:5,required:!0,options:O.formulario.options,register:es,setValue:$,control:en,errors:null==et?void 0:null===(s=et.formulario)||void 0===s?void 0:s.fields})]})})]}),(0,t.jsx)(u.Z,{sx:{mt:4},children:(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(p.Z,{sx:{mb:5},children:"Itens"}),(0,t.jsx)(m.ZP,{container:!0,spacing:3,children:(0,t.jsx)(C,{getValues:eo,removeItem:el,control:en,register:es,errors:et,type:T},H)}),(0,t.jsx)(v.Z,{variant:"outlined",color:"primary",sx:{mt:4},startIcon:(0,t.jsx)(h.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick(){ei()},children:"Inserir item"})]})})]}),(0,t.jsx)(g.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+G.title,openModal:k,handleClose:()=>q(!1),handleSubmit:ed,btnCancel:!0,btnConfirm:!0})]})};var N=I},1322:function(e,o,n){var t=n(85893),s=n(95398),a=n(44642),i=n(1890),l=n(77745);n(67294);let r=e=>{let{title:o,description:n,setOpenModal:r,openModal:d,children:c,size:u}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(i.Z,{open:d,onClose:()=>r(!1),fullWidth:!!u,maxWidth:u||null,children:[(0,t.jsx)(l.Z,{id:"form-dialog-title",children:o}),(0,t.jsx)(s.Z,{children:(0,t.jsx)(a.Z,{sx:{py:2},children:c})})]})})};o.Z=r},69418:function(e,o,n){n.d(o,{Z:function(){return A}});var t=n(85893),s=n(44642),a=n(79072),i=n(30120),l=n(49837),r=n(91359),d=n(29630),c=n(67294),u=n(40039),x=n(82747),m=n(60664),p=n(29308),v=n(84220),h=n(1322),j=n(77993),f=n(69291);let g=e=>{var o,n,s,a,l,r,x,g,Z;let{fields:b,setFields:A,handleCnpj:D,validCnpj:w,getValues:y,control:S,errors:C,setValue:I,register:N,reset:F}=e,{loggedUnity:P}=(0,c.useContext)(u.V),[E,z]=(0,c.useState)([]),[M,O]=(0,c.useState)([]),[R,k]=(0,c.useState)([]),[q,T]=(0,c.useState)(!1),[V,G]=(0,c.useState)(!1),[B,L]=(0,c.useState)(""),[U,_]=(0,c.useState)(null),J=async()=>{let e=await m.h.post("/formularios/fornecedor/getModels",{unidadeID:P.unidadeID});z(e.data)},H=async()=>{let e=await m.h.post("/formularios/fornecedor/getProducts",{unidadeID:P.unidadeID});O(e.data)},W=async()=>{let e=await m.h.post("/formularios/fornecedor/getGruposAnexo",{unidadeID:P.unidadeID});k(e.data)},X=()=>{A(null),I("fields.cnpj",""),I("fields.razaoSocial",""),I("fields.email",""),I("fields.modelo",null),I("fields.gruposAnexo",[]),I("fields.produtos",[])};(0,c.useEffect)(()=>{F(),J(),H(),W()},[]);let K=async(e,o)=>{if(G(!1),"gruposAnexo"==o){k(o=>[...o,e]);let n=[...y("fields.gruposAnexo")];n.push(e),I("fields.gruposAnexo",n)}else if("produtos"==o){O(o=>[...o,e]);let t=[...y("fields.produtos")];t.push(e),I("fields.produtos",t)}T(!q)},Q=async e=>{G(!0),"gruposAnexo"==e?(L("Novo grupo de anexos"),_((0,t.jsx)(j.Z,{btnClose:!0,handleModalClose:()=>G(!1),newChange:q,handleConfirmNew:K}))):"produtos"==e&&(L("Novo produto"),_((0,t.jsx)(f.Z,{btnClose:!0,handleModalClose:()=>G(!1),newChange:q,handleConfirmNew:K})))},Y=async e=>{G(!1)};return E&&M&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(p.Z,{xs:12,md:12,title:"CNPJ",name:"fields.cnpj",value:null==b?void 0:b.cnpj,onChange:D,clearField:y("fields.cnpj")?X:null,mask:"cnpj",required:!0,control:S,errors:null==C?void 0:null===(o=C.fields)||void 0===o?void 0:o.cnpj}),!1==w&&(0,t.jsx)(d.Z,{variant:"body2",color:"error",children:"CNPJ inv\xe1lido!"})]}),(0,t.jsx)(p.Z,{xs:12,md:12,title:"Raz\xe3o Social",name:"fields.razaoSocial",value:null==b?void 0:b.razaoSocial,disabled:!w,required:!0,control:S,errors:null==C?void 0:null===(n=C.fields)||void 0===n?void 0:n.razaoSocial}),(0,t.jsx)(p.Z,{xs:12,md:12,title:"Nome Fantasia",name:"fields.nomeFantasia",value:null==b?void 0:b.nomeFantasia,disabled:!w,required:!0,control:S,errors:null==C?void 0:null===(s=C.fields)||void 0===s?void 0:s.nomeFantasia}),(0,t.jsx)(p.Z,{xs:12,md:12,type:"email",title:"E-mail",name:"fields.email",value:null==b?void 0:b.email,disabled:!w,required:!0,control:S,errors:null==C?void 0:null===(a=C.fields)||void 0===a?void 0:a.email}),(0,t.jsx)(v.Z,{xs:12,md:12,title:"Modelo de Formul\xe1rio",name:"fields.modelo",options:E,required:!0,value:null==b?void 0:b.modelo,disabled:!w,register:N,setValue:I,control:S,errors:null==C?void 0:null===(l=C.fields)||void 0===l?void 0:l.modelo}),(0,t.jsx)(v.Z,{xs:12,md:12,title:"Grupos de Anexo",multiple:!0,createNew(){Q("gruposAnexo")},name:"fields.gruposAnexo",value:null!==(g=null==b?void 0:b.gruposAnexo)&&void 0!==g?g:[],disabled:!w,options:null!=R?R:[],register:N,setValue:I,control:S,errors:null==C?void 0:null===(r=C.fields)||void 0===r?void 0:r.gruposAnexo}),(0,t.jsx)(v.Z,{xs:12,md:12,title:"Produtos",name:"fields.produtos",value:null!==(Z=null==b?void 0:b.produtos)&&void 0!==Z?Z:[],disabled:!w,multiple:!0,createNew:()=>Q("produtos"),required:!0,options:null!=M?M:[],register:N,setValue:I,control:S,errors:null==C?void 0:null===(x=C.fields)||void 0===x?void 0:x.produtos}),(0,t.jsx)(h.Z,{title:B,size:"md",openModal:V,setOpenModal:G,handleSave:Y,children:U})]})};var Z=n(34175);let b=e=>{var o,n,p,v,h,j;let{cnpj:f,control:b,setValue:A,register:D,errors:w,reset:y,getValues:S}=e,[C,I]=(0,c.useState)(!1),{loggedUnity:N}=(0,c.useContext)(u.V),[F,P]=(0,c.useState)(null),[E,z]=(0,c.useState)(null),[M,O]=(0,c.useState)(null),R=e=>{18==e.length?(0,x.zk)(e)?(z(!0),k(e)):z(!1):(z(null),P(null))},k=async e=>{try{let o=await m.h.post("/formularios/fornecedor/cnpj",{unidadeID:N.unidadeID,cnpj:e}),n={new:o.data.new,fornecedorID:o.data.fornecedorID,data:o.data.dataAvaliacao,modelo:o.data.modelo.nome,produtos:o.data.produtos,gruposAnexo:o.data.gruposAnexo},t="";n.new&&(t=await q(e)),P({...F,cnpj:n.new?(0,Z.PK)(t.data.CNPJ):e,status:n.new?t.data.STATUS:"",dataAbertura:n.new?t.data["DATA ABERTURA"]:"",telefone:n.new?t.data.DDD+" "+t.data.TELEFONE:"",razaoSocial:n.new?t.data["RAZAO SOCIAL"]:o.data.fields.razaoSocial,nomeFantasia:n.new?t.data["NOME FANTASIA"]:o.data.fields.nomeFantasia,email:n.new?t.data.EMAIL:o.data.fields.email,cidade:n.new?t.data.MUNICIPIO+"/"+t.data.UF:"",preenchimento:n}),A("fields.cnpj",e),A("fields.razaoSocial",n.new?t.data["RAZAO SOCIAL"]:o.data.fields.razaoSocial),A("fields.nomeFantasia",n.new?t.data["NOME FANTASIA"]:o.data.fields.nomeFantasia),A("fields.nome",n.new?t.data["NOME FANTASIA"]:""),A("fields.email",n.new?t.data.EMAIL:o.data.fields.email),A("fields.modelo",o.data.modelo.id>0?o.data.modelo:null),A("fields.gruposAnexo",o.data.gruposAnexo),A("fields.produtos",o.data.produtos)}catch(s){console.error(s)}},q=async e=>{let o=e.replace(/\D/g,""),n=await m.h.get("https://api-publica.speedio.com.br/buscarcnpj?cnpj=".concat(o));return n};return(0,c.useEffect)(()=>{I(!C),f&&f.length>0&&R(f)},[]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s.Z,{children:(0,t.jsxs)(a.ZP,{container:!0,spacing:4,children:[(0,t.jsx)(a.ZP,{item:!0,xs:12,md:6,children:(0,t.jsx)(i.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:(0,t.jsx)(g,{setGruposAnexosAux:O,grupoAnexosAux:M,setFields:P,fields:null!=F?F:null,control:b,errors:w,reset:y,setValue:A,getValues:S,register:D,handleCnpj:R,validCnpj:E},C)})}),(0,t.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,t.jsx)(l.Z,{children:(0,t.jsx)(r.Z,{children:(0,t.jsxs)(i.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[(0,t.jsx)(d.Z,{variant:"body2",children:(0,t.jsx)("strong",{children:"Dados consultados da Receita Federal"})}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Raz\xe3o Social:"})," ",null==F?void 0:F.razaoSocial]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Nome Fantasia:"})," ",null==F?void 0:F.nomeFantasia]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"CNPJ:"})," ",null==F?void 0:F.cnpj]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Status:"})," ",null==F?void 0:F.status]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Data Abertura:"})," ",null==F?void 0:F.dataAbertura]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Telefone:"})," ",null==F?void 0:F.telefone]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"E-mail:"})," ",null==F?void 0:F.email]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Cidade:"})," ",null==F?void 0:F.cidade]})]})})}),(0,t.jsx)(l.Z,{sx:{mt:4},children:(0,t.jsx)(r.Z,{children:(0,t.jsxs)(i.Z,{display:"flex",flexDirection:"column",sx:{gap:4},children:[(0,t.jsx)(d.Z,{variant:"body2",children:(0,t.jsx)("strong",{children:"Dados do \xfaltimo formul\xe1rio deste fornecedor"})}),(null==F?void 0:null===(o=F.preenchimento)||void 0===o?void 0:o.new)?(0,t.jsx)(d.Z,{variant:"body2",color:"primary",children:(0,t.jsx)("strong",{children:"Novo fornecedor"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"ID: "})," ",null==F?void 0:null===(n=F.preenchimento)||void 0===n?void 0:n.fornecedorID]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Data de preenchimento:"})," ",null==F?void 0:null===(p=F.preenchimento)||void 0===p?void 0:p.data]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Modelo:"})," ",null==F?void 0:null===(v=F.preenchimento)||void 0===v?void 0:v.modelo]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Grupos de anexo: "}),null==F?void 0:null===(h=F.preenchimento)||void 0===h?void 0:h.gruposAnexo.map((e,o)=>{var n;return"".concat(e.nome).concat(o<(null==F?void 0:null===(n=F.preenchimento)||void 0===n?void 0:n.gruposAnexo.length)-1?", ":"")})]}),(0,t.jsxs)(d.Z,{variant:"caption",children:[(0,t.jsx)("strong",{children:"Produtos: "}),null==F?void 0:null===(j=F.preenchimento)||void 0===j?void 0:j.produtos.map((e,o)=>{var n;return"".concat(e.nome).concat(o<(null==F?void 0:null===(n=F.preenchimento)||void 0===n?void 0:n.produtos.length)-1?", ":"")})]})]})]})})})]})]})})})};var A=b}}]);