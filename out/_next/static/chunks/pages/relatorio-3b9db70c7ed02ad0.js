(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9845],{83102:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/relatorio",function(){return t(52285)}])},47842:function(e,l,t){"use strict";var i=t(85893),o=t(70754);let s=e=>{let{show:l,title:t,customTextProps:s,...n}=e;return l&&(0,i.jsx)("div",{className:"fixed inset-0 flex items-center justify-center rounded-lg z-50",children:(0,i.jsxs)("div",{className:"flex flex-col justify-center items-center gap-2 ",children:[(0,i.jsx)(o.Z,{color:"primary",...n}),(0,i.jsx)("p",{className:"opacity-80 text-sm ".concat(s),children:null!=t?t:"Carregando..."})]})})};l.Z=s},52189:function(e,l,t){"use strict";var i=t(85893),o=t(64004);t(67294);var s=t(42404),n=t(17844);let d=()=>{var e,l,t,d,r,a,c,x,h;let u=(0,n.Z)(),f=null==u?void 0:null===(e=u.header)||void 0===e?void 0:e.filter(e=>"Nome Fantasia"===e.name)[0].value;return u&&(0,i.jsxs)(o.G7,{style:{width:"100%"},children:[(0,i.jsx)(o.G7,{style:{padding:3,backgroundColor:"#eee",marginTop:20,border:"1px solid #ddd"},children:(0,i.jsx)(o.xv,{style:{width:"100%",textAlign:"center",fontSize:12},children:"QUALIFICA\xc7\xc3O DE FORNECEDORES"})}),(0,i.jsx)(o.G7,{style:{marginTop:20},children:(0,i.jsxs)(o.xv,{style:{fontSize:10},children:["A empresa ",(0,i.jsx)(o.xv,{children:null==u?void 0:u.unidade})," possui como norma de BPF a avalia\xe7\xe3o de seus fornecedores quanto as mat\xe9rias primas e ingredientes por estes fornecidos."]})}),"Fornecedor",(0,i.jsx)(o.G7,{style:{marginTop:20},children:(0,i.jsxs)(o.xv,{style:{fontSize:10},children:["Fornecedor: ",(0,i.jsx)(o.xv,{style:{fontWeight:"bold",fontSize:10},children:f})]})}),(0,i.jsx)(o.G7,{style:{marginTop:20},children:(0,i.jsxs)(o.xv,{style:{fontSize:10},children:[(null==u?void 0:null===(l=u.produtos)||void 0===l?void 0:l.length)>1?"Produtos fornecidos: ":"Produto fornecido: ",null==u?void 0:null===(t=u.produtos)||void 0===t?void 0:t.map((e,l)=>(0,i.jsxs)(o.xv,{children:[(0,i.jsx)(o.xv,{style:{fontWeight:"bold",fontSize:10},children:e.produtos}),l!==u.produtos.length-1&&", "]},l))]})}),(0,i.jsx)(o.G7,{style:{marginTop:20},children:(0,i.jsx)(o.G7,{style:s.W.containerFields,children:null===(d=u.header)||void 0===d?void 0:d.map((e,l)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.G7,{style:[s.W.fields,{width:"33%"}],children:[(0,i.jsx)(o.xv,{style:s.W.fieldTitle,children:null!==(a=e.name)&&void 0!==a?a:""}),(0,i.jsx)(o.xv,{style:s.W.fieldValue,children:null!==(c=e.value)&&void 0!==c?c:""})]}),(l+1)%3==0&&(0,i.jsx)(o.G7,{style:s.W.separator})]}))})}),null===(r=u.blocks)||void 0===r?void 0:r.map((e,l)=>(0,i.jsx)(o.G7,{style:[e,{marginTop:30}],children:(0,i.jsxs)(o.G7,{style:s.W.table,children:[(0,i.jsxs)(o.G7,{style:s.W.tableTitle,children:[(0,i.jsx)(o.xv,{style:[s.W.tableTitlecolumn,{width:"60%"}],children:e.nome}),(0,i.jsx)(o.xv,{style:[s.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Resposta"}),(0,i.jsx)(o.xv,{style:[s.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Observa\xe7\xe3o"})]}),e.itens.map((e,l)=>(0,i.jsxs)(o.G7,{style:s.W.tableContainer,children:[(0,i.jsx)(o.G7,{style:[s.W.tableContent,{width:"60%"}],children:(0,i.jsx)(o.xv,{style:s.W.tableContentcolumn,children:e.nome})}),(0,i.jsx)(o.G7,{style:[s.W.tableContent,{width:"20%"}],children:(0,i.jsx)(o.xv,{style:s.W.tableContentcolumn,children:null!==(x=e.resposta)&&void 0!==x?x:""})}),(0,i.jsx)(o.G7,{style:[s.W.tableContent,{width:"20%"}],children:(0,i.jsx)(o.xv,{style:s.W.tableContentcolumn,children:null!==(h=e.obsResposta)&&void 0!==h?h:""})})]}))]})},l))]})};l.Z=d},17844:function(e,l,t){"use strict";var i=t(60664),o=t(67294);t(1503);let s=()=>{let[e,l]=(0,o.useState)([]),t=localStorage.getItem("report"),s=JSON.parse(t),n=async()=>{try{let e=await i.h.post("relatorio/".concat(s.route),s);l(e.data)}catch(t){console.log(t)}};return(0,o.useEffect)(()=>{s&&n()},[]),e};l.Z=s},42404:function(e,l,t){"use strict";t.d(l,{W:function(){return o}});var i=t(64004);let o=i.mM.create({page:{flexDirection:"column",backgroundColor:"#FFF",justifyContent:"start",paddingTop:15,paddingBottom:30},title:{},header:{position:"fixed",top:-10,left:0,right:0,margin:"0 auto",fontSize:12,height:50,width:"92%",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},content:{marginHorizontal:10,fontSize:11,padding:15,flex:1},footer:{position:"absolute",bottom:20,color:"grey",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:25,fontSize:10},blockTitle:{paddingVertical:5},containerFields:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"100%",paddingTop:2},fields:{display:"flex",flexDirection:"column",gap:"2px",paddingBottom:4,paddingTop:4},fieldTitle:{fontSize:8,opacity:"0.8"},fieldValue:{fontSize:10},separator:{height:"1px",width:"100%",borderBottom:"1px solid #ddd",clear:"both"},table:{width:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid #ddd",borderTop:"1px solid #ddd",borderBottom:"1px solid #ddd",borderTopLeftRadius:3,borderTopRightRadius:3,borderBottomLeftRadius:3,borderBottomRightRadius:3},tableRed:{width:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid #ff625d",borderTop:"1px solid #ff625d",borderLeft:"1px solid #ff625d",borderBottom:"1px solid #ff625d",borderTopLeftRadius:3,borderTopRightRadius:3,borderBottomLeftRadius:3,borderBottomRightRadius:3},tableTitle:{display:"flex",flexDirection:"row",width:"100%",fontSize:8,backgroundColor:"#EEE",borderTopLeftRadius:2,borderTopRightRadius:2,borderLeft:"1px solid #ddd"},tableTitleRed:{display:"flex",flexDirection:"row",width:"100%",fontSize:8,backgroundColor:"#f8e2e2",borderTopLeftRadius:2,borderTopRightRadius:2,borderLeft:"1px solid #f8e2e2"},tableTitlecolumn:{padding:8},tableContainer:{display:"flex",flexDirection:"row",width:"100%"},tableContent:{padding:8,borderLeft:"1px solid #ddd",borderTop:"1px solid #ddd"},tableContentRed:{paddingHorizontal:8,paddingVertical:0,borderLeft:"1px solid #f8e2e2",borderTop:"1px solid #f8e2e2"},tableContentcolumn:{fontSize:9}})},52285:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return E}});var i=t(85893),o=t(67294),s=t(88942),n=t(97108),d=t(10160),r=t(21609),a=t(64004),c=t(15758),x=t(30140),h=t(52189),u=t(42404),f=t(17844);let p=()=>{var e,l,t,o,s,n,d,r,c,x,h,m,j,y,v,b,g,W,w;let T=(0,f.Z)();console.log("\uD83D\uDE80 ~ data report:",T.naoConformidades);let C=null==T?void 0:null===(e=T.header)||void 0===e?void 0:e.filter(e=>"Fornecedor"===e.name)[0].value;return T&&(0,i.jsxs)(a.G7,{style:{width:"100%"},children:[(0,i.jsx)(a.G7,{style:{padding:3,backgroundColor:"#eee",marginTop:20,border:"1px solid #ddd"},children:(0,i.jsx)(a.xv,{style:{width:"100%",textAlign:"center",fontSize:12},children:"RECEBIMENTO MP"})}),(0,i.jsx)(a.G7,{style:{marginTop:10},children:(0,i.jsxs)(a.xv,{style:{fontSize:10},children:["A empresa ",(0,i.jsx)(a.xv,{children:null==T?void 0:T.unidade})," possui como norma de BPF a avalia\xe7\xe3o de seus fornecedores quanto as mat\xe9rias primas e ingredientes por estes fornecidos."]})}),"Fornecedor",(0,i.jsx)(a.G7,{style:{marginTop:10},children:(0,i.jsxs)(a.xv,{style:{fontSize:10},children:["Fornecedor: ",(0,i.jsx)(a.xv,{style:{fontWeight:"bold",fontSize:10},children:C})]})}),(0,i.jsx)(a.G7,{style:{marginTop:10},children:(0,i.jsx)(a.G7,{style:u.W.containerFields,children:null===(l=T.header)||void 0===l?void 0:l.map((e,l)=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.G7,{style:[u.W.fields,{width:"33%"}],children:[(0,i.jsx)(a.xv,{style:u.W.fieldTitle,children:null!==(s=e.name)&&void 0!==s?s:""}),(0,i.jsx)(a.xv,{style:u.W.fieldValue,children:null!==(n=e.value)&&void 0!==n?n:""})]}),(l+1)%3==0&&(0,i.jsx)(a.G7,{style:u.W.separator})]}))})}),(0,i.jsx)(a.G7,{style:[{marginTop:10}],children:(0,i.jsxs)(a.G7,{style:u.W.table,children:[(0,i.jsxs)(a.G7,{style:u.W.tableTitle,children:[(0,i.jsx)(a.xv,{style:[u.W.tableTitlecolumn,{width:"40%"}],children:"Produto"}),(0,i.jsx)(a.xv,{style:[u.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Quantidade"}),(0,i.jsx)(a.xv,{style:[u.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"NF"}),(0,i.jsx)(a.xv,{style:[u.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Lote"})]}),T.produtos&&T.produtos.map((e,l)=>(0,i.jsxs)(a.G7,{style:u.W.tableContainer,children:[(0,i.jsx)(a.G7,{style:[u.W.tableContent,{width:"40%"}],children:(0,i.jsx)(a.xv,{style:u.W.tableContentcolumn,children:e.produto})}),(0,i.jsx)(a.G7,{style:[u.W.tableContent,{width:"20%"}],children:(0,i.jsx)(a.xv,{style:u.W.tableContentcolumn,children:null!==(d="".concat(e.quantidade," ").concat(e.unidadeMedida))&&void 0!==d?d:""})}),(0,i.jsx)(a.G7,{style:[u.W.tableContent,{width:"20%"}],children:(0,i.jsx)(a.xv,{style:u.W.tableContentcolumn,children:null!==(r=e.nf)&&void 0!==r?r:""})}),(0,i.jsx)(a.G7,{style:[u.W.tableContent,{width:"20%"}],children:(0,i.jsx)(a.xv,{style:u.W.tableContentcolumn,children:null!==(c=e.lote)&&void 0!==c?c:""})})]}))]})},p),null===(t=T.blocks)||void 0===t?void 0:t.map((e,l)=>(0,i.jsx)(a.G7,{style:[e,{marginTop:10}],children:(0,i.jsxs)(a.G7,{style:u.W.table,children:[(0,i.jsxs)(a.G7,{style:u.W.tableTitle,children:[(0,i.jsx)(a.xv,{style:[u.W.tableTitlecolumn,{width:"60%"}],children:e.nome}),(0,i.jsx)(a.xv,{style:[u.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Resposta"}),(0,i.jsx)(a.xv,{style:[u.W.tableTitlecolumn,{width:"20%",borderLeft:"1px solid #ddd"}],children:"Observa\xe7\xe3o"})]}),e.itens.map((e,l)=>(0,i.jsxs)(a.G7,{style:u.W.tableContainer,children:[(0,i.jsx)(a.G7,{style:[u.W.tableContent,{width:"60%"}],children:(0,i.jsx)(a.xv,{style:u.W.tableContentcolumn,children:e.nome})}),(0,i.jsx)(a.G7,{style:[u.W.tableContent,{width:"20%"}],children:(0,i.jsx)(a.xv,{style:u.W.tableContentcolumn,children:null!==(x=e.resposta)&&void 0!==x?x:""})}),(0,i.jsx)(a.G7,{style:[u.W.tableContent,{width:"20%"}],children:(0,i.jsx)(a.xv,{style:u.W.tableContentcolumn,children:null!==(h=e.obsResposta)&&void 0!==h?h:""})})]}))]})},l)),null===(o=T.naoConformidades)||void 0===o?void 0:o.map((e,l)=>(0,i.jsx)(a.G7,{style:[{marginTop:10}],children:(0,i.jsxs)(a.G7,{style:u.W.tableRed,children:[(0,i.jsx)(a.G7,{style:u.W.tableTitleRed,children:(0,i.jsxs)(a.xv,{style:[u.W.tableTitlecolumn,{width:"100%"}],children:["N\xe3o conformidade ",l+1," (",1==e.tipo?"Transporte":"Produto",")"]})}),(0,i.jsxs)(a.G7,{style:{width:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(a.G7,{style:[u.W.tableContentRed,{width:"100%",display:"flex",flexDirection:"row"}],children:[(0,i.jsxs)(a.G7,{style:[u.W.fields,{width:"33%"}],children:[(0,i.jsx)(a.xv,{style:u.W.fieldTitle,children:"Data de abertura"}),(0,i.jsx)(a.xv,{style:u.W.fieldValue,children:e.dataFornecedor+" "+e.horaFornecedor})]}),(0,i.jsxs)(a.G7,{style:[u.W.fields,{width:"33%"}],children:[(0,i.jsx)(a.xv,{style:u.W.fieldTitle,children:"Data conclus\xe3o"}),(0,i.jsx)(a.xv,{style:u.W.fieldValue,children:e.dataConclusao+" "+e.horaConclusao})]}),(0,i.jsxs)(a.G7,{style:[u.W.fields,{width:"33%"}],children:[(0,i.jsx)(a.xv,{style:u.W.fieldTitle,children:"Profissional preenchimento"}),(0,i.jsx)(a.xv,{style:u.W.fieldValue,children:null!==(y=e.profissionalNomePreenchimento)&&void 0!==y?y:""})]})]}),(0,i.jsxs)(a.G7,{style:[u.W.tableContentRed,{width:"100%",display:"flex",flexDirection:"row"}],children:[(0,i.jsxs)(a.G7,{style:[u.W.fields,{width:"33%"}],children:[(0,i.jsx)(a.xv,{style:u.W.fieldTitle,children:"Produto"}),(0,i.jsx)(a.xv,{style:u.W.fieldValue,children:null!==(v=e.produtoNome)&&void 0!==v?v:""})]}),(0,i.jsxs)(a.G7,{style:[u.W.fields,{width:"33%"}],children:[(0,i.jsx)(a.xv,{style:u.W.fieldTitle,children:"Observa\xe7\xe3o"}),(0,i.jsx)(a.xv,{style:u.W.fieldValue,children:null!==(b=e.obsFornecedor)&&void 0!==b?b:""})]}),(0,i.jsxs)(a.G7,{style:[u.W.fields,{width:"33%"}],children:[(0,i.jsx)(a.xv,{style:u.W.fieldTitle,children:"Profissional preenchimento"}),(0,i.jsx)(a.xv,{style:u.W.fieldValue,children:null!==(g=e.profissionalNomePreenchimento)&&void 0!==g?g:""})]})]}),(0,i.jsxs)(a.G7,{style:[u.W.tableContentRed,{width:"100%",display:"flex",flexDirection:"row"}],children:[(0,i.jsxs)(a.G7,{style:[u.W.fields,{width:"33%"}],children:[(0,i.jsx)(a.xv,{style:u.W.fieldTitle,children:"Conclus\xe3o"}),(0,i.jsx)(a.xv,{style:u.W.fieldValue,children:null!==(W=e.conclusao)&&void 0!==W?W:""})]}),(0,i.jsxs)(a.G7,{style:[u.W.fields,{width:"33%"}],children:[(0,i.jsx)(a.xv,{style:u.W.fieldTitle,children:"Avalia\xe7\xe3o final"}),(0,i.jsx)(a.xv,{style:u.W.fieldValue,children:null!==(w=e.data)&&void 0!==w?w:""})]})]})]})]})},l))]})},m=()=>{let e={DadosFornecedor:h.Z,DadosRecebimentoMp:p};return e};var j=t(54225),y=t(1890),v=t(77745),b=t(95398),g=t(76779),W=t(29630),w=t(60664),T=t(80562),C=t(47842),G=t(86501);let S=e=>{let{title:l,description:t,open:s,handleClose:n}=e,[d,a]=(0,o.useState)(!1),[c,x]=(0,o.useState)(null),h=localStorage.getItem("report"),u=JSON.parse(h),f=async()=>{a(!d),d?(a(!1),x(null),n()):await p()},p=async()=>{try{let e=await w.h.post("/formularios/fornecedor/createDocumentAutentique/".concat(u.id,"/").concat(u.usuarioID,"/").concat(u.unidadeID));x(e.data),localStorage.setItem("hashSignedDocument",JSON.stringify(e.data))}catch(l){console.log(l)}},m=async()=>{let e=localStorage.getItem("hashSignedDocument"),l=JSON.parse(e);if(l)try{let t=await w.h.post("/formularios/fornecedor/saveSignedDocument",{id:u.id,usuarioID:u.usuarioID,unidadeID:u.unidadeID,hashSignedDocument:l});console.log("\uD83D\uDE80 ~ response:",t),G.ZP.success(t.data.message)}catch(i){console.log(i)}},S=()=>{n(),a(!1),x(null),localStorage.removeItem("hashSignedDocument")};return(0,o.useEffect)(()=>{s||(m(),S())},[n]),(0,i.jsxs)(y.Z,{open:s,maxWidth:"xl",fullWidth:!0,scroll:c?"paper":"body",children:[(0,i.jsxs)(v.Z,{id:"form-dialog-title",children:[l,(0,i.jsx)(T.Z,{onClick(){n(),a(!1)},className:"!absolute !right-2 !top-2",children:(0,i.jsx)(r.Z,{icon:"mdi:close"})})]}),(0,i.jsx)(b.Z,{children:d?(0,i.jsx)("div",{className:"h-[80vh]",children:c?(0,i.jsxs)("div",{className:"h-[80vh]",children:[(0,i.jsx)(W.Z,{variant:"body1",children:t}),(0,i.jsx)("iframe",{src:"https://painel.autentique.com.br/documentos/".concat(c),frameborder:"0",width:"100%",height:"100%"})]}):(0,i.jsx)(C.Z,{title:"Preparando documento para assinatura...",show:!0,customTextProps:"text-xl font-bold",size:60,thickness:4})}):(0,i.jsxs)("div",{className:"h-[80vh]",children:[(0,i.jsx)(W.Z,{variant:"body1",children:t}),(0,i.jsx)("iframe",{src:"https://painel.autentique.com.br/entrar",frameBorder:"0",width:"100%",height:"100%"})]})}),(0,i.jsxs)(g.Z,{className:"dialog-actions-dense",children:[d&&(0,i.jsxs)(j.Z,{variant:"outlined",color:"primary",onClick(){a(!1),x(null)},className:"flex gap-1",children:[(0,i.jsx)(r.Z,{icon:"fe:login"}),"Fazer login"]}),(0,i.jsxs)(j.Z,{variant:d?"outlined":"contained",color:"primary",onClick:f,className:"flex gap-1",children:[(0,i.jsx)(r.Z,{icon:d?"":"fluent:signature-24-filled"}),d?"Fechar":"Confirmar e assinar"]})]})]})},D=e=>{let{nameComponent:l}=e,t=m(),o=t[l];return(0,i.jsx)(a.BB,{children:(0,i.jsxs)(a.T3,{size:"A4",style:{paddingHorizontal:25},children:[(0,i.jsx)(x.Z,{}),o&&(0,i.jsx)(o,{}),(0,i.jsx)(c.Z,{})]})})},R=e=>{let{nameComponent:l}=e,[t,s]=(0,o.useState)(!1),n=localStorage.getItem("report"),c=JSON.parse(n),x=()=>{s(!0)},h=()=>{window.close()},u=[{id:1,title:"Fechar",color:"primary",size:"large",variant:"outlined",disable:!1,icon:"ooui:close",function:h},{id:2,title:"Assinar digitalmente",color:"primary",size:"large",variant:"outlined",disable:c.status<40,icon:"fluent:signature-24-filled",function:x}];return(0,i.jsxs)("div",{className:"fixed bottom-10 right-8 flex flex-col gap-2",children:[u&&u.map(e=>(0,i.jsx)("div",{onClick:e.disable?null:e.function,children:(0,i.jsx)(d.Z,{color:e.color,size:e.size,variant:e.variant,className:e.disable?"hover:opacity-20 opacity-20":"",children:(0,i.jsx)(r.Z,{icon:e.icon,className:e.disable?"cursor-default":""})})},e.id)),(0,i.jsx)("div",{children:(0,i.jsx)(a.WD,{document:(0,i.jsx)(D,{nameComponent:l}),fileName:l,targetDirectory:"C:/Users/Jonatan/Desktop/teste",children(e){let{blob:l,url:t,loading:o,error:s}=e;return(0,i.jsx)("div",{style:{textAlign:"center"},children:(0,i.jsx)(d.Z,{color:"primary",size:"large",variant:"outlined",children:(0,i.jsx)(r.Z,{icon:"basil:download-solid"})})})}})}),(0,i.jsx)(S,{open:t,handleClose:()=>s(!1),title:"Assinatura do relat\xf3rio"})]})},z=()=>(0,i.jsx)(a.T3,{size:"A4",children:(0,i.jsx)(a.G7,{children:(0,i.jsx)(a.xv,{style:{color:"red",fontSize:20,padding:10},children:"Erro ao carregar o relat\xf3rio. Entre em contato com o suporte."})})});var N=t(11163),Z=t(62097);let F=()=>{let e=localStorage.getItem("report"),l=JSON.parse(e),t=null==l?void 0:l.nameComponent,d=m(),r=d[t],[a,c]=o.useState({}),x=(0,N.useRouter)();return(0,o.useEffect)(()=>{c(x.query)},[x.query]),(0,i.jsx)(s.Z,{children:r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R,{nameComponent:t}),(0,i.jsx)(n.Z,{params:null==x?void 0:x.query,children:(0,i.jsx)(r,{params:null==x?void 0:x.query})})]}):(0,i.jsx)(z,{})})};F.getLayout=e=>(0,i.jsx)(s.Z,{children:e}),F.setConfig=()=>{let{palette:e}=(0,Z.Z)();return{mode:e.mode}};var E=F}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=83102)}),_N_E=e.O()}]);