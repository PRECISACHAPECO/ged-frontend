"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2350],{82350:function(e,o,t){t.d(o,{Z:function(){return P}});var l=t(85893),s=t(11163),n=t.n(s),i=t(67294),r=t(60565),a=t(83830),d=t(60664),c=t(49837),u=t(91359),x=t(79072),m=t(44373),v=t(87536),p=t(86501),h=t(47842),f=t(45061),j=t(86887),g=t(46749),Z=t(29308),b=t(84220),y=t(67569),D=t(40039),C=t(29630),w=t(61953),I=t(75084),E=t(3893),F=t(88475);let S=e=>{var o,t,s,n,i;let{data:r,index:a,indexAnexo:d,handleRemoveAnexo:c,control:u,register:x,errors:m}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.Z,{xs:12,md:9,title:"Nome",name:"fields.opcoes[".concat(a,"].anexos[").concat(d,"].nome"),required:!0,control:u,errors:null==m?void 0:null===(o=m.fields)||void 0===o?void 0:null===(t=o.opcoes)||void 0===t?void 0:null===(s=t[a])||void 0===s?void 0:null===(n=s.anexos)||void 0===n?void 0:null===(i=n[d])||void 0===i?void 0:i.nome}),(0,l.jsx)(E.Z,{xs:6,md:2,title:"Obrigat\xf3rio",name:"fields.opcoes[".concat(a,"].anexos[").concat(d,"].obrigatorio"),value:r.obrigatorio,register:x}),(0,l.jsx)(F.Z,{xs:6,md:1,title:0==d?"Remover":"",index:a,removeItem:()=>c(r,a,d),item:r,pending:!1,textSuccess:"Remover este anexo",textError:"Este anexo n\xe3o pode mais ser removido pois possui v\xednculo atrelado a ele"})]})};var k=t(21609);t(74865);let A=e=>{let{data:o,addAnexo:t,register:s,control:n,errors:r,handleRemoveAnexo:a,getValues:d,watch:m}=e,[v,p]=(0,i.useState)(!1),[h,f]=(0,i.useState)((()=>{let e=[];return o&&o.map(o=>{e.push(1==o.anexo)}),e})()),j=e=>{console.log("\uD83D\uDE80 ~ dddddddddddddddddddddddddyhyuyudddddddi:",e);let o=[...h];o[e]=!o[e],f(o)};return o&&o.map((e,o)=>(0,l.jsx)(c.Z,{sx:{mt:3},children:(0,l.jsxs)(u.Z,{children:[(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.Z,{variant:"h6",sx:{my:3},children:(0,l.jsxs)(w.Z,{display:"flex",alignItems:"center",sx:{gap:2},children:[(0,l.jsx)(k.Z,{icon:"akar-icons:edit"}),(0,l.jsx)("p",{children:e.nome})]})}),(0,l.jsxs)(w.Z,{display:"flex",alignItems:"center",sx:{gap:4},children:[(0,l.jsx)(w.Z,{children:(0,l.jsx)(E.Z,{title:"Solicita anexo",name:"fields.opcoes[".concat(o,"].anexo"),onClick:()=>j(o),value:e.anexo,register:s})}),(0,l.jsx)(w.Z,{children:(0,l.jsx)(E.Z,{title:"Bloqueia formul\xe1rio",name:"fields.opcoes[".concat(o,"].bloqueiaFormulario"),value:e.bloqueiaFormulario,register:s})}),(0,l.jsx)(w.Z,{children:(0,l.jsx)(E.Z,{title:"Observa\xe7\xe3o",name:"fields.opcoes[".concat(o,"].observacao"),value:e.observacao,register:s})})]})]}),h[o]&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C.Z,{variant:"body1",sx:{my:3},children:"Anexos do item"}),(0,l.jsx)(x.ZP,{container:!0,spacing:4,children:e.anexos.map((e,t)=>(0,l.jsx)(S,{index:o,indexAnexo:t,data:e,control:n,handleRemoveAnexo:a,register:s,errors:r},v))}),(0,l.jsx)(w.Z,{sx:{mt:3},children:(0,l.jsx)(I.Z,{type:"button",variant:"outlined",startIcon:(0,l.jsx)(k.Z,{icon:"material-symbols:add-circle-outline-rounded"}),onClick:()=>t(o),children:"Inserir"})})]})]})}))},N=e=>{var o,t,s,C,w,I,E,F,S,k,N,P;let{id:q,btnClose:O,handleModalClose:R,setNewChange:z,newChange:V,outsideID:_,handleConfirmNew:T}=e;console.log("\uD83D\uDE80 ~ FormItem:",q);let[M,$]=(0,i.useState)(!1),[L,W]=(0,i.useState)(!1),[B,K]=(0,i.useState)(null),Q=n(),U=q&&q>0?"edit":"new",X=Q.pathname,{title:G}=(0,i.useContext)(r.f),{setId:H}=(0,i.useContext)(a.X),{loggedUnity:J}=(0,i.useContext)(D.V),{trigger:Y,handleSubmit:ee,watch:eo,getValues:et,setValue:el,reset:es,control:en,formState:{errors:ei},register:er}=(0,v.cI)(),ea=async e=>{let o={...e,unidadeID:J.unidadeID};console.log("onSubmit: ",o);try{"new"===U?await d.h.post("cadastros/item/new/insertData",o).then(e=>{_?(H(_),T(e.data)):(Q.push("".concat((0,g.g_)(X))),H(e.data)),p.ZP.success(g.OD.successNew)}):"edit"===U&&(await d.h.post("/cadastros/item/updateData/".concat(q),o),p.ZP.success(g.OD.successUpdate),ec()),setSavingForm(!savingForm)}catch(t){t.response&&409===t.response.status?p.ZP.error(g.OD.errorRepeated):console.log(t)}},ed=async()=>{try{await d.h.delete("".concat(X,"/").concat(q)),H(null),$(!1),p.ZP.success(g.OD.successDelete)}catch(e){e.response&&409===e.response.status?(p.ZP.error(g.OD.pendingDelete),$(!1)):console.log(e)}},ec=async()=>{try{await d.h.post("new"===U?"cadastros/item/new/getData":"cadastros/item/getData/".concat(q)).then(e=>{console.log("\uD83D\uDE80 ~ getData: ",e.data),K(e.data),es(e.data)})}catch(e){console.log(e)}},eu=e=>{let o=[...et("fields.opcoes")];o[e].anexos.push({nome:"",obrigatorio:!1});let t={...B,fields:{...B.fields,opcoes:o}};K(t),el("fields.opcoes",o)},ex=async e=>{try{let o=await d.h.post("cadastros/item/getAlternatives",{alternativa:e});o.data&&(console.log("\uD83D\uDE80 ~ response.data:",o.data),W(!L),el("fields.opcoes",o.data),K({...B,fields:{...B.fields,opcoes:o.data}}))}catch(t){console.log(t)}},em=(e,o,t)=>{console.log("\uD83D\uDE80 ~ data, index, indexAnexo:",e,o,t);let l=[...et("fields.opcoes")];l[o].anexos.splice(t,1),console.log("\uD83D\uDE80 ~ copyAnexos:",l);let s={...B,fields:{...B.fields,opcoes:l}};console.log("\uD83D\uDE80 ~ newData:",s),K(s),el("fields.opcoes",l),W(!L)};return(0,i.useEffect)(()=>{ec(),"new"===U&&setTimeout(()=>{Y()},300)},[q]),(0,i.useEffect)(()=>{V&&ee(ea)()},[V]),(0,l.jsxs)(l.Fragment,{children:[!B&&(0,l.jsx)(h.Z,{}),B&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{children:(0,l.jsxs)("form",{onSubmit:ee(ea),id:"formItem",children:[(0,l.jsx)(j.Z,{btnCancel:!0,btnNew:!0,btnSave:!0,btnClose:O,handleModalClose:R,handleSubmit:()=>ee(ea),btnDelete:"edit"===U,onclickDelete:()=>$(!0),type:U}),(0,l.jsx)(u.Z,{children:(0,l.jsxs)(x.ZP,{container:!0,spacing:5,children:[(0,l.jsx)(b.Z,{xs:12,md:11,title:"Formul\xe1rios",name:"fields.formulario",value:null==B?void 0:null===(o=B.fields)||void 0===o?void 0:o.formulario,required:!0,options:null==B?void 0:null===(t=B.fields)||void 0===t?void 0:null===(s=t.formulario)||void 0===s?void 0:s.opcoes,register:er,setValue:el,control:en,errors:null==ei?void 0:null===(C=ei.fields)||void 0===C?void 0:C.formulario}),(0,l.jsx)(y.Z,{xs:1,md:1,title:"Ativo",name:"fields.status",value:null==B?void 0:null===(w=B.fields)||void 0===w?void 0:w.status,typePage:U,register:er}),(0,l.jsx)(Z.Z,{xs:12,md:12,title:"Nome",name:"fields.nome",required:!0,control:en,errors:null==ei?void 0:null===(I=ei.fields)||void 0===I?void 0:I.nome}),(0,l.jsx)(b.Z,{xs:12,md:12,title:"Alternativa",name:"fields.alternativa",value:null==B?void 0:null===(E=B.fields)||void 0===E?void 0:E.alternativa,onChange:ex,required:!0,options:null==B?void 0:null===(F=B.fields)||void 0===F?void 0:null===(S=F.alternativa)||void 0===S?void 0:S.opcoes,register:er,setValue:el,control:en,errors:null==ei?void 0:null===(k=ei.fields)||void 0===k?void 0:k.alternativa}),(0,l.jsx)(Z.Z,{xs:12,md:12,multiline:!0,rows:4,title:"Ajuda do item (mostrado em (?))",name:"fields.ajuda",control:en,errors:null==ei?void 0:null===(N=ei.fields)||void 0===N?void 0:N.ajuda}),(0,l.jsx)(m.Z,{})]})})]})}),(0,l.jsx)(A,{data:null==B?void 0:null===(P=B.fields)||void 0===P?void 0:P.opcoes,handleRemoveAnexo:em,register:er,control:en,errors:ei,getValues:et,addAnexo:eu,watch:eo},L)]}),(0,l.jsx)(f.Z,{text:"Tem certeza que deseja excluir?",title:"Excluir "+G.title,openModal:M,handleClose:()=>$(!1),handleSubmit:ed,btnCancel:!0,btnConfirm:!0})]})};var P=N},45061:function(e,o,t){var l=t(85893),s=t(75084),n=t(1890),i=t(77745),r=t(95398),a=t(76779),d=t(44642);t(21609);var c=t(19604),u=t(29630),x=t(55343),m=t(67836),v=t(67294),p=t(82747);t(84220),t(29308),t(67569),t(3893),t(88475);let h=e=>{let{title:o,text:t,handleClose:h,openModal:f,handleSubmit:j,cnpj:g,nomeFornecedor:Z,gruposAnexo:b,email:y,setEmail:D,inputEmail:C,btnCancel:w,btnConfirm:I,grupoAnexosFornecedor:E,btnCancelColor:F,btnConfirmColor:S,closeAfterSave:k,listErrors:A}=e,[N,P]=(0,v.useState)(!1);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(n.Z,{open:f,"aria-labelledby":"form-dialog-title",disableEscapeKeyDown:!0,onClose(e,o){"backdropClick"!==o&&h()},children:[(0,l.jsx)(i.Z,{id:"form-dialog-title",children:o}),(0,l.jsxs)(r.Z,{children:[(0,l.jsxs)(d.Z,{sx:{mb:3},children:[t,A&&A.status&&(0,l.jsxs)(c.Z,{variant:"outlined",severity:"error",sx:{mt:2},children:["Por favor, verifique os campos abaixo:",(0,l.jsx)(u.Z,{variant:"subtitle1",color:"error",sx:{mt:2},children:A.errors.map((e,o)=>(0,l.jsxs)(u.Z,{variant:"body2",color:"error",children:["- ",e]},o))})]})]}),C&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(x.Z,{sx:{mt:2},fullWidth:!0,children:[(0,l.jsx)(m.Z,{defaultValue:"",type:"email",label:"E-mail do Fornecedor (opcional)",placeholder:"E-mail do Fornecedor (opcional)","aria-describedby":"validation-schema-nome",name:"email",error:(null==y?void 0:y.length)>0&&N,inputProps:{onChange(e){D(e.target.value),P(!(0,p.dI)(e.target.value))}}}),(null==y?void 0:y.length)>0&&N&&(0,l.jsx)(u.Z,{variant:"body2",color:"error",children:"Por favor, insira um e-mail v\xe1lido!"})]}),(0,l.jsx)(c.Z,{severity:"info",sx:{mt:2},children:"Se o e-mail for preenchido, o mesmo receber\xe1 as instru\xe7\xf5es de cadastro e preenchimento do formul\xe1rio no e-mail."})]})]}),(0,l.jsxs)(a.Z,{className:"dialog-actions-dense",children:[w&&(0,l.jsx)(s.Z,{variant:"outlined",color:"primary",onClick:h,children:"Cancelar"}),I&&(0,l.jsx)(s.Z,{variant:"contained",disabled:C&&(null==y?void 0:y.length)>0&&N||A&&A.status,color:S||"error",onClick:C&&g?()=>{j(g,Z,b,y),k&&h()}:C&&!g?()=>{j(y),k&&h()}:()=>{j(),k&&h()},children:"Confirmar"})]})]})})};o.Z=h},3893:function(e,o,t){var l=t(85893),s=t(79072),n=t(61953),i=t(22841),r=t(75158),a=t(53934);let d=e=>{let{xs:o,md:t,title:d,index:c,name:u,typePage:x,value:m,disabled:v,register:p,onClick:h,helpText:f,helpTextPosition:j}=e;return(0,l.jsx)(s.ZP,{item:!0,xs:o,md:t,children:(0,l.jsx)(n.Z,{display:"flex",alignItems:"center",justifyContent:"start",sx:{gap:0},children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{control:(0,l.jsx)(r.Z,{name:u,onClick:h,...p(u),defaultChecked:m,disabled:v}),label:d,size:"small",sx:{marginRight:"4px","&:hover":{"& .MuiFormControlLabel-label":{color:"primary.main"}}}}),f&&(0,l.jsx)(a.Z,{text:f,position:null!=j?j:"top"})]})})})};o.Z=d},88475:function(e,o,t){var l=t(85893),s=t(79072),n=t(61953),i=t(29630),r=t(72389),a=t(80562),d=t(21609);let c=e=>{let{xs:o,md:t,icon:c,color:u,title:x,removeItem:m,item:v,pending:p,index:h,textSuccess:f,textError:j}=e;return f=f||"Remover este item",j=j||"Este item n\xe3o pode ser removido pois possui cadastros vinculados a ele",(0,l.jsx)(s.ZP,{item:!0,xs:o,md:t,children:(0,l.jsxs)(n.Z,{height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,l.jsx)(i.Z,{variant:"caption",children:x}),(0,l.jsx)(r.Z,{title:1==p?j:f,children:(0,l.jsx)(a.Z,{color:null!=u?u:"error",size:"small",onClick(){1!=p&&m(v,h)},sx:{opacity:1==p?.5:1,cursor:1==p?"default":"pointer"},children:(0,l.jsx)(d.Z,{icon:null!=c?c:"tabler:trash-filled"})})})]})})};o.Z=c},84220:function(e,o,t){var l=t(85893),s=t(79072),n=t(55343),i=t(35966),r=t(67836),a=t(87536),d=t(53934);let c=e=>{var o;let{xs:t,md:c,title:u,options:x,name:m,type:v,limitTags:p,value:h,required:f,control:j,disabled:g,multiple:Z,setValue:b,errors:y,onChange:D,className:C,createNew:w,handleRegistroEstabelecimento:I,helpText:E,helpTextPosition:F}=e,S=x?[...x]:[];return w&&(S=[{nome:"-- Novo --"},...x]),(0,l.jsx)(s.ZP,{item:!0,xs:t,md:c,sx:{my:1},className:C,children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(n.Z,{fullWidth:!0,children:(0,l.jsx)(a.Qr,{name:m,control:j,defaultValue:h,rules:{required:f},render(e){let{field:t}=e;return(0,l.jsx)(i.Z,{...t,multiple:Z,limitTags:p,size:"small",options:S,getOptionLabel:e=>(null==e?void 0:e.cnpj)?"".concat(e.cnpj," - ").concat(e.nome):null==e?void 0:e.nome,value:Z&&t.value&&t.value.length>0?t.value.map(e=>x.find(o=>o.nome===e.nome)):null!==(o=t.value)&&void 0!==o?o:{nome:""},disabled:g,onChange(e,o){o&&"-- Novo --"===o.nome?(w(),b(m,Z?[]:{nome:""})):(D&&D(o),b(m,o),"registroestabelecimento"===v&&I(o?o.id:null))},renderInput:e=>(0,l.jsx)(r.Z,{...e,label:u,placeholder:u,error:!!y}),noOptionsText:"Sem op\xe7\xf5es"})}})}),E&&(0,l.jsx)("div",{className:"absolute right-[60px] top-[12px] ",children:(0,l.jsx)(d.Z,{text:E,position:null!=F?F:"top"})})]})})};o.Z=c},47842:function(e,o,t){var l=t(85893),s=t(70754);let n=e=>{let{show:o,title:t}=e;return o&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-lg z-50",children:(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center gap-2 ",children:[(0,l.jsx)(s.Z,{color:"primary"}),(0,l.jsx)("p",{className:"text-sm opacity-80",children:null!=t?t:"Carregando..."})]})})};o.Z=n},82747:function(e,o,t){function l(e){if(14!==(e=null==e?void 0:e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let o=e.length-2,t=e.substring(0,o),l=e.substring(o),s=0,n=o-7;for(let i=o;i>=1;i--)s+=t.charAt(o-i)*n--,n<2&&(n=9);let r=s%11<2?0:11-s%11;if(r!=l.charAt(0))return!1;o+=1,t=e.substring(0,o),s=0,n=o-7;for(let a=o;a>=1;a--)s+=t.charAt(o-a)*n--,n<2&&(n=9);return(r=s%11<2?0:11-s%11)==l.charAt(1)}function s(e){let o;if(11!==(e=e.replace(/[^\d]+/g,"")).length||/^(\d)\1+$/.test(e))return!1;let t=0;for(let l=1;l<=9;l++)t+=parseInt(e.substring(l-1,l))*(11-l);if((10==(o=10*t%11)||11===o)&&(o=0),o!==parseInt(e.substring(9,10)))return!1;t=0;for(let s=1;s<=10;s++)t+=parseInt(e.substring(s-1,s))*(12-s);return(10==(o=10*t%11)||11===o)&&(o=0),o===parseInt(e.substring(10,11))}function n(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}t.d(o,{dI:function(){return n},sw:function(){return s},zk:function(){return l}})}}]);